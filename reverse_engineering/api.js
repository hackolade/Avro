"use strict";var Im=Object.defineProperty;var u=(e,r)=>Im(e,"name",{value:r,configurable:!0});var _e=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var St=_e((Q1,tc)=>{"use strict";var ec={},Pm=u(e=>{ec.lodash=e.require("lodash")},"setDependencies");tc.exports={setDependencies:Pm,dependencies:ec}});var rc=_e((Zr,Bn)=>{(function(){var e,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",c="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",y=500,v="__lodash_placeholder__",x=1,T=2,E=4,B=1,N=2,I=1,L=2,U=4,H=8,se=16,j=32,pe=64,Se=128,Fe=256,Bt=512,Ht=30,Gn="...",ql=800,Ul=16,bu=1,Hl=2,Wl=3,wr=1/0,rr=9007199254740991,zl=17976931348623157e292,Jn=NaN,Nt=4294967295,Vl=Nt-1,$l=Nt>>>1,Gl=[["ary",Se],["bind",I],["bindKey",L],["curry",H],["curryRight",se],["flip",Bt],["partial",j],["partialRight",pe],["rearg",Fe]],Fr="[object Arguments]",Yn="[object Array]",Jl="[object AsyncFunction]",un="[object Boolean]",an="[object Date]",Yl="[object DOMException]",Kn="[object Error]",jn="[object Function]",xu="[object GeneratorFunction]",gt="[object Map]",fn="[object Number]",Kl="[object Null]",Wt="[object Object]",Tu="[object Promise]",jl="[object Proxy]",cn="[object RegExp]",mt="[object Set]",ln="[object String]",Zn="[object Symbol]",Zl="[object Undefined]",hn="[object WeakMap]",Xl="[object WeakSet]",pn="[object ArrayBuffer]",Mr="[object DataView]",po="[object Float32Array]",_o="[object Float64Array]",yo="[object Int8Array]",vo="[object Int16Array]",go="[object Int32Array]",mo="[object Uint8Array]",wo="[object Uint8ClampedArray]",bo="[object Uint16Array]",xo="[object Uint32Array]",Ql=/\b__p \+= '';/g,eh=/\b(__p \+=) '' \+/g,th=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Su=/&(?:amp|lt|gt|quot|#39);/g,Eu=/[&<>"']/g,rh=RegExp(Su.source),nh=RegExp(Eu.source),ih=/<%-([\s\S]+?)%>/g,oh=/<%([\s\S]+?)%>/g,Au=/<%=([\s\S]+?)%>/g,sh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,uh=/^\w*$/,ah=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,To=/[\\^$.*+?()[\]{}|]/g,fh=RegExp(To.source),So=/^\s+/,ch=/\s/,lh=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,hh=/\{\n\/\* \[wrapped with (.+)\] \*/,ph=/,? & /,dh=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_h=/[()=,{}\[\]\/\s]/,yh=/\\(\\)?/g,vh=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ou=/\w*$/,gh=/^[-+]0x[0-9a-f]+$/i,mh=/^0b[01]+$/i,wh=/^\[object .+?Constructor\]$/,bh=/^0o[0-7]+$/i,xh=/^(?:0|[1-9]\d*)$/,Th=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xn=/($^)/,Sh=/['\n\r\u2028\u2029\\]/g,Qn="\\ud800-\\udfff",Eh="\\u0300-\\u036f",Ah="\\ufe20-\\ufe2f",Oh="\\u20d0-\\u20ff",Cu=Eh+Ah+Oh,Bu="\\u2700-\\u27bf",Nu="a-z\\xdf-\\xf6\\xf8-\\xff",Ch="\\xac\\xb1\\xd7\\xf7",Bh="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Nh="\\u2000-\\u206f",Rh=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ru="A-Z\\xc0-\\xd6\\xd8-\\xde",Iu="\\ufe0e\\ufe0f",Pu=Ch+Bh+Nh+Rh,Eo="['\u2019]",Ih="["+Qn+"]",Lu="["+Pu+"]",ei="["+Cu+"]",ku="\\d+",Ph="["+Bu+"]",Fu="["+Nu+"]",Mu="[^"+Qn+Pu+ku+Bu+Nu+Ru+"]",Ao="\\ud83c[\\udffb-\\udfff]",Lh="(?:"+ei+"|"+Ao+")",Du="[^"+Qn+"]",Oo="(?:\\ud83c[\\udde6-\\uddff]){2}",Co="[\\ud800-\\udbff][\\udc00-\\udfff]",Dr="["+Ru+"]",qu="\\u200d",Uu="(?:"+Fu+"|"+Mu+")",kh="(?:"+Dr+"|"+Mu+")",Hu="(?:"+Eo+"(?:d|ll|m|re|s|t|ve))?",Wu="(?:"+Eo+"(?:D|LL|M|RE|S|T|VE))?",zu=Lh+"?",Vu="["+Iu+"]?",Fh="(?:"+qu+"(?:"+[Du,Oo,Co].join("|")+")"+Vu+zu+")*",Mh="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Dh="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",$u=Vu+zu+Fh,qh="(?:"+[Ph,Oo,Co].join("|")+")"+$u,Uh="(?:"+[Du+ei+"?",ei,Oo,Co,Ih].join("|")+")",Hh=RegExp(Eo,"g"),Wh=RegExp(ei,"g"),Bo=RegExp(Ao+"(?="+Ao+")|"+Uh+$u,"g"),zh=RegExp([Dr+"?"+Fu+"+"+Hu+"(?="+[Lu,Dr,"$"].join("|")+")",kh+"+"+Wu+"(?="+[Lu,Dr+Uu,"$"].join("|")+")",Dr+"?"+Uu+"+"+Hu,Dr+"+"+Wu,Dh,Mh,ku,qh].join("|"),"g"),Vh=RegExp("["+qu+Qn+Cu+Iu+"]"),$h=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Jh=-1,ce={};ce[po]=ce[_o]=ce[yo]=ce[vo]=ce[go]=ce[mo]=ce[wo]=ce[bo]=ce[xo]=!0,ce[Fr]=ce[Yn]=ce[pn]=ce[un]=ce[Mr]=ce[an]=ce[Kn]=ce[jn]=ce[gt]=ce[fn]=ce[Wt]=ce[cn]=ce[mt]=ce[ln]=ce[hn]=!1;var fe={};fe[Fr]=fe[Yn]=fe[pn]=fe[Mr]=fe[un]=fe[an]=fe[po]=fe[_o]=fe[yo]=fe[vo]=fe[go]=fe[gt]=fe[fn]=fe[Wt]=fe[cn]=fe[mt]=fe[ln]=fe[Zn]=fe[mo]=fe[wo]=fe[bo]=fe[xo]=!0,fe[Kn]=fe[jn]=fe[hn]=!1;var Yh={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Kh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},jh={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Zh={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Xh=parseFloat,Qh=parseInt,Gu=typeof global=="object"&&global&&global.Object===Object&&global,ep=typeof self=="object"&&self&&self.Object===Object&&self,Be=Gu||ep||Function("return this")(),No=typeof Zr=="object"&&Zr&&!Zr.nodeType&&Zr,br=No&&typeof Bn=="object"&&Bn&&!Bn.nodeType&&Bn,Ju=br&&br.exports===No,Ro=Ju&&Gu.process,at=function(){try{var m=br&&br.require&&br.require("util").types;return m||Ro&&Ro.binding&&Ro.binding("util")}catch{}}(),Yu=at&&at.isArrayBuffer,Ku=at&&at.isDate,ju=at&&at.isMap,Zu=at&&at.isRegExp,Xu=at&&at.isSet,Qu=at&&at.isTypedArray;function Qe(m,S,b){switch(b.length){case 0:return m.call(S);case 1:return m.call(S,b[0]);case 2:return m.call(S,b[0],b[1]);case 3:return m.call(S,b[0],b[1],b[2])}return m.apply(S,b)}u(Qe,"apply");function tp(m,S,b,k){for(var W=-1,ee=m==null?0:m.length;++W<ee;){var Ee=m[W];S(k,Ee,b(Ee),m)}return k}u(tp,"arrayAggregator");function ft(m,S){for(var b=-1,k=m==null?0:m.length;++b<k&&S(m[b],b,m)!==!1;);return m}u(ft,"arrayEach");function rp(m,S){for(var b=m==null?0:m.length;b--&&S(m[b],b,m)!==!1;);return m}u(rp,"arrayEachRight");function ea(m,S){for(var b=-1,k=m==null?0:m.length;++b<k;)if(!S(m[b],b,m))return!1;return!0}u(ea,"arrayEvery");function nr(m,S){for(var b=-1,k=m==null?0:m.length,W=0,ee=[];++b<k;){var Ee=m[b];S(Ee,b,m)&&(ee[W++]=Ee)}return ee}u(nr,"arrayFilter");function ti(m,S){var b=m==null?0:m.length;return!!b&&qr(m,S,0)>-1}u(ti,"arrayIncludes");function Io(m,S,b){for(var k=-1,W=m==null?0:m.length;++k<W;)if(b(S,m[k]))return!0;return!1}u(Io,"arrayIncludesWith");function he(m,S){for(var b=-1,k=m==null?0:m.length,W=Array(k);++b<k;)W[b]=S(m[b],b,m);return W}u(he,"arrayMap");function ir(m,S){for(var b=-1,k=S.length,W=m.length;++b<k;)m[W+b]=S[b];return m}u(ir,"arrayPush");function Po(m,S,b,k){var W=-1,ee=m==null?0:m.length;for(k&&ee&&(b=m[++W]);++W<ee;)b=S(b,m[W],W,m);return b}u(Po,"arrayReduce");function np(m,S,b,k){var W=m==null?0:m.length;for(k&&W&&(b=m[--W]);W--;)b=S(b,m[W],W,m);return b}u(np,"arrayReduceRight");function Lo(m,S){for(var b=-1,k=m==null?0:m.length;++b<k;)if(S(m[b],b,m))return!0;return!1}u(Lo,"arraySome");var ip=ko("length");function op(m){return m.split("")}u(op,"asciiToArray");function sp(m){return m.match(dh)||[]}u(sp,"asciiWords");function ta(m,S,b){var k;return b(m,function(W,ee,Ee){if(S(W,ee,Ee))return k=ee,!1}),k}u(ta,"baseFindKey");function ri(m,S,b,k){for(var W=m.length,ee=b+(k?1:-1);k?ee--:++ee<W;)if(S(m[ee],ee,m))return ee;return-1}u(ri,"baseFindIndex");function qr(m,S,b){return S===S?gp(m,S,b):ri(m,ra,b)}u(qr,"baseIndexOf");function up(m,S,b,k){for(var W=b-1,ee=m.length;++W<ee;)if(k(m[W],S))return W;return-1}u(up,"baseIndexOfWith");function ra(m){return m!==m}u(ra,"baseIsNaN");function na(m,S){var b=m==null?0:m.length;return b?Mo(m,S)/b:Jn}u(na,"baseMean");function ko(m){return function(S){return S==null?e:S[m]}}u(ko,"baseProperty");function Fo(m){return function(S){return m==null?e:m[S]}}u(Fo,"basePropertyOf");function ia(m,S,b,k,W){return W(m,function(ee,Ee,ae){b=k?(k=!1,ee):S(b,ee,Ee,ae)}),b}u(ia,"baseReduce");function ap(m,S){var b=m.length;for(m.sort(S);b--;)m[b]=m[b].value;return m}u(ap,"baseSortBy");function Mo(m,S){for(var b,k=-1,W=m.length;++k<W;){var ee=S(m[k]);ee!==e&&(b=b===e?ee:b+ee)}return b}u(Mo,"baseSum");function Do(m,S){for(var b=-1,k=Array(m);++b<m;)k[b]=S(b);return k}u(Do,"baseTimes");function fp(m,S){return he(S,function(b){return[b,m[b]]})}u(fp,"baseToPairs");function oa(m){return m&&m.slice(0,fa(m)+1).replace(So,"")}u(oa,"baseTrim");function et(m){return function(S){return m(S)}}u(et,"baseUnary");function qo(m,S){return he(S,function(b){return m[b]})}u(qo,"baseValues");function dn(m,S){return m.has(S)}u(dn,"cacheHas");function sa(m,S){for(var b=-1,k=m.length;++b<k&&qr(S,m[b],0)>-1;);return b}u(sa,"charsStartIndex");function ua(m,S){for(var b=m.length;b--&&qr(S,m[b],0)>-1;);return b}u(ua,"charsEndIndex");function cp(m,S){for(var b=m.length,k=0;b--;)m[b]===S&&++k;return k}u(cp,"countHolders");var lp=Fo(Yh),hp=Fo(Kh);function pp(m){return"\\"+Zh[m]}u(pp,"escapeStringChar");function dp(m,S){return m==null?e:m[S]}u(dp,"getValue");function Ur(m){return Vh.test(m)}u(Ur,"hasUnicode");function _p(m){return $h.test(m)}u(_p,"hasUnicodeWord");function yp(m){for(var S,b=[];!(S=m.next()).done;)b.push(S.value);return b}u(yp,"iteratorToArray");function Uo(m){var S=-1,b=Array(m.size);return m.forEach(function(k,W){b[++S]=[W,k]}),b}u(Uo,"mapToArray");function aa(m,S){return function(b){return m(S(b))}}u(aa,"overArg");function or(m,S){for(var b=-1,k=m.length,W=0,ee=[];++b<k;){var Ee=m[b];(Ee===S||Ee===v)&&(m[b]=v,ee[W++]=b)}return ee}u(or,"replaceHolders");function ni(m){var S=-1,b=Array(m.size);return m.forEach(function(k){b[++S]=k}),b}u(ni,"setToArray");function vp(m){var S=-1,b=Array(m.size);return m.forEach(function(k){b[++S]=[k,k]}),b}u(vp,"setToPairs");function gp(m,S,b){for(var k=b-1,W=m.length;++k<W;)if(m[k]===S)return k;return-1}u(gp,"strictIndexOf");function mp(m,S,b){for(var k=b+1;k--;)if(m[k]===S)return k;return k}u(mp,"strictLastIndexOf");function Hr(m){return Ur(m)?bp(m):ip(m)}u(Hr,"stringSize");function wt(m){return Ur(m)?xp(m):op(m)}u(wt,"stringToArray");function fa(m){for(var S=m.length;S--&&ch.test(m.charAt(S)););return S}u(fa,"trimmedEndIndex");var wp=Fo(jh);function bp(m){for(var S=Bo.lastIndex=0;Bo.test(m);)++S;return S}u(bp,"unicodeSize");function xp(m){return m.match(Bo)||[]}u(xp,"unicodeToArray");function Tp(m){return m.match(zh)||[]}u(Tp,"unicodeWords");var Sp=u(function m(S){S=S==null?Be:sr.defaults(Be.Object(),S,sr.pick(Be,Gh));var b=S.Array,k=S.Date,W=S.Error,ee=S.Function,Ee=S.Math,ae=S.Object,Ho=S.RegExp,Ep=S.String,ct=S.TypeError,ii=b.prototype,Ap=ee.prototype,Wr=ae.prototype,oi=S["__core-js_shared__"],si=Ap.toString,ne=Wr.hasOwnProperty,Op=0,ca=function(){var t=/[^.]+$/.exec(oi&&oi.keys&&oi.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ui=Wr.toString,Cp=si.call(ae),Bp=Be._,Np=Ho("^"+si.call(ne).replace(To,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ai=Ju?S.Buffer:e,ur=S.Symbol,fi=S.Uint8Array,la=ai?ai.allocUnsafe:e,ci=aa(ae.getPrototypeOf,ae),ha=ae.create,pa=Wr.propertyIsEnumerable,li=ii.splice,da=ur?ur.isConcatSpreadable:e,_n=ur?ur.iterator:e,xr=ur?ur.toStringTag:e,hi=function(){try{var t=Or(ae,"defineProperty");return t({},"",{}),t}catch{}}(),Rp=S.clearTimeout!==Be.clearTimeout&&S.clearTimeout,Ip=k&&k.now!==Be.Date.now&&k.now,Pp=S.setTimeout!==Be.setTimeout&&S.setTimeout,pi=Ee.ceil,di=Ee.floor,Wo=ae.getOwnPropertySymbols,Lp=ai?ai.isBuffer:e,_a=S.isFinite,kp=ii.join,Fp=aa(ae.keys,ae),Ae=Ee.max,Me=Ee.min,Mp=k.now,Dp=S.parseInt,ya=Ee.random,qp=ii.reverse,zo=Or(S,"DataView"),yn=Or(S,"Map"),Vo=Or(S,"Promise"),zr=Or(S,"Set"),vn=Or(S,"WeakMap"),gn=Or(ae,"create"),_i=vn&&new vn,Vr={},Up=Cr(zo),Hp=Cr(yn),Wp=Cr(Vo),zp=Cr(zr),Vp=Cr(vn),yi=ur?ur.prototype:e,mn=yi?yi.valueOf:e,va=yi?yi.toString:e;function p(t){if(ve(t)&&!z(t)&&!(t instanceof Z)){if(t instanceof lt)return t;if(ne.call(t,"__wrapped__"))return mf(t)}return new lt(t)}u(p,"lodash");var $r=function(){function t(){}return u(t,"object"),function(n){if(!de(n))return{};if(ha)return ha(n);t.prototype=n;var o=new t;return t.prototype=e,o}}();function vi(){}u(vi,"baseLodash");function lt(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=e}u(lt,"LodashWrapper"),p.templateSettings={escape:ih,evaluate:oh,interpolate:Au,variable:"",imports:{_:p}},p.prototype=vi.prototype,p.prototype.constructor=p,lt.prototype=$r(vi.prototype),lt.prototype.constructor=lt;function Z(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Nt,this.__views__=[]}u(Z,"LazyWrapper");function $p(){var t=new Z(this.__wrapped__);return t.__actions__=$e(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=$e(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=$e(this.__views__),t}u($p,"lazyClone");function Gp(){if(this.__filtered__){var t=new Z(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}u(Gp,"lazyReverse");function Jp(){var t=this.__wrapped__.value(),n=this.__dir__,o=z(t),f=n<0,l=o?t.length:0,d=o_(0,l,this.__views__),_=d.start,g=d.end,w=g-_,A=f?g:_-1,O=this.__iteratees__,R=O.length,P=0,F=Me(w,this.__takeCount__);if(!o||!f&&l==w&&F==w)return Ha(t,this.__actions__);var D=[];e:for(;w--&&P<F;){A+=n;for(var G=-1,q=t[A];++G<R;){var K=O[G],X=K.iteratee,nt=K.type,We=X(q);if(nt==Hl)q=We;else if(!We){if(nt==bu)continue e;break e}}D[P++]=q}return D}u(Jp,"lazyValue"),Z.prototype=$r(vi.prototype),Z.prototype.constructor=Z;function Tr(t){var n=-1,o=t==null?0:t.length;for(this.clear();++n<o;){var f=t[n];this.set(f[0],f[1])}}u(Tr,"Hash");function Yp(){this.__data__=gn?gn(null):{},this.size=0}u(Yp,"hashClear");function Kp(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}u(Kp,"hashDelete");function jp(t){var n=this.__data__;if(gn){var o=n[t];return o===h?e:o}return ne.call(n,t)?n[t]:e}u(jp,"hashGet");function Zp(t){var n=this.__data__;return gn?n[t]!==e:ne.call(n,t)}u(Zp,"hashHas");function Xp(t,n){var o=this.__data__;return this.size+=this.has(t)?0:1,o[t]=gn&&n===e?h:n,this}u(Xp,"hashSet"),Tr.prototype.clear=Yp,Tr.prototype.delete=Kp,Tr.prototype.get=jp,Tr.prototype.has=Zp,Tr.prototype.set=Xp;function zt(t){var n=-1,o=t==null?0:t.length;for(this.clear();++n<o;){var f=t[n];this.set(f[0],f[1])}}u(zt,"ListCache");function Qp(){this.__data__=[],this.size=0}u(Qp,"listCacheClear");function ed(t){var n=this.__data__,o=gi(n,t);if(o<0)return!1;var f=n.length-1;return o==f?n.pop():li.call(n,o,1),--this.size,!0}u(ed,"listCacheDelete");function td(t){var n=this.__data__,o=gi(n,t);return o<0?e:n[o][1]}u(td,"listCacheGet");function rd(t){return gi(this.__data__,t)>-1}u(rd,"listCacheHas");function nd(t,n){var o=this.__data__,f=gi(o,t);return f<0?(++this.size,o.push([t,n])):o[f][1]=n,this}u(nd,"listCacheSet"),zt.prototype.clear=Qp,zt.prototype.delete=ed,zt.prototype.get=td,zt.prototype.has=rd,zt.prototype.set=nd;function Vt(t){var n=-1,o=t==null?0:t.length;for(this.clear();++n<o;){var f=t[n];this.set(f[0],f[1])}}u(Vt,"MapCache");function id(){this.size=0,this.__data__={hash:new Tr,map:new(yn||zt),string:new Tr}}u(id,"mapCacheClear");function od(t){var n=Ni(this,t).delete(t);return this.size-=n?1:0,n}u(od,"mapCacheDelete");function sd(t){return Ni(this,t).get(t)}u(sd,"mapCacheGet");function ud(t){return Ni(this,t).has(t)}u(ud,"mapCacheHas");function ad(t,n){var o=Ni(this,t),f=o.size;return o.set(t,n),this.size+=o.size==f?0:1,this}u(ad,"mapCacheSet"),Vt.prototype.clear=id,Vt.prototype.delete=od,Vt.prototype.get=sd,Vt.prototype.has=ud,Vt.prototype.set=ad;function Sr(t){var n=-1,o=t==null?0:t.length;for(this.__data__=new Vt;++n<o;)this.add(t[n])}u(Sr,"SetCache");function fd(t){return this.__data__.set(t,h),this}u(fd,"setCacheAdd");function cd(t){return this.__data__.has(t)}u(cd,"setCacheHas"),Sr.prototype.add=Sr.prototype.push=fd,Sr.prototype.has=cd;function bt(t){var n=this.__data__=new zt(t);this.size=n.size}u(bt,"Stack");function ld(){this.__data__=new zt,this.size=0}u(ld,"stackClear");function hd(t){var n=this.__data__,o=n.delete(t);return this.size=n.size,o}u(hd,"stackDelete");function pd(t){return this.__data__.get(t)}u(pd,"stackGet");function dd(t){return this.__data__.has(t)}u(dd,"stackHas");function _d(t,n){var o=this.__data__;if(o instanceof zt){var f=o.__data__;if(!yn||f.length<i-1)return f.push([t,n]),this.size=++o.size,this;o=this.__data__=new Vt(f)}return o.set(t,n),this.size=o.size,this}u(_d,"stackSet"),bt.prototype.clear=ld,bt.prototype.delete=hd,bt.prototype.get=pd,bt.prototype.has=dd,bt.prototype.set=_d;function ga(t,n){var o=z(t),f=!o&&Br(t),l=!o&&!f&&hr(t),d=!o&&!f&&!l&&Kr(t),_=o||f||l||d,g=_?Do(t.length,Ep):[],w=g.length;for(var A in t)(n||ne.call(t,A))&&!(_&&(A=="length"||l&&(A=="offset"||A=="parent")||d&&(A=="buffer"||A=="byteLength"||A=="byteOffset")||Yt(A,w)))&&g.push(A);return g}u(ga,"arrayLikeKeys");function ma(t){var n=t.length;return n?t[ts(0,n-1)]:e}u(ma,"arraySample");function yd(t,n){return Ri($e(t),Er(n,0,t.length))}u(yd,"arraySampleSize");function vd(t){return Ri($e(t))}u(vd,"arrayShuffle");function $o(t,n,o){(o!==e&&!xt(t[n],o)||o===e&&!(n in t))&&$t(t,n,o)}u($o,"assignMergeValue");function wn(t,n,o){var f=t[n];(!(ne.call(t,n)&&xt(f,o))||o===e&&!(n in t))&&$t(t,n,o)}u(wn,"assignValue");function gi(t,n){for(var o=t.length;o--;)if(xt(t[o][0],n))return o;return-1}u(gi,"assocIndexOf");function gd(t,n,o,f){return ar(t,function(l,d,_){n(f,l,o(l),_)}),f}u(gd,"baseAggregator");function wa(t,n){return t&&It(n,Ne(n),t)}u(wa,"baseAssign");function md(t,n){return t&&It(n,Je(n),t)}u(md,"baseAssignIn");function $t(t,n,o){n=="__proto__"&&hi?hi(t,n,{configurable:!0,enumerable:!0,value:o,writable:!0}):t[n]=o}u($t,"baseAssignValue");function Go(t,n){for(var o=-1,f=n.length,l=b(f),d=t==null;++o<f;)l[o]=d?e:As(t,n[o]);return l}u(Go,"baseAt");function Er(t,n,o){return t===t&&(o!==e&&(t=t<=o?t:o),n!==e&&(t=t>=n?t:n)),t}u(Er,"baseClamp");function ht(t,n,o,f,l,d){var _,g=n&x,w=n&T,A=n&E;if(o&&(_=l?o(t,f,l,d):o(t)),_!==e)return _;if(!de(t))return t;var O=z(t);if(O){if(_=u_(t),!g)return $e(t,_)}else{var R=De(t),P=R==jn||R==xu;if(hr(t))return Va(t,g);if(R==Wt||R==Fr||P&&!l){if(_=w||P?{}:cf(t),!g)return w?jd(t,md(_,t)):Kd(t,wa(_,t))}else{if(!fe[R])return l?t:{};_=a_(t,R,g)}}d||(d=new bt);var F=d.get(t);if(F)return F;d.set(t,_),qf(t)?t.forEach(function(q){_.add(ht(q,n,o,q,t,d))}):Mf(t)&&t.forEach(function(q,K){_.set(K,ht(q,n,o,K,t,d))});var D=A?w?hs:ls:w?Je:Ne,G=O?e:D(t);return ft(G||t,function(q,K){G&&(K=q,q=t[K]),wn(_,K,ht(q,n,o,K,t,d))}),_}u(ht,"baseClone");function wd(t){var n=Ne(t);return function(o){return ba(o,t,n)}}u(wd,"baseConforms");function ba(t,n,o){var f=o.length;if(t==null)return!f;for(t=ae(t);f--;){var l=o[f],d=n[l],_=t[l];if(_===e&&!(l in t)||!d(_))return!1}return!0}u(ba,"baseConformsTo");function xa(t,n,o){if(typeof t!="function")throw new ct(a);return On(function(){t.apply(e,o)},n)}u(xa,"baseDelay");function bn(t,n,o,f){var l=-1,d=ti,_=!0,g=t.length,w=[],A=n.length;if(!g)return w;o&&(n=he(n,et(o))),f?(d=Io,_=!1):n.length>=i&&(d=dn,_=!1,n=new Sr(n));e:for(;++l<g;){var O=t[l],R=o==null?O:o(O);if(O=f||O!==0?O:0,_&&R===R){for(var P=A;P--;)if(n[P]===R)continue e;w.push(O)}else d(n,R,f)||w.push(O)}return w}u(bn,"baseDifference");var ar=Ka(Rt),Ta=Ka(Yo,!0);function bd(t,n){var o=!0;return ar(t,function(f,l,d){return o=!!n(f,l,d),o}),o}u(bd,"baseEvery");function mi(t,n,o){for(var f=-1,l=t.length;++f<l;){var d=t[f],_=n(d);if(_!=null&&(g===e?_===_&&!rt(_):o(_,g)))var g=_,w=d}return w}u(mi,"baseExtremum");function xd(t,n,o,f){var l=t.length;for(o=$(o),o<0&&(o=-o>l?0:l+o),f=f===e||f>l?l:$(f),f<0&&(f+=l),f=o>f?0:Hf(f);o<f;)t[o++]=n;return t}u(xd,"baseFill");function Sa(t,n){var o=[];return ar(t,function(f,l,d){n(f,l,d)&&o.push(f)}),o}u(Sa,"baseFilter");function Pe(t,n,o,f,l){var d=-1,_=t.length;for(o||(o=c_),l||(l=[]);++d<_;){var g=t[d];n>0&&o(g)?n>1?Pe(g,n-1,o,f,l):ir(l,g):f||(l[l.length]=g)}return l}u(Pe,"baseFlatten");var Jo=ja(),Ea=ja(!0);function Rt(t,n){return t&&Jo(t,n,Ne)}u(Rt,"baseForOwn");function Yo(t,n){return t&&Ea(t,n,Ne)}u(Yo,"baseForOwnRight");function wi(t,n){return nr(n,function(o){return Kt(t[o])})}u(wi,"baseFunctions");function Ar(t,n){n=cr(n,t);for(var o=0,f=n.length;t!=null&&o<f;)t=t[Pt(n[o++])];return o&&o==f?t:e}u(Ar,"baseGet");function Aa(t,n,o){var f=n(t);return z(t)?f:ir(f,o(t))}u(Aa,"baseGetAllKeys");function Ue(t){return t==null?t===e?Zl:Kl:xr&&xr in ae(t)?i_(t):v_(t)}u(Ue,"baseGetTag");function Ko(t,n){return t>n}u(Ko,"baseGt");function Td(t,n){return t!=null&&ne.call(t,n)}u(Td,"baseHas");function Sd(t,n){return t!=null&&n in ae(t)}u(Sd,"baseHasIn");function Ed(t,n,o){return t>=Me(n,o)&&t<Ae(n,o)}u(Ed,"baseInRange");function jo(t,n,o){for(var f=o?Io:ti,l=t[0].length,d=t.length,_=d,g=b(d),w=1/0,A=[];_--;){var O=t[_];_&&n&&(O=he(O,et(n))),w=Me(O.length,w),g[_]=!o&&(n||l>=120&&O.length>=120)?new Sr(_&&O):e}O=t[0];var R=-1,P=g[0];e:for(;++R<l&&A.length<w;){var F=O[R],D=n?n(F):F;if(F=o||F!==0?F:0,!(P?dn(P,D):f(A,D,o))){for(_=d;--_;){var G=g[_];if(!(G?dn(G,D):f(t[_],D,o)))continue e}P&&P.push(D),A.push(F)}}return A}u(jo,"baseIntersection");function Ad(t,n,o,f){return Rt(t,function(l,d,_){n(f,o(l),d,_)}),f}u(Ad,"baseInverter");function xn(t,n,o){n=cr(n,t),t=df(t,n);var f=t==null?t:t[Pt(dt(n))];return f==null?e:Qe(f,t,o)}u(xn,"baseInvoke");function Oa(t){return ve(t)&&Ue(t)==Fr}u(Oa,"baseIsArguments");function Od(t){return ve(t)&&Ue(t)==pn}u(Od,"baseIsArrayBuffer");function Cd(t){return ve(t)&&Ue(t)==an}u(Cd,"baseIsDate");function Tn(t,n,o,f,l){return t===n?!0:t==null||n==null||!ve(t)&&!ve(n)?t!==t&&n!==n:Bd(t,n,o,f,Tn,l)}u(Tn,"baseIsEqual");function Bd(t,n,o,f,l,d){var _=z(t),g=z(n),w=_?Yn:De(t),A=g?Yn:De(n);w=w==Fr?Wt:w,A=A==Fr?Wt:A;var O=w==Wt,R=A==Wt,P=w==A;if(P&&hr(t)){if(!hr(n))return!1;_=!0,O=!1}if(P&&!O)return d||(d=new bt),_||Kr(t)?uf(t,n,o,f,l,d):r_(t,n,w,o,f,l,d);if(!(o&B)){var F=O&&ne.call(t,"__wrapped__"),D=R&&ne.call(n,"__wrapped__");if(F||D){var G=F?t.value():t,q=D?n.value():n;return d||(d=new bt),l(G,q,o,f,d)}}return P?(d||(d=new bt),n_(t,n,o,f,l,d)):!1}u(Bd,"baseIsEqualDeep");function Nd(t){return ve(t)&&De(t)==gt}u(Nd,"baseIsMap");function Zo(t,n,o,f){var l=o.length,d=l,_=!f;if(t==null)return!d;for(t=ae(t);l--;){var g=o[l];if(_&&g[2]?g[1]!==t[g[0]]:!(g[0]in t))return!1}for(;++l<d;){g=o[l];var w=g[0],A=t[w],O=g[1];if(_&&g[2]){if(A===e&&!(w in t))return!1}else{var R=new bt;if(f)var P=f(A,O,w,t,n,R);if(!(P===e?Tn(O,A,B|N,f,R):P))return!1}}return!0}u(Zo,"baseIsMatch");function Ca(t){if(!de(t)||h_(t))return!1;var n=Kt(t)?Np:wh;return n.test(Cr(t))}u(Ca,"baseIsNative");function Rd(t){return ve(t)&&Ue(t)==cn}u(Rd,"baseIsRegExp");function Id(t){return ve(t)&&De(t)==mt}u(Id,"baseIsSet");function Pd(t){return ve(t)&&Mi(t.length)&&!!ce[Ue(t)]}u(Pd,"baseIsTypedArray");function Ba(t){return typeof t=="function"?t:t==null?Ye:typeof t=="object"?z(t)?Ia(t[0],t[1]):Ra(t):Xf(t)}u(Ba,"baseIteratee");function Xo(t){if(!An(t))return Fp(t);var n=[];for(var o in ae(t))ne.call(t,o)&&o!="constructor"&&n.push(o);return n}u(Xo,"baseKeys");function Ld(t){if(!de(t))return y_(t);var n=An(t),o=[];for(var f in t)f=="constructor"&&(n||!ne.call(t,f))||o.push(f);return o}u(Ld,"baseKeysIn");function Qo(t,n){return t<n}u(Qo,"baseLt");function Na(t,n){var o=-1,f=Ge(t)?b(t.length):[];return ar(t,function(l,d,_){f[++o]=n(l,d,_)}),f}u(Na,"baseMap");function Ra(t){var n=ds(t);return n.length==1&&n[0][2]?hf(n[0][0],n[0][1]):function(o){return o===t||Zo(o,t,n)}}u(Ra,"baseMatches");function Ia(t,n){return ys(t)&&lf(n)?hf(Pt(t),n):function(o){var f=As(o,t);return f===e&&f===n?Os(o,t):Tn(n,f,B|N)}}u(Ia,"baseMatchesProperty");function bi(t,n,o,f,l){t!==n&&Jo(n,function(d,_){if(l||(l=new bt),de(d))kd(t,n,_,o,bi,f,l);else{var g=f?f(gs(t,_),d,_+"",t,n,l):e;g===e&&(g=d),$o(t,_,g)}},Je)}u(bi,"baseMerge");function kd(t,n,o,f,l,d,_){var g=gs(t,o),w=gs(n,o),A=_.get(w);if(A){$o(t,o,A);return}var O=d?d(g,w,o+"",t,n,_):e,R=O===e;if(R){var P=z(w),F=!P&&hr(w),D=!P&&!F&&Kr(w);O=w,P||F||D?z(g)?O=g:be(g)?O=$e(g):F?(R=!1,O=Va(w,!0)):D?(R=!1,O=$a(w,!0)):O=[]:Cn(w)||Br(w)?(O=g,Br(g)?O=Wf(g):(!de(g)||Kt(g))&&(O=cf(w))):R=!1}R&&(_.set(w,O),l(O,w,f,d,_),_.delete(w)),$o(t,o,O)}u(kd,"baseMergeDeep");function Pa(t,n){var o=t.length;if(o)return n+=n<0?o:0,Yt(n,o)?t[n]:e}u(Pa,"baseNth");function La(t,n,o){n.length?n=he(n,function(d){return z(d)?function(_){return Ar(_,d.length===1?d[0]:d)}:d}):n=[Ye];var f=-1;n=he(n,et(M()));var l=Na(t,function(d,_,g){var w=he(n,function(A){return A(d)});return{criteria:w,index:++f,value:d}});return ap(l,function(d,_){return Yd(d,_,o)})}u(La,"baseOrderBy");function Fd(t,n){return ka(t,n,function(o,f){return Os(t,f)})}u(Fd,"basePick");function ka(t,n,o){for(var f=-1,l=n.length,d={};++f<l;){var _=n[f],g=Ar(t,_);o(g,_)&&Sn(d,cr(_,t),g)}return d}u(ka,"basePickBy");function Md(t){return function(n){return Ar(n,t)}}u(Md,"basePropertyDeep");function es(t,n,o,f){var l=f?up:qr,d=-1,_=n.length,g=t;for(t===n&&(n=$e(n)),o&&(g=he(t,et(o)));++d<_;)for(var w=0,A=n[d],O=o?o(A):A;(w=l(g,O,w,f))>-1;)g!==t&&li.call(g,w,1),li.call(t,w,1);return t}u(es,"basePullAll");function Fa(t,n){for(var o=t?n.length:0,f=o-1;o--;){var l=n[o];if(o==f||l!==d){var d=l;Yt(l)?li.call(t,l,1):is(t,l)}}return t}u(Fa,"basePullAt");function ts(t,n){return t+di(ya()*(n-t+1))}u(ts,"baseRandom");function Dd(t,n,o,f){for(var l=-1,d=Ae(pi((n-t)/(o||1)),0),_=b(d);d--;)_[f?d:++l]=t,t+=o;return _}u(Dd,"baseRange");function rs(t,n){var o="";if(!t||n<1||n>rr)return o;do n%2&&(o+=t),n=di(n/2),n&&(t+=t);while(n);return o}u(rs,"baseRepeat");function J(t,n){return ms(pf(t,n,Ye),t+"")}u(J,"baseRest");function qd(t){return ma(jr(t))}u(qd,"baseSample");function Ud(t,n){var o=jr(t);return Ri(o,Er(n,0,o.length))}u(Ud,"baseSampleSize");function Sn(t,n,o,f){if(!de(t))return t;n=cr(n,t);for(var l=-1,d=n.length,_=d-1,g=t;g!=null&&++l<d;){var w=Pt(n[l]),A=o;if(w==="__proto__"||w==="constructor"||w==="prototype")return t;if(l!=_){var O=g[w];A=f?f(O,w,g):e,A===e&&(A=de(O)?O:Yt(n[l+1])?[]:{})}wn(g,w,A),g=g[w]}return t}u(Sn,"baseSet");var Ma=_i?function(t,n){return _i.set(t,n),t}:Ye,Hd=hi?function(t,n){return hi(t,"toString",{configurable:!0,enumerable:!1,value:Bs(n),writable:!0})}:Ye;function Wd(t){return Ri(jr(t))}u(Wd,"baseShuffle");function pt(t,n,o){var f=-1,l=t.length;n<0&&(n=-n>l?0:l+n),o=o>l?l:o,o<0&&(o+=l),l=n>o?0:o-n>>>0,n>>>=0;for(var d=b(l);++f<l;)d[f]=t[f+n];return d}u(pt,"baseSlice");function zd(t,n){var o;return ar(t,function(f,l,d){return o=n(f,l,d),!o}),!!o}u(zd,"baseSome");function xi(t,n,o){var f=0,l=t==null?f:t.length;if(typeof n=="number"&&n===n&&l<=$l){for(;f<l;){var d=f+l>>>1,_=t[d];_!==null&&!rt(_)&&(o?_<=n:_<n)?f=d+1:l=d}return l}return ns(t,n,Ye,o)}u(xi,"baseSortedIndex");function ns(t,n,o,f){var l=0,d=t==null?0:t.length;if(d===0)return 0;n=o(n);for(var _=n!==n,g=n===null,w=rt(n),A=n===e;l<d;){var O=di((l+d)/2),R=o(t[O]),P=R!==e,F=R===null,D=R===R,G=rt(R);if(_)var q=f||D;else A?q=D&&(f||P):g?q=D&&P&&(f||!F):w?q=D&&P&&!F&&(f||!G):F||G?q=!1:q=f?R<=n:R<n;q?l=O+1:d=O}return Me(d,Vl)}u(ns,"baseSortedIndexBy");function Da(t,n){for(var o=-1,f=t.length,l=0,d=[];++o<f;){var _=t[o],g=n?n(_):_;if(!o||!xt(g,w)){var w=g;d[l++]=_===0?0:_}}return d}u(Da,"baseSortedUniq");function qa(t){return typeof t=="number"?t:rt(t)?Jn:+t}u(qa,"baseToNumber");function tt(t){if(typeof t=="string")return t;if(z(t))return he(t,tt)+"";if(rt(t))return va?va.call(t):"";var n=t+"";return n=="0"&&1/t==-wr?"-0":n}u(tt,"baseToString");function fr(t,n,o){var f=-1,l=ti,d=t.length,_=!0,g=[],w=g;if(o)_=!1,l=Io;else if(d>=i){var A=n?null:e_(t);if(A)return ni(A);_=!1,l=dn,w=new Sr}else w=n?[]:g;e:for(;++f<d;){var O=t[f],R=n?n(O):O;if(O=o||O!==0?O:0,_&&R===R){for(var P=w.length;P--;)if(w[P]===R)continue e;n&&w.push(R),g.push(O)}else l(w,R,o)||(w!==g&&w.push(R),g.push(O))}return g}u(fr,"baseUniq");function is(t,n){return n=cr(n,t),t=df(t,n),t==null||delete t[Pt(dt(n))]}u(is,"baseUnset");function Ua(t,n,o,f){return Sn(t,n,o(Ar(t,n)),f)}u(Ua,"baseUpdate");function Ti(t,n,o,f){for(var l=t.length,d=f?l:-1;(f?d--:++d<l)&&n(t[d],d,t););return o?pt(t,f?0:d,f?d+1:l):pt(t,f?d+1:0,f?l:d)}u(Ti,"baseWhile");function Ha(t,n){var o=t;return o instanceof Z&&(o=o.value()),Po(n,function(f,l){return l.func.apply(l.thisArg,ir([f],l.args))},o)}u(Ha,"baseWrapperValue");function os(t,n,o){var f=t.length;if(f<2)return f?fr(t[0]):[];for(var l=-1,d=b(f);++l<f;)for(var _=t[l],g=-1;++g<f;)g!=l&&(d[l]=bn(d[l]||_,t[g],n,o));return fr(Pe(d,1),n,o)}u(os,"baseXor");function Wa(t,n,o){for(var f=-1,l=t.length,d=n.length,_={};++f<l;){var g=f<d?n[f]:e;o(_,t[f],g)}return _}u(Wa,"baseZipObject");function ss(t){return be(t)?t:[]}u(ss,"castArrayLikeObject");function us(t){return typeof t=="function"?t:Ye}u(us,"castFunction");function cr(t,n){return z(t)?t:ys(t,n)?[t]:gf(re(t))}u(cr,"castPath");var Vd=J;function lr(t,n,o){var f=t.length;return o=o===e?f:o,!n&&o>=f?t:pt(t,n,o)}u(lr,"castSlice");var za=Rp||function(t){return Be.clearTimeout(t)};function Va(t,n){if(n)return t.slice();var o=t.length,f=la?la(o):new t.constructor(o);return t.copy(f),f}u(Va,"cloneBuffer");function as(t){var n=new t.constructor(t.byteLength);return new fi(n).set(new fi(t)),n}u(as,"cloneArrayBuffer");function $d(t,n){var o=n?as(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.byteLength)}u($d,"cloneDataView");function Gd(t){var n=new t.constructor(t.source,Ou.exec(t));return n.lastIndex=t.lastIndex,n}u(Gd,"cloneRegExp");function Jd(t){return mn?ae(mn.call(t)):{}}u(Jd,"cloneSymbol");function $a(t,n){var o=n?as(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.length)}u($a,"cloneTypedArray");function Ga(t,n){if(t!==n){var o=t!==e,f=t===null,l=t===t,d=rt(t),_=n!==e,g=n===null,w=n===n,A=rt(n);if(!g&&!A&&!d&&t>n||d&&_&&w&&!g&&!A||f&&_&&w||!o&&w||!l)return 1;if(!f&&!d&&!A&&t<n||A&&o&&l&&!f&&!d||g&&o&&l||!_&&l||!w)return-1}return 0}u(Ga,"compareAscending");function Yd(t,n,o){for(var f=-1,l=t.criteria,d=n.criteria,_=l.length,g=o.length;++f<_;){var w=Ga(l[f],d[f]);if(w){if(f>=g)return w;var A=o[f];return w*(A=="desc"?-1:1)}}return t.index-n.index}u(Yd,"compareMultiple");function Ja(t,n,o,f){for(var l=-1,d=t.length,_=o.length,g=-1,w=n.length,A=Ae(d-_,0),O=b(w+A),R=!f;++g<w;)O[g]=n[g];for(;++l<_;)(R||l<d)&&(O[o[l]]=t[l]);for(;A--;)O[g++]=t[l++];return O}u(Ja,"composeArgs");function Ya(t,n,o,f){for(var l=-1,d=t.length,_=-1,g=o.length,w=-1,A=n.length,O=Ae(d-g,0),R=b(O+A),P=!f;++l<O;)R[l]=t[l];for(var F=l;++w<A;)R[F+w]=n[w];for(;++_<g;)(P||l<d)&&(R[F+o[_]]=t[l++]);return R}u(Ya,"composeArgsRight");function $e(t,n){var o=-1,f=t.length;for(n||(n=b(f));++o<f;)n[o]=t[o];return n}u($e,"copyArray");function It(t,n,o,f){var l=!o;o||(o={});for(var d=-1,_=n.length;++d<_;){var g=n[d],w=f?f(o[g],t[g],g,o,t):e;w===e&&(w=t[g]),l?$t(o,g,w):wn(o,g,w)}return o}u(It,"copyObject");function Kd(t,n){return It(t,_s(t),n)}u(Kd,"copySymbols");function jd(t,n){return It(t,af(t),n)}u(jd,"copySymbolsIn");function Si(t,n){return function(o,f){var l=z(o)?tp:gd,d=n?n():{};return l(o,t,M(f,2),d)}}u(Si,"createAggregator");function Gr(t){return J(function(n,o){var f=-1,l=o.length,d=l>1?o[l-1]:e,_=l>2?o[2]:e;for(d=t.length>3&&typeof d=="function"?(l--,d):e,_&&He(o[0],o[1],_)&&(d=l<3?e:d,l=1),n=ae(n);++f<l;){var g=o[f];g&&t(n,g,f,d)}return n})}u(Gr,"createAssigner");function Ka(t,n){return function(o,f){if(o==null)return o;if(!Ge(o))return t(o,f);for(var l=o.length,d=n?l:-1,_=ae(o);(n?d--:++d<l)&&f(_[d],d,_)!==!1;);return o}}u(Ka,"createBaseEach");function ja(t){return function(n,o,f){for(var l=-1,d=ae(n),_=f(n),g=_.length;g--;){var w=_[t?g:++l];if(o(d[w],w,d)===!1)break}return n}}u(ja,"createBaseFor");function Zd(t,n,o){var f=n&I,l=En(t);function d(){var _=this&&this!==Be&&this instanceof d?l:t;return _.apply(f?o:this,arguments)}return u(d,"wrapper"),d}u(Zd,"createBind");function Za(t){return function(n){n=re(n);var o=Ur(n)?wt(n):e,f=o?o[0]:n.charAt(0),l=o?lr(o,1).join(""):n.slice(1);return f[t]()+l}}u(Za,"createCaseFirst");function Jr(t){return function(n){return Po(jf(Kf(n).replace(Hh,"")),t,"")}}u(Jr,"createCompounder");function En(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var o=$r(t.prototype),f=t.apply(o,n);return de(f)?f:o}}u(En,"createCtor");function Xd(t,n,o){var f=En(t);function l(){for(var d=arguments.length,_=b(d),g=d,w=Yr(l);g--;)_[g]=arguments[g];var A=d<3&&_[0]!==w&&_[d-1]!==w?[]:or(_,w);if(d-=A.length,d<o)return rf(t,n,Ei,l.placeholder,e,_,A,e,e,o-d);var O=this&&this!==Be&&this instanceof l?f:t;return Qe(O,this,_)}return u(l,"wrapper"),l}u(Xd,"createCurry");function Xa(t){return function(n,o,f){var l=ae(n);if(!Ge(n)){var d=M(o,3);n=Ne(n),o=u(function(g){return d(l[g],g,l)},"predicate")}var _=t(n,o,f);return _>-1?l[d?n[_]:_]:e}}u(Xa,"createFind");function Qa(t){return Jt(function(n){var o=n.length,f=o,l=lt.prototype.thru;for(t&&n.reverse();f--;){var d=n[f];if(typeof d!="function")throw new ct(a);if(l&&!_&&Bi(d)=="wrapper")var _=new lt([],!0)}for(f=_?f:o;++f<o;){d=n[f];var g=Bi(d),w=g=="wrapper"?ps(d):e;w&&vs(w[0])&&w[1]==(Se|H|j|Fe)&&!w[4].length&&w[9]==1?_=_[Bi(w[0])].apply(_,w[3]):_=d.length==1&&vs(d)?_[g]():_.thru(d)}return function(){var A=arguments,O=A[0];if(_&&A.length==1&&z(O))return _.plant(O).value();for(var R=0,P=o?n[R].apply(this,A):O;++R<o;)P=n[R].call(this,P);return P}})}u(Qa,"createFlow");function Ei(t,n,o,f,l,d,_,g,w,A){var O=n&Se,R=n&I,P=n&L,F=n&(H|se),D=n&Bt,G=P?e:En(t);function q(){for(var K=arguments.length,X=b(K),nt=K;nt--;)X[nt]=arguments[nt];if(F)var We=Yr(q),it=cp(X,We);if(f&&(X=Ja(X,f,l,F)),d&&(X=Ya(X,d,_,F)),K-=it,F&&K<A){var xe=or(X,We);return rf(t,n,Ei,q.placeholder,o,X,xe,g,w,A-K)}var Tt=R?o:this,Zt=P?Tt[t]:t;return K=X.length,g?X=g_(X,g):D&&K>1&&X.reverse(),O&&w<K&&(X.length=w),this&&this!==Be&&this instanceof q&&(Zt=G||En(Zt)),Zt.apply(Tt,X)}return u(q,"wrapper"),q}u(Ei,"createHybrid");function ef(t,n){return function(o,f){return Ad(o,t,n(f),{})}}u(ef,"createInverter");function Ai(t,n){return function(o,f){var l;if(o===e&&f===e)return n;if(o!==e&&(l=o),f!==e){if(l===e)return f;typeof o=="string"||typeof f=="string"?(o=tt(o),f=tt(f)):(o=qa(o),f=qa(f)),l=t(o,f)}return l}}u(Ai,"createMathOperation");function fs(t){return Jt(function(n){return n=he(n,et(M())),J(function(o){var f=this;return t(n,function(l){return Qe(l,f,o)})})})}u(fs,"createOver");function Oi(t,n){n=n===e?" ":tt(n);var o=n.length;if(o<2)return o?rs(n,t):n;var f=rs(n,pi(t/Hr(n)));return Ur(n)?lr(wt(f),0,t).join(""):f.slice(0,t)}u(Oi,"createPadding");function Qd(t,n,o,f){var l=n&I,d=En(t);function _(){for(var g=-1,w=arguments.length,A=-1,O=f.length,R=b(O+w),P=this&&this!==Be&&this instanceof _?d:t;++A<O;)R[A]=f[A];for(;w--;)R[A++]=arguments[++g];return Qe(P,l?o:this,R)}return u(_,"wrapper"),_}u(Qd,"createPartial");function tf(t){return function(n,o,f){return f&&typeof f!="number"&&He(n,o,f)&&(o=f=e),n=jt(n),o===e?(o=n,n=0):o=jt(o),f=f===e?n<o?1:-1:jt(f),Dd(n,o,f,t)}}u(tf,"createRange");function Ci(t){return function(n,o){return typeof n=="string"&&typeof o=="string"||(n=_t(n),o=_t(o)),t(n,o)}}u(Ci,"createRelationalOperation");function rf(t,n,o,f,l,d,_,g,w,A){var O=n&H,R=O?_:e,P=O?e:_,F=O?d:e,D=O?e:d;n|=O?j:pe,n&=~(O?pe:j),n&U||(n&=~(I|L));var G=[t,n,l,F,R,D,P,g,w,A],q=o.apply(e,G);return vs(t)&&_f(q,G),q.placeholder=f,yf(q,t,n)}u(rf,"createRecurry");function cs(t){var n=Ee[t];return function(o,f){if(o=_t(o),f=f==null?0:Me($(f),292),f&&_a(o)){var l=(re(o)+"e").split("e"),d=n(l[0]+"e"+(+l[1]+f));return l=(re(d)+"e").split("e"),+(l[0]+"e"+(+l[1]-f))}return n(o)}}u(cs,"createRound");var e_=zr&&1/ni(new zr([,-0]))[1]==wr?function(t){return new zr(t)}:Is;function nf(t){return function(n){var o=De(n);return o==gt?Uo(n):o==mt?vp(n):fp(n,t(n))}}u(nf,"createToPairs");function Gt(t,n,o,f,l,d,_,g){var w=n&L;if(!w&&typeof t!="function")throw new ct(a);var A=f?f.length:0;if(A||(n&=~(j|pe),f=l=e),_=_===e?_:Ae($(_),0),g=g===e?g:$(g),A-=l?l.length:0,n&pe){var O=f,R=l;f=l=e}var P=w?e:ps(t),F=[t,n,o,f,l,O,R,d,_,g];if(P&&__(F,P),t=F[0],n=F[1],o=F[2],f=F[3],l=F[4],g=F[9]=F[9]===e?w?0:t.length:Ae(F[9]-A,0),!g&&n&(H|se)&&(n&=~(H|se)),!n||n==I)var D=Zd(t,n,o);else n==H||n==se?D=Xd(t,n,g):(n==j||n==(I|j))&&!l.length?D=Qd(t,n,o,f):D=Ei.apply(e,F);var G=P?Ma:_f;return yf(G(D,F),t,n)}u(Gt,"createWrap");function of(t,n,o,f){return t===e||xt(t,Wr[o])&&!ne.call(f,o)?n:t}u(of,"customDefaultsAssignIn");function sf(t,n,o,f,l,d){return de(t)&&de(n)&&(d.set(n,t),bi(t,n,e,sf,d),d.delete(n)),t}u(sf,"customDefaultsMerge");function t_(t){return Cn(t)?e:t}u(t_,"customOmitClone");function uf(t,n,o,f,l,d){var _=o&B,g=t.length,w=n.length;if(g!=w&&!(_&&w>g))return!1;var A=d.get(t),O=d.get(n);if(A&&O)return A==n&&O==t;var R=-1,P=!0,F=o&N?new Sr:e;for(d.set(t,n),d.set(n,t);++R<g;){var D=t[R],G=n[R];if(f)var q=_?f(G,D,R,n,t,d):f(D,G,R,t,n,d);if(q!==e){if(q)continue;P=!1;break}if(F){if(!Lo(n,function(K,X){if(!dn(F,X)&&(D===K||l(D,K,o,f,d)))return F.push(X)})){P=!1;break}}else if(!(D===G||l(D,G,o,f,d))){P=!1;break}}return d.delete(t),d.delete(n),P}u(uf,"equalArrays");function r_(t,n,o,f,l,d,_){switch(o){case Mr:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case pn:return!(t.byteLength!=n.byteLength||!d(new fi(t),new fi(n)));case un:case an:case fn:return xt(+t,+n);case Kn:return t.name==n.name&&t.message==n.message;case cn:case ln:return t==n+"";case gt:var g=Uo;case mt:var w=f&B;if(g||(g=ni),t.size!=n.size&&!w)return!1;var A=_.get(t);if(A)return A==n;f|=N,_.set(t,n);var O=uf(g(t),g(n),f,l,d,_);return _.delete(t),O;case Zn:if(mn)return mn.call(t)==mn.call(n)}return!1}u(r_,"equalByTag");function n_(t,n,o,f,l,d){var _=o&B,g=ls(t),w=g.length,A=ls(n),O=A.length;if(w!=O&&!_)return!1;for(var R=w;R--;){var P=g[R];if(!(_?P in n:ne.call(n,P)))return!1}var F=d.get(t),D=d.get(n);if(F&&D)return F==n&&D==t;var G=!0;d.set(t,n),d.set(n,t);for(var q=_;++R<w;){P=g[R];var K=t[P],X=n[P];if(f)var nt=_?f(X,K,P,n,t,d):f(K,X,P,t,n,d);if(!(nt===e?K===X||l(K,X,o,f,d):nt)){G=!1;break}q||(q=P=="constructor")}if(G&&!q){var We=t.constructor,it=n.constructor;We!=it&&"constructor"in t&&"constructor"in n&&!(typeof We=="function"&&We instanceof We&&typeof it=="function"&&it instanceof it)&&(G=!1)}return d.delete(t),d.delete(n),G}u(n_,"equalObjects");function Jt(t){return ms(pf(t,e,xf),t+"")}u(Jt,"flatRest");function ls(t){return Aa(t,Ne,_s)}u(ls,"getAllKeys");function hs(t){return Aa(t,Je,af)}u(hs,"getAllKeysIn");var ps=_i?function(t){return _i.get(t)}:Is;function Bi(t){for(var n=t.name+"",o=Vr[n],f=ne.call(Vr,n)?o.length:0;f--;){var l=o[f],d=l.func;if(d==null||d==t)return l.name}return n}u(Bi,"getFuncName");function Yr(t){var n=ne.call(p,"placeholder")?p:t;return n.placeholder}u(Yr,"getHolder");function M(){var t=p.iteratee||Ns;return t=t===Ns?Ba:t,arguments.length?t(arguments[0],arguments[1]):t}u(M,"getIteratee");function Ni(t,n){var o=t.__data__;return l_(n)?o[typeof n=="string"?"string":"hash"]:o.map}u(Ni,"getMapData");function ds(t){for(var n=Ne(t),o=n.length;o--;){var f=n[o],l=t[f];n[o]=[f,l,lf(l)]}return n}u(ds,"getMatchData");function Or(t,n){var o=dp(t,n);return Ca(o)?o:e}u(Or,"getNative");function i_(t){var n=ne.call(t,xr),o=t[xr];try{t[xr]=e;var f=!0}catch{}var l=ui.call(t);return f&&(n?t[xr]=o:delete t[xr]),l}u(i_,"getRawTag");var _s=Wo?function(t){return t==null?[]:(t=ae(t),nr(Wo(t),function(n){return pa.call(t,n)}))}:Ps,af=Wo?function(t){for(var n=[];t;)ir(n,_s(t)),t=ci(t);return n}:Ps,De=Ue;(zo&&De(new zo(new ArrayBuffer(1)))!=Mr||yn&&De(new yn)!=gt||Vo&&De(Vo.resolve())!=Tu||zr&&De(new zr)!=mt||vn&&De(new vn)!=hn)&&(De=u(function(t){var n=Ue(t),o=n==Wt?t.constructor:e,f=o?Cr(o):"";if(f)switch(f){case Up:return Mr;case Hp:return gt;case Wp:return Tu;case zp:return mt;case Vp:return hn}return n},"getTag"));function o_(t,n,o){for(var f=-1,l=o.length;++f<l;){var d=o[f],_=d.size;switch(d.type){case"drop":t+=_;break;case"dropRight":n-=_;break;case"take":n=Me(n,t+_);break;case"takeRight":t=Ae(t,n-_);break}}return{start:t,end:n}}u(o_,"getView");function s_(t){var n=t.match(hh);return n?n[1].split(ph):[]}u(s_,"getWrapDetails");function ff(t,n,o){n=cr(n,t);for(var f=-1,l=n.length,d=!1;++f<l;){var _=Pt(n[f]);if(!(d=t!=null&&o(t,_)))break;t=t[_]}return d||++f!=l?d:(l=t==null?0:t.length,!!l&&Mi(l)&&Yt(_,l)&&(z(t)||Br(t)))}u(ff,"hasPath");function u_(t){var n=t.length,o=new t.constructor(n);return n&&typeof t[0]=="string"&&ne.call(t,"index")&&(o.index=t.index,o.input=t.input),o}u(u_,"initCloneArray");function cf(t){return typeof t.constructor=="function"&&!An(t)?$r(ci(t)):{}}u(cf,"initCloneObject");function a_(t,n,o){var f=t.constructor;switch(n){case pn:return as(t);case un:case an:return new f(+t);case Mr:return $d(t,o);case po:case _o:case yo:case vo:case go:case mo:case wo:case bo:case xo:return $a(t,o);case gt:return new f;case fn:case ln:return new f(t);case cn:return Gd(t);case mt:return new f;case Zn:return Jd(t)}}u(a_,"initCloneByTag");function f_(t,n){var o=n.length;if(!o)return t;var f=o-1;return n[f]=(o>1?"& ":"")+n[f],n=n.join(o>2?", ":" "),t.replace(lh,`{
/* [wrapped with `+n+`] */
`)}u(f_,"insertWrapDetails");function c_(t){return z(t)||Br(t)||!!(da&&t&&t[da])}u(c_,"isFlattenable");function Yt(t,n){var o=typeof t;return n=n??rr,!!n&&(o=="number"||o!="symbol"&&xh.test(t))&&t>-1&&t%1==0&&t<n}u(Yt,"isIndex");function He(t,n,o){if(!de(o))return!1;var f=typeof n;return(f=="number"?Ge(o)&&Yt(n,o.length):f=="string"&&n in o)?xt(o[n],t):!1}u(He,"isIterateeCall");function ys(t,n){if(z(t))return!1;var o=typeof t;return o=="number"||o=="symbol"||o=="boolean"||t==null||rt(t)?!0:uh.test(t)||!sh.test(t)||n!=null&&t in ae(n)}u(ys,"isKey");function l_(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}u(l_,"isKeyable");function vs(t){var n=Bi(t),o=p[n];if(typeof o!="function"||!(n in Z.prototype))return!1;if(t===o)return!0;var f=ps(o);return!!f&&t===f[0]}u(vs,"isLaziable");function h_(t){return!!ca&&ca in t}u(h_,"isMasked");var p_=oi?Kt:Ls;function An(t){var n=t&&t.constructor,o=typeof n=="function"&&n.prototype||Wr;return t===o}u(An,"isPrototype");function lf(t){return t===t&&!de(t)}u(lf,"isStrictComparable");function hf(t,n){return function(o){return o==null?!1:o[t]===n&&(n!==e||t in ae(o))}}u(hf,"matchesStrictComparable");function d_(t){var n=ki(t,function(f){return o.size===y&&o.clear(),f}),o=n.cache;return n}u(d_,"memoizeCapped");function __(t,n){var o=t[1],f=n[1],l=o|f,d=l<(I|L|Se),_=f==Se&&o==H||f==Se&&o==Fe&&t[7].length<=n[8]||f==(Se|Fe)&&n[7].length<=n[8]&&o==H;if(!(d||_))return t;f&I&&(t[2]=n[2],l|=o&I?0:U);var g=n[3];if(g){var w=t[3];t[3]=w?Ja(w,g,n[4]):g,t[4]=w?or(t[3],v):n[4]}return g=n[5],g&&(w=t[5],t[5]=w?Ya(w,g,n[6]):g,t[6]=w?or(t[5],v):n[6]),g=n[7],g&&(t[7]=g),f&Se&&(t[8]=t[8]==null?n[8]:Me(t[8],n[8])),t[9]==null&&(t[9]=n[9]),t[0]=n[0],t[1]=l,t}u(__,"mergeData");function y_(t){var n=[];if(t!=null)for(var o in ae(t))n.push(o);return n}u(y_,"nativeKeysIn");function v_(t){return ui.call(t)}u(v_,"objectToString");function pf(t,n,o){return n=Ae(n===e?t.length-1:n,0),function(){for(var f=arguments,l=-1,d=Ae(f.length-n,0),_=b(d);++l<d;)_[l]=f[n+l];l=-1;for(var g=b(n+1);++l<n;)g[l]=f[l];return g[n]=o(_),Qe(t,this,g)}}u(pf,"overRest");function df(t,n){return n.length<2?t:Ar(t,pt(n,0,-1))}u(df,"parent");function g_(t,n){for(var o=t.length,f=Me(n.length,o),l=$e(t);f--;){var d=n[f];t[f]=Yt(d,o)?l[d]:e}return t}u(g_,"reorder");function gs(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}u(gs,"safeGet");var _f=vf(Ma),On=Pp||function(t,n){return Be.setTimeout(t,n)},ms=vf(Hd);function yf(t,n,o){var f=n+"";return ms(t,f_(f,m_(s_(f),o)))}u(yf,"setWrapToString");function vf(t){var n=0,o=0;return function(){var f=Mp(),l=Ul-(f-o);if(o=f,l>0){if(++n>=ql)return arguments[0]}else n=0;return t.apply(e,arguments)}}u(vf,"shortOut");function Ri(t,n){var o=-1,f=t.length,l=f-1;for(n=n===e?f:n;++o<n;){var d=ts(o,l),_=t[d];t[d]=t[o],t[o]=_}return t.length=n,t}u(Ri,"shuffleSelf");var gf=d_(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(ah,function(o,f,l,d){n.push(l?d.replace(yh,"$1"):f||o)}),n});function Pt(t){if(typeof t=="string"||rt(t))return t;var n=t+"";return n=="0"&&1/t==-wr?"-0":n}u(Pt,"toKey");function Cr(t){if(t!=null){try{return si.call(t)}catch{}try{return t+""}catch{}}return""}u(Cr,"toSource");function m_(t,n){return ft(Gl,function(o){var f="_."+o[0];n&o[1]&&!ti(t,f)&&t.push(f)}),t.sort()}u(m_,"updateWrapDetails");function mf(t){if(t instanceof Z)return t.clone();var n=new lt(t.__wrapped__,t.__chain__);return n.__actions__=$e(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}u(mf,"wrapperClone");function w_(t,n,o){(o?He(t,n,o):n===e)?n=1:n=Ae($(n),0);var f=t==null?0:t.length;if(!f||n<1)return[];for(var l=0,d=0,_=b(pi(f/n));l<f;)_[d++]=pt(t,l,l+=n);return _}u(w_,"chunk");function b_(t){for(var n=-1,o=t==null?0:t.length,f=0,l=[];++n<o;){var d=t[n];d&&(l[f++]=d)}return l}u(b_,"compact");function x_(){var t=arguments.length;if(!t)return[];for(var n=b(t-1),o=arguments[0],f=t;f--;)n[f-1]=arguments[f];return ir(z(o)?$e(o):[o],Pe(n,1))}u(x_,"concat");var T_=J(function(t,n){return be(t)?bn(t,Pe(n,1,be,!0)):[]}),S_=J(function(t,n){var o=dt(n);return be(o)&&(o=e),be(t)?bn(t,Pe(n,1,be,!0),M(o,2)):[]}),E_=J(function(t,n){var o=dt(n);return be(o)&&(o=e),be(t)?bn(t,Pe(n,1,be,!0),e,o):[]});function A_(t,n,o){var f=t==null?0:t.length;return f?(n=o||n===e?1:$(n),pt(t,n<0?0:n,f)):[]}u(A_,"drop");function O_(t,n,o){var f=t==null?0:t.length;return f?(n=o||n===e?1:$(n),n=f-n,pt(t,0,n<0?0:n)):[]}u(O_,"dropRight");function C_(t,n){return t&&t.length?Ti(t,M(n,3),!0,!0):[]}u(C_,"dropRightWhile");function B_(t,n){return t&&t.length?Ti(t,M(n,3),!0):[]}u(B_,"dropWhile");function N_(t,n,o,f){var l=t==null?0:t.length;return l?(o&&typeof o!="number"&&He(t,n,o)&&(o=0,f=l),xd(t,n,o,f)):[]}u(N_,"fill");function wf(t,n,o){var f=t==null?0:t.length;if(!f)return-1;var l=o==null?0:$(o);return l<0&&(l=Ae(f+l,0)),ri(t,M(n,3),l)}u(wf,"findIndex");function bf(t,n,o){var f=t==null?0:t.length;if(!f)return-1;var l=f-1;return o!==e&&(l=$(o),l=o<0?Ae(f+l,0):Me(l,f-1)),ri(t,M(n,3),l,!0)}u(bf,"findLastIndex");function xf(t){var n=t==null?0:t.length;return n?Pe(t,1):[]}u(xf,"flatten");function R_(t){var n=t==null?0:t.length;return n?Pe(t,wr):[]}u(R_,"flattenDeep");function I_(t,n){var o=t==null?0:t.length;return o?(n=n===e?1:$(n),Pe(t,n)):[]}u(I_,"flattenDepth");function P_(t){for(var n=-1,o=t==null?0:t.length,f={};++n<o;){var l=t[n];f[l[0]]=l[1]}return f}u(P_,"fromPairs");function Tf(t){return t&&t.length?t[0]:e}u(Tf,"head");function L_(t,n,o){var f=t==null?0:t.length;if(!f)return-1;var l=o==null?0:$(o);return l<0&&(l=Ae(f+l,0)),qr(t,n,l)}u(L_,"indexOf");function k_(t){var n=t==null?0:t.length;return n?pt(t,0,-1):[]}u(k_,"initial");var F_=J(function(t){var n=he(t,ss);return n.length&&n[0]===t[0]?jo(n):[]}),M_=J(function(t){var n=dt(t),o=he(t,ss);return n===dt(o)?n=e:o.pop(),o.length&&o[0]===t[0]?jo(o,M(n,2)):[]}),D_=J(function(t){var n=dt(t),o=he(t,ss);return n=typeof n=="function"?n:e,n&&o.pop(),o.length&&o[0]===t[0]?jo(o,e,n):[]});function q_(t,n){return t==null?"":kp.call(t,n)}u(q_,"join");function dt(t){var n=t==null?0:t.length;return n?t[n-1]:e}u(dt,"last");function U_(t,n,o){var f=t==null?0:t.length;if(!f)return-1;var l=f;return o!==e&&(l=$(o),l=l<0?Ae(f+l,0):Me(l,f-1)),n===n?mp(t,n,l):ri(t,ra,l,!0)}u(U_,"lastIndexOf");function H_(t,n){return t&&t.length?Pa(t,$(n)):e}u(H_,"nth");var W_=J(Sf);function Sf(t,n){return t&&t.length&&n&&n.length?es(t,n):t}u(Sf,"pullAll");function z_(t,n,o){return t&&t.length&&n&&n.length?es(t,n,M(o,2)):t}u(z_,"pullAllBy");function V_(t,n,o){return t&&t.length&&n&&n.length?es(t,n,e,o):t}u(V_,"pullAllWith");var $_=Jt(function(t,n){var o=t==null?0:t.length,f=Go(t,n);return Fa(t,he(n,function(l){return Yt(l,o)?+l:l}).sort(Ga)),f});function G_(t,n){var o=[];if(!(t&&t.length))return o;var f=-1,l=[],d=t.length;for(n=M(n,3);++f<d;){var _=t[f];n(_,f,t)&&(o.push(_),l.push(f))}return Fa(t,l),o}u(G_,"remove");function ws(t){return t==null?t:qp.call(t)}u(ws,"reverse");function J_(t,n,o){var f=t==null?0:t.length;return f?(o&&typeof o!="number"&&He(t,n,o)?(n=0,o=f):(n=n==null?0:$(n),o=o===e?f:$(o)),pt(t,n,o)):[]}u(J_,"slice");function Y_(t,n){return xi(t,n)}u(Y_,"sortedIndex");function K_(t,n,o){return ns(t,n,M(o,2))}u(K_,"sortedIndexBy");function j_(t,n){var o=t==null?0:t.length;if(o){var f=xi(t,n);if(f<o&&xt(t[f],n))return f}return-1}u(j_,"sortedIndexOf");function Z_(t,n){return xi(t,n,!0)}u(Z_,"sortedLastIndex");function X_(t,n,o){return ns(t,n,M(o,2),!0)}u(X_,"sortedLastIndexBy");function Q_(t,n){var o=t==null?0:t.length;if(o){var f=xi(t,n,!0)-1;if(xt(t[f],n))return f}return-1}u(Q_,"sortedLastIndexOf");function ey(t){return t&&t.length?Da(t):[]}u(ey,"sortedUniq");function ty(t,n){return t&&t.length?Da(t,M(n,2)):[]}u(ty,"sortedUniqBy");function ry(t){var n=t==null?0:t.length;return n?pt(t,1,n):[]}u(ry,"tail");function ny(t,n,o){return t&&t.length?(n=o||n===e?1:$(n),pt(t,0,n<0?0:n)):[]}u(ny,"take");function iy(t,n,o){var f=t==null?0:t.length;return f?(n=o||n===e?1:$(n),n=f-n,pt(t,n<0?0:n,f)):[]}u(iy,"takeRight");function oy(t,n){return t&&t.length?Ti(t,M(n,3),!1,!0):[]}u(oy,"takeRightWhile");function sy(t,n){return t&&t.length?Ti(t,M(n,3)):[]}u(sy,"takeWhile");var uy=J(function(t){return fr(Pe(t,1,be,!0))}),ay=J(function(t){var n=dt(t);return be(n)&&(n=e),fr(Pe(t,1,be,!0),M(n,2))}),fy=J(function(t){var n=dt(t);return n=typeof n=="function"?n:e,fr(Pe(t,1,be,!0),e,n)});function cy(t){return t&&t.length?fr(t):[]}u(cy,"uniq");function ly(t,n){return t&&t.length?fr(t,M(n,2)):[]}u(ly,"uniqBy");function hy(t,n){return n=typeof n=="function"?n:e,t&&t.length?fr(t,e,n):[]}u(hy,"uniqWith");function bs(t){if(!(t&&t.length))return[];var n=0;return t=nr(t,function(o){if(be(o))return n=Ae(o.length,n),!0}),Do(n,function(o){return he(t,ko(o))})}u(bs,"unzip");function Ef(t,n){if(!(t&&t.length))return[];var o=bs(t);return n==null?o:he(o,function(f){return Qe(n,e,f)})}u(Ef,"unzipWith");var py=J(function(t,n){return be(t)?bn(t,n):[]}),dy=J(function(t){return os(nr(t,be))}),_y=J(function(t){var n=dt(t);return be(n)&&(n=e),os(nr(t,be),M(n,2))}),yy=J(function(t){var n=dt(t);return n=typeof n=="function"?n:e,os(nr(t,be),e,n)}),vy=J(bs);function gy(t,n){return Wa(t||[],n||[],wn)}u(gy,"zipObject");function my(t,n){return Wa(t||[],n||[],Sn)}u(my,"zipObjectDeep");var wy=J(function(t){var n=t.length,o=n>1?t[n-1]:e;return o=typeof o=="function"?(t.pop(),o):e,Ef(t,o)});function Af(t){var n=p(t);return n.__chain__=!0,n}u(Af,"chain");function by(t,n){return n(t),t}u(by,"tap");function Ii(t,n){return n(t)}u(Ii,"thru");var xy=Jt(function(t){var n=t.length,o=n?t[0]:0,f=this.__wrapped__,l=u(function(d){return Go(d,t)},"interceptor");return n>1||this.__actions__.length||!(f instanceof Z)||!Yt(o)?this.thru(l):(f=f.slice(o,+o+(n?1:0)),f.__actions__.push({func:Ii,args:[l],thisArg:e}),new lt(f,this.__chain__).thru(function(d){return n&&!d.length&&d.push(e),d}))});function Ty(){return Af(this)}u(Ty,"wrapperChain");function Sy(){return new lt(this.value(),this.__chain__)}u(Sy,"wrapperCommit");function Ey(){this.__values__===e&&(this.__values__=Uf(this.value()));var t=this.__index__>=this.__values__.length,n=t?e:this.__values__[this.__index__++];return{done:t,value:n}}u(Ey,"wrapperNext");function Ay(){return this}u(Ay,"wrapperToIterator");function Oy(t){for(var n,o=this;o instanceof vi;){var f=mf(o);f.__index__=0,f.__values__=e,n?l.__wrapped__=f:n=f;var l=f;o=o.__wrapped__}return l.__wrapped__=t,n}u(Oy,"wrapperPlant");function Cy(){var t=this.__wrapped__;if(t instanceof Z){var n=t;return this.__actions__.length&&(n=new Z(this)),n=n.reverse(),n.__actions__.push({func:Ii,args:[ws],thisArg:e}),new lt(n,this.__chain__)}return this.thru(ws)}u(Cy,"wrapperReverse");function By(){return Ha(this.__wrapped__,this.__actions__)}u(By,"wrapperValue");var Ny=Si(function(t,n,o){ne.call(t,o)?++t[o]:$t(t,o,1)});function Ry(t,n,o){var f=z(t)?ea:bd;return o&&He(t,n,o)&&(n=e),f(t,M(n,3))}u(Ry,"every");function Iy(t,n){var o=z(t)?nr:Sa;return o(t,M(n,3))}u(Iy,"filter");var Py=Xa(wf),Ly=Xa(bf);function ky(t,n){return Pe(Pi(t,n),1)}u(ky,"flatMap");function Fy(t,n){return Pe(Pi(t,n),wr)}u(Fy,"flatMapDeep");function My(t,n,o){return o=o===e?1:$(o),Pe(Pi(t,n),o)}u(My,"flatMapDepth");function Of(t,n){var o=z(t)?ft:ar;return o(t,M(n,3))}u(Of,"forEach");function Cf(t,n){var o=z(t)?rp:Ta;return o(t,M(n,3))}u(Cf,"forEachRight");var Dy=Si(function(t,n,o){ne.call(t,o)?t[o].push(n):$t(t,o,[n])});function qy(t,n,o,f){t=Ge(t)?t:jr(t),o=o&&!f?$(o):0;var l=t.length;return o<0&&(o=Ae(l+o,0)),Di(t)?o<=l&&t.indexOf(n,o)>-1:!!l&&qr(t,n,o)>-1}u(qy,"includes");var Uy=J(function(t,n,o){var f=-1,l=typeof n=="function",d=Ge(t)?b(t.length):[];return ar(t,function(_){d[++f]=l?Qe(n,_,o):xn(_,n,o)}),d}),Hy=Si(function(t,n,o){$t(t,o,n)});function Pi(t,n){var o=z(t)?he:Na;return o(t,M(n,3))}u(Pi,"map");function Wy(t,n,o,f){return t==null?[]:(z(n)||(n=n==null?[]:[n]),o=f?e:o,z(o)||(o=o==null?[]:[o]),La(t,n,o))}u(Wy,"orderBy");var zy=Si(function(t,n,o){t[o?0:1].push(n)},function(){return[[],[]]});function Vy(t,n,o){var f=z(t)?Po:ia,l=arguments.length<3;return f(t,M(n,4),o,l,ar)}u(Vy,"reduce");function $y(t,n,o){var f=z(t)?np:ia,l=arguments.length<3;return f(t,M(n,4),o,l,Ta)}u($y,"reduceRight");function Gy(t,n){var o=z(t)?nr:Sa;return o(t,Fi(M(n,3)))}u(Gy,"reject");function Jy(t){var n=z(t)?ma:qd;return n(t)}u(Jy,"sample");function Yy(t,n,o){(o?He(t,n,o):n===e)?n=1:n=$(n);var f=z(t)?yd:Ud;return f(t,n)}u(Yy,"sampleSize");function Ky(t){var n=z(t)?vd:Wd;return n(t)}u(Ky,"shuffle");function jy(t){if(t==null)return 0;if(Ge(t))return Di(t)?Hr(t):t.length;var n=De(t);return n==gt||n==mt?t.size:Xo(t).length}u(jy,"size");function Zy(t,n,o){var f=z(t)?Lo:zd;return o&&He(t,n,o)&&(n=e),f(t,M(n,3))}u(Zy,"some");var Xy=J(function(t,n){if(t==null)return[];var o=n.length;return o>1&&He(t,n[0],n[1])?n=[]:o>2&&He(n[0],n[1],n[2])&&(n=[n[0]]),La(t,Pe(n,1),[])}),Li=Ip||function(){return Be.Date.now()};function Qy(t,n){if(typeof n!="function")throw new ct(a);return t=$(t),function(){if(--t<1)return n.apply(this,arguments)}}u(Qy,"after");function Bf(t,n,o){return n=o?e:n,n=t&&n==null?t.length:n,Gt(t,Se,e,e,e,e,n)}u(Bf,"ary");function Nf(t,n){var o;if(typeof n!="function")throw new ct(a);return t=$(t),function(){return--t>0&&(o=n.apply(this,arguments)),t<=1&&(n=e),o}}u(Nf,"before");var xs=J(function(t,n,o){var f=I;if(o.length){var l=or(o,Yr(xs));f|=j}return Gt(t,f,n,o,l)}),Rf=J(function(t,n,o){var f=I|L;if(o.length){var l=or(o,Yr(Rf));f|=j}return Gt(n,f,t,o,l)});function If(t,n,o){n=o?e:n;var f=Gt(t,H,e,e,e,e,e,n);return f.placeholder=If.placeholder,f}u(If,"curry");function Pf(t,n,o){n=o?e:n;var f=Gt(t,se,e,e,e,e,e,n);return f.placeholder=Pf.placeholder,f}u(Pf,"curryRight");function Lf(t,n,o){var f,l,d,_,g,w,A=0,O=!1,R=!1,P=!0;if(typeof t!="function")throw new ct(a);n=_t(n)||0,de(o)&&(O=!!o.leading,R="maxWait"in o,d=R?Ae(_t(o.maxWait)||0,n):d,P="trailing"in o?!!o.trailing:P);function F(xe){var Tt=f,Zt=l;return f=l=e,A=xe,_=t.apply(Zt,Tt),_}u(F,"invokeFunc");function D(xe){return A=xe,g=On(K,n),O?F(xe):_}u(D,"leadingEdge");function G(xe){var Tt=xe-w,Zt=xe-A,Qf=n-Tt;return R?Me(Qf,d-Zt):Qf}u(G,"remainingWait");function q(xe){var Tt=xe-w,Zt=xe-A;return w===e||Tt>=n||Tt<0||R&&Zt>=d}u(q,"shouldInvoke");function K(){var xe=Li();if(q(xe))return X(xe);g=On(K,G(xe))}u(K,"timerExpired");function X(xe){return g=e,P&&f?F(xe):(f=l=e,_)}u(X,"trailingEdge");function nt(){g!==e&&za(g),A=0,f=w=l=g=e}u(nt,"cancel");function We(){return g===e?_:X(Li())}u(We,"flush");function it(){var xe=Li(),Tt=q(xe);if(f=arguments,l=this,w=xe,Tt){if(g===e)return D(w);if(R)return za(g),g=On(K,n),F(w)}return g===e&&(g=On(K,n)),_}return u(it,"debounced"),it.cancel=nt,it.flush=We,it}u(Lf,"debounce");var ev=J(function(t,n){return xa(t,1,n)}),tv=J(function(t,n,o){return xa(t,_t(n)||0,o)});function rv(t){return Gt(t,Bt)}u(rv,"flip");function ki(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new ct(a);var o=u(function(){var f=arguments,l=n?n.apply(this,f):f[0],d=o.cache;if(d.has(l))return d.get(l);var _=t.apply(this,f);return o.cache=d.set(l,_)||d,_},"memoized");return o.cache=new(ki.Cache||Vt),o}u(ki,"memoize"),ki.Cache=Vt;function Fi(t){if(typeof t!="function")throw new ct(a);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}u(Fi,"negate");function nv(t){return Nf(2,t)}u(nv,"once");var iv=Vd(function(t,n){n=n.length==1&&z(n[0])?he(n[0],et(M())):he(Pe(n,1),et(M()));var o=n.length;return J(function(f){for(var l=-1,d=Me(f.length,o);++l<d;)f[l]=n[l].call(this,f[l]);return Qe(t,this,f)})}),Ts=J(function(t,n){var o=or(n,Yr(Ts));return Gt(t,j,e,n,o)}),kf=J(function(t,n){var o=or(n,Yr(kf));return Gt(t,pe,e,n,o)}),ov=Jt(function(t,n){return Gt(t,Fe,e,e,e,n)});function sv(t,n){if(typeof t!="function")throw new ct(a);return n=n===e?n:$(n),J(t,n)}u(sv,"rest");function uv(t,n){if(typeof t!="function")throw new ct(a);return n=n==null?0:Ae($(n),0),J(function(o){var f=o[n],l=lr(o,0,n);return f&&ir(l,f),Qe(t,this,l)})}u(uv,"spread");function av(t,n,o){var f=!0,l=!0;if(typeof t!="function")throw new ct(a);return de(o)&&(f="leading"in o?!!o.leading:f,l="trailing"in o?!!o.trailing:l),Lf(t,n,{leading:f,maxWait:n,trailing:l})}u(av,"throttle");function fv(t){return Bf(t,1)}u(fv,"unary");function cv(t,n){return Ts(us(n),t)}u(cv,"wrap");function lv(){if(!arguments.length)return[];var t=arguments[0];return z(t)?t:[t]}u(lv,"castArray");function hv(t){return ht(t,E)}u(hv,"clone");function pv(t,n){return n=typeof n=="function"?n:e,ht(t,E,n)}u(pv,"cloneWith");function dv(t){return ht(t,x|E)}u(dv,"cloneDeep");function _v(t,n){return n=typeof n=="function"?n:e,ht(t,x|E,n)}u(_v,"cloneDeepWith");function yv(t,n){return n==null||ba(t,n,Ne(n))}u(yv,"conformsTo");function xt(t,n){return t===n||t!==t&&n!==n}u(xt,"eq");var vv=Ci(Ko),gv=Ci(function(t,n){return t>=n}),Br=Oa(function(){return arguments}())?Oa:function(t){return ve(t)&&ne.call(t,"callee")&&!pa.call(t,"callee")},z=b.isArray,mv=Yu?et(Yu):Od;function Ge(t){return t!=null&&Mi(t.length)&&!Kt(t)}u(Ge,"isArrayLike");function be(t){return ve(t)&&Ge(t)}u(be,"isArrayLikeObject");function wv(t){return t===!0||t===!1||ve(t)&&Ue(t)==un}u(wv,"isBoolean");var hr=Lp||Ls,bv=Ku?et(Ku):Cd;function xv(t){return ve(t)&&t.nodeType===1&&!Cn(t)}u(xv,"isElement");function Tv(t){if(t==null)return!0;if(Ge(t)&&(z(t)||typeof t=="string"||typeof t.splice=="function"||hr(t)||Kr(t)||Br(t)))return!t.length;var n=De(t);if(n==gt||n==mt)return!t.size;if(An(t))return!Xo(t).length;for(var o in t)if(ne.call(t,o))return!1;return!0}u(Tv,"isEmpty");function Sv(t,n){return Tn(t,n)}u(Sv,"isEqual");function Ev(t,n,o){o=typeof o=="function"?o:e;var f=o?o(t,n):e;return f===e?Tn(t,n,e,o):!!f}u(Ev,"isEqualWith");function Ss(t){if(!ve(t))return!1;var n=Ue(t);return n==Kn||n==Yl||typeof t.message=="string"&&typeof t.name=="string"&&!Cn(t)}u(Ss,"isError");function Av(t){return typeof t=="number"&&_a(t)}u(Av,"isFinite");function Kt(t){if(!de(t))return!1;var n=Ue(t);return n==jn||n==xu||n==Jl||n==jl}u(Kt,"isFunction");function Ff(t){return typeof t=="number"&&t==$(t)}u(Ff,"isInteger");function Mi(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=rr}u(Mi,"isLength");function de(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}u(de,"isObject");function ve(t){return t!=null&&typeof t=="object"}u(ve,"isObjectLike");var Mf=ju?et(ju):Nd;function Ov(t,n){return t===n||Zo(t,n,ds(n))}u(Ov,"isMatch");function Cv(t,n,o){return o=typeof o=="function"?o:e,Zo(t,n,ds(n),o)}u(Cv,"isMatchWith");function Bv(t){return Df(t)&&t!=+t}u(Bv,"isNaN");function Nv(t){if(p_(t))throw new W(s);return Ca(t)}u(Nv,"isNative");function Rv(t){return t===null}u(Rv,"isNull");function Iv(t){return t==null}u(Iv,"isNil");function Df(t){return typeof t=="number"||ve(t)&&Ue(t)==fn}u(Df,"isNumber");function Cn(t){if(!ve(t)||Ue(t)!=Wt)return!1;var n=ci(t);if(n===null)return!0;var o=ne.call(n,"constructor")&&n.constructor;return typeof o=="function"&&o instanceof o&&si.call(o)==Cp}u(Cn,"isPlainObject");var Es=Zu?et(Zu):Rd;function Pv(t){return Ff(t)&&t>=-rr&&t<=rr}u(Pv,"isSafeInteger");var qf=Xu?et(Xu):Id;function Di(t){return typeof t=="string"||!z(t)&&ve(t)&&Ue(t)==ln}u(Di,"isString");function rt(t){return typeof t=="symbol"||ve(t)&&Ue(t)==Zn}u(rt,"isSymbol");var Kr=Qu?et(Qu):Pd;function Lv(t){return t===e}u(Lv,"isUndefined");function kv(t){return ve(t)&&De(t)==hn}u(kv,"isWeakMap");function Fv(t){return ve(t)&&Ue(t)==Xl}u(Fv,"isWeakSet");var Mv=Ci(Qo),Dv=Ci(function(t,n){return t<=n});function Uf(t){if(!t)return[];if(Ge(t))return Di(t)?wt(t):$e(t);if(_n&&t[_n])return yp(t[_n]());var n=De(t),o=n==gt?Uo:n==mt?ni:jr;return o(t)}u(Uf,"toArray");function jt(t){if(!t)return t===0?t:0;if(t=_t(t),t===wr||t===-wr){var n=t<0?-1:1;return n*zl}return t===t?t:0}u(jt,"toFinite");function $(t){var n=jt(t),o=n%1;return n===n?o?n-o:n:0}u($,"toInteger");function Hf(t){return t?Er($(t),0,Nt):0}u(Hf,"toLength");function _t(t){if(typeof t=="number")return t;if(rt(t))return Jn;if(de(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=de(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=oa(t);var o=mh.test(t);return o||bh.test(t)?Qh(t.slice(2),o?2:8):gh.test(t)?Jn:+t}u(_t,"toNumber");function Wf(t){return It(t,Je(t))}u(Wf,"toPlainObject");function qv(t){return t?Er($(t),-rr,rr):t===0?t:0}u(qv,"toSafeInteger");function re(t){return t==null?"":tt(t)}u(re,"toString");var Uv=Gr(function(t,n){if(An(n)||Ge(n)){It(n,Ne(n),t);return}for(var o in n)ne.call(n,o)&&wn(t,o,n[o])}),zf=Gr(function(t,n){It(n,Je(n),t)}),qi=Gr(function(t,n,o,f){It(n,Je(n),t,f)}),Hv=Gr(function(t,n,o,f){It(n,Ne(n),t,f)}),Wv=Jt(Go);function zv(t,n){var o=$r(t);return n==null?o:wa(o,n)}u(zv,"create");var Vv=J(function(t,n){t=ae(t);var o=-1,f=n.length,l=f>2?n[2]:e;for(l&&He(n[0],n[1],l)&&(f=1);++o<f;)for(var d=n[o],_=Je(d),g=-1,w=_.length;++g<w;){var A=_[g],O=t[A];(O===e||xt(O,Wr[A])&&!ne.call(t,A))&&(t[A]=d[A])}return t}),$v=J(function(t){return t.push(e,sf),Qe(Vf,e,t)});function Gv(t,n){return ta(t,M(n,3),Rt)}u(Gv,"findKey");function Jv(t,n){return ta(t,M(n,3),Yo)}u(Jv,"findLastKey");function Yv(t,n){return t==null?t:Jo(t,M(n,3),Je)}u(Yv,"forIn");function Kv(t,n){return t==null?t:Ea(t,M(n,3),Je)}u(Kv,"forInRight");function jv(t,n){return t&&Rt(t,M(n,3))}u(jv,"forOwn");function Zv(t,n){return t&&Yo(t,M(n,3))}u(Zv,"forOwnRight");function Xv(t){return t==null?[]:wi(t,Ne(t))}u(Xv,"functions");function Qv(t){return t==null?[]:wi(t,Je(t))}u(Qv,"functionsIn");function As(t,n,o){var f=t==null?e:Ar(t,n);return f===e?o:f}u(As,"get");function eg(t,n){return t!=null&&ff(t,n,Td)}u(eg,"has");function Os(t,n){return t!=null&&ff(t,n,Sd)}u(Os,"hasIn");var tg=ef(function(t,n,o){n!=null&&typeof n.toString!="function"&&(n=ui.call(n)),t[n]=o},Bs(Ye)),rg=ef(function(t,n,o){n!=null&&typeof n.toString!="function"&&(n=ui.call(n)),ne.call(t,n)?t[n].push(o):t[n]=[o]},M),ng=J(xn);function Ne(t){return Ge(t)?ga(t):Xo(t)}u(Ne,"keys");function Je(t){return Ge(t)?ga(t,!0):Ld(t)}u(Je,"keysIn");function ig(t,n){var o={};return n=M(n,3),Rt(t,function(f,l,d){$t(o,n(f,l,d),f)}),o}u(ig,"mapKeys");function og(t,n){var o={};return n=M(n,3),Rt(t,function(f,l,d){$t(o,l,n(f,l,d))}),o}u(og,"mapValues");var sg=Gr(function(t,n,o){bi(t,n,o)}),Vf=Gr(function(t,n,o,f){bi(t,n,o,f)}),ug=Jt(function(t,n){var o={};if(t==null)return o;var f=!1;n=he(n,function(d){return d=cr(d,t),f||(f=d.length>1),d}),It(t,hs(t),o),f&&(o=ht(o,x|T|E,t_));for(var l=n.length;l--;)is(o,n[l]);return o});function ag(t,n){return $f(t,Fi(M(n)))}u(ag,"omitBy");var fg=Jt(function(t,n){return t==null?{}:Fd(t,n)});function $f(t,n){if(t==null)return{};var o=he(hs(t),function(f){return[f]});return n=M(n),ka(t,o,function(f,l){return n(f,l[0])})}u($f,"pickBy");function cg(t,n,o){n=cr(n,t);var f=-1,l=n.length;for(l||(l=1,t=e);++f<l;){var d=t==null?e:t[Pt(n[f])];d===e&&(f=l,d=o),t=Kt(d)?d.call(t):d}return t}u(cg,"result");function lg(t,n,o){return t==null?t:Sn(t,n,o)}u(lg,"set");function hg(t,n,o,f){return f=typeof f=="function"?f:e,t==null?t:Sn(t,n,o,f)}u(hg,"setWith");var Gf=nf(Ne),Jf=nf(Je);function pg(t,n,o){var f=z(t),l=f||hr(t)||Kr(t);if(n=M(n,4),o==null){var d=t&&t.constructor;l?o=f?new d:[]:de(t)?o=Kt(d)?$r(ci(t)):{}:o={}}return(l?ft:Rt)(t,function(_,g,w){return n(o,_,g,w)}),o}u(pg,"transform");function dg(t,n){return t==null?!0:is(t,n)}u(dg,"unset");function _g(t,n,o){return t==null?t:Ua(t,n,us(o))}u(_g,"update");function yg(t,n,o,f){return f=typeof f=="function"?f:e,t==null?t:Ua(t,n,us(o),f)}u(yg,"updateWith");function jr(t){return t==null?[]:qo(t,Ne(t))}u(jr,"values");function vg(t){return t==null?[]:qo(t,Je(t))}u(vg,"valuesIn");function gg(t,n,o){return o===e&&(o=n,n=e),o!==e&&(o=_t(o),o=o===o?o:0),n!==e&&(n=_t(n),n=n===n?n:0),Er(_t(t),n,o)}u(gg,"clamp");function mg(t,n,o){return n=jt(n),o===e?(o=n,n=0):o=jt(o),t=_t(t),Ed(t,n,o)}u(mg,"inRange");function wg(t,n,o){if(o&&typeof o!="boolean"&&He(t,n,o)&&(n=o=e),o===e&&(typeof n=="boolean"?(o=n,n=e):typeof t=="boolean"&&(o=t,t=e)),t===e&&n===e?(t=0,n=1):(t=jt(t),n===e?(n=t,t=0):n=jt(n)),t>n){var f=t;t=n,n=f}if(o||t%1||n%1){var l=ya();return Me(t+l*(n-t+Xh("1e-"+((l+"").length-1))),n)}return ts(t,n)}u(wg,"random");var bg=Jr(function(t,n,o){return n=n.toLowerCase(),t+(o?Yf(n):n)});function Yf(t){return Cs(re(t).toLowerCase())}u(Yf,"capitalize");function Kf(t){return t=re(t),t&&t.replace(Th,lp).replace(Wh,"")}u(Kf,"deburr");function xg(t,n,o){t=re(t),n=tt(n);var f=t.length;o=o===e?f:Er($(o),0,f);var l=o;return o-=n.length,o>=0&&t.slice(o,l)==n}u(xg,"endsWith");function Tg(t){return t=re(t),t&&nh.test(t)?t.replace(Eu,hp):t}u(Tg,"escape");function Sg(t){return t=re(t),t&&fh.test(t)?t.replace(To,"\\$&"):t}u(Sg,"escapeRegExp");var Eg=Jr(function(t,n,o){return t+(o?"-":"")+n.toLowerCase()}),Ag=Jr(function(t,n,o){return t+(o?" ":"")+n.toLowerCase()}),Og=Za("toLowerCase");function Cg(t,n,o){t=re(t),n=$(n);var f=n?Hr(t):0;if(!n||f>=n)return t;var l=(n-f)/2;return Oi(di(l),o)+t+Oi(pi(l),o)}u(Cg,"pad");function Bg(t,n,o){t=re(t),n=$(n);var f=n?Hr(t):0;return n&&f<n?t+Oi(n-f,o):t}u(Bg,"padEnd");function Ng(t,n,o){t=re(t),n=$(n);var f=n?Hr(t):0;return n&&f<n?Oi(n-f,o)+t:t}u(Ng,"padStart");function Rg(t,n,o){return o||n==null?n=0:n&&(n=+n),Dp(re(t).replace(So,""),n||0)}u(Rg,"parseInt");function Ig(t,n,o){return(o?He(t,n,o):n===e)?n=1:n=$(n),rs(re(t),n)}u(Ig,"repeat");function Pg(){var t=arguments,n=re(t[0]);return t.length<3?n:n.replace(t[1],t[2])}u(Pg,"replace");var Lg=Jr(function(t,n,o){return t+(o?"_":"")+n.toLowerCase()});function kg(t,n,o){return o&&typeof o!="number"&&He(t,n,o)&&(n=o=e),o=o===e?Nt:o>>>0,o?(t=re(t),t&&(typeof n=="string"||n!=null&&!Es(n))&&(n=tt(n),!n&&Ur(t))?lr(wt(t),0,o):t.split(n,o)):[]}u(kg,"split");var Fg=Jr(function(t,n,o){return t+(o?" ":"")+Cs(n)});function Mg(t,n,o){return t=re(t),o=o==null?0:Er($(o),0,t.length),n=tt(n),t.slice(o,o+n.length)==n}u(Mg,"startsWith");function Dg(t,n,o){var f=p.templateSettings;o&&He(t,n,o)&&(n=e),t=re(t),n=qi({},n,f,of);var l=qi({},n.imports,f.imports,of),d=Ne(l),_=qo(l,d),g,w,A=0,O=n.interpolate||Xn,R="__p += '",P=Ho((n.escape||Xn).source+"|"+O.source+"|"+(O===Au?vh:Xn).source+"|"+(n.evaluate||Xn).source+"|$","g"),F="//# sourceURL="+(ne.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Jh+"]")+`
`;t.replace(P,function(q,K,X,nt,We,it){return X||(X=nt),R+=t.slice(A,it).replace(Sh,pp),K&&(g=!0,R+=`' +
__e(`+K+`) +
'`),We&&(w=!0,R+=`';
`+We+`;
__p += '`),X&&(R+=`' +
((__t = (`+X+`)) == null ? '' : __t) +
'`),A=it+q.length,q}),R+=`';
`;var D=ne.call(n,"variable")&&n.variable;if(!D)R=`with (obj) {
`+R+`
}
`;else if(_h.test(D))throw new W(c);R=(w?R.replace(Ql,""):R).replace(eh,"$1").replace(th,"$1;"),R="function("+(D||"obj")+`) {
`+(D?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(g?", __e = _.escape":"")+(w?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+R+`return __p
}`;var G=Zf(function(){return ee(d,F+"return "+R).apply(e,_)});if(G.source=R,Ss(G))throw G;return G}u(Dg,"template");function qg(t){return re(t).toLowerCase()}u(qg,"toLower");function Ug(t){return re(t).toUpperCase()}u(Ug,"toUpper");function Hg(t,n,o){if(t=re(t),t&&(o||n===e))return oa(t);if(!t||!(n=tt(n)))return t;var f=wt(t),l=wt(n),d=sa(f,l),_=ua(f,l)+1;return lr(f,d,_).join("")}u(Hg,"trim");function Wg(t,n,o){if(t=re(t),t&&(o||n===e))return t.slice(0,fa(t)+1);if(!t||!(n=tt(n)))return t;var f=wt(t),l=ua(f,wt(n))+1;return lr(f,0,l).join("")}u(Wg,"trimEnd");function zg(t,n,o){if(t=re(t),t&&(o||n===e))return t.replace(So,"");if(!t||!(n=tt(n)))return t;var f=wt(t),l=sa(f,wt(n));return lr(f,l).join("")}u(zg,"trimStart");function Vg(t,n){var o=Ht,f=Gn;if(de(n)){var l="separator"in n?n.separator:l;o="length"in n?$(n.length):o,f="omission"in n?tt(n.omission):f}t=re(t);var d=t.length;if(Ur(t)){var _=wt(t);d=_.length}if(o>=d)return t;var g=o-Hr(f);if(g<1)return f;var w=_?lr(_,0,g).join(""):t.slice(0,g);if(l===e)return w+f;if(_&&(g+=w.length-g),Es(l)){if(t.slice(g).search(l)){var A,O=w;for(l.global||(l=Ho(l.source,re(Ou.exec(l))+"g")),l.lastIndex=0;A=l.exec(O);)var R=A.index;w=w.slice(0,R===e?g:R)}}else if(t.indexOf(tt(l),g)!=g){var P=w.lastIndexOf(l);P>-1&&(w=w.slice(0,P))}return w+f}u(Vg,"truncate");function $g(t){return t=re(t),t&&rh.test(t)?t.replace(Su,wp):t}u($g,"unescape");var Gg=Jr(function(t,n,o){return t+(o?" ":"")+n.toUpperCase()}),Cs=Za("toUpperCase");function jf(t,n,o){return t=re(t),n=o?e:n,n===e?_p(t)?Tp(t):sp(t):t.match(n)||[]}u(jf,"words");var Zf=J(function(t,n){try{return Qe(t,e,n)}catch(o){return Ss(o)?o:new W(o)}}),Jg=Jt(function(t,n){return ft(n,function(o){o=Pt(o),$t(t,o,xs(t[o],t))}),t});function Yg(t){var n=t==null?0:t.length,o=M();return t=n?he(t,function(f){if(typeof f[1]!="function")throw new ct(a);return[o(f[0]),f[1]]}):[],J(function(f){for(var l=-1;++l<n;){var d=t[l];if(Qe(d[0],this,f))return Qe(d[1],this,f)}})}u(Yg,"cond");function Kg(t){return wd(ht(t,x))}u(Kg,"conforms");function Bs(t){return function(){return t}}u(Bs,"constant");function jg(t,n){return t==null||t!==t?n:t}u(jg,"defaultTo");var Zg=Qa(),Xg=Qa(!0);function Ye(t){return t}u(Ye,"identity");function Ns(t){return Ba(typeof t=="function"?t:ht(t,x))}u(Ns,"iteratee");function Qg(t){return Ra(ht(t,x))}u(Qg,"matches");function em(t,n){return Ia(t,ht(n,x))}u(em,"matchesProperty");var tm=J(function(t,n){return function(o){return xn(o,t,n)}}),rm=J(function(t,n){return function(o){return xn(t,o,n)}});function Rs(t,n,o){var f=Ne(n),l=wi(n,f);o==null&&!(de(n)&&(l.length||!f.length))&&(o=n,n=t,t=this,l=wi(n,Ne(n)));var d=!(de(o)&&"chain"in o)||!!o.chain,_=Kt(t);return ft(l,function(g){var w=n[g];t[g]=w,_&&(t.prototype[g]=function(){var A=this.__chain__;if(d||A){var O=t(this.__wrapped__),R=O.__actions__=$e(this.__actions__);return R.push({func:w,args:arguments,thisArg:t}),O.__chain__=A,O}return w.apply(t,ir([this.value()],arguments))})}),t}u(Rs,"mixin");function nm(){return Be._===this&&(Be._=Bp),this}u(nm,"noConflict");function Is(){}u(Is,"noop");function im(t){return t=$(t),J(function(n){return Pa(n,t)})}u(im,"nthArg");var om=fs(he),sm=fs(ea),um=fs(Lo);function Xf(t){return ys(t)?ko(Pt(t)):Md(t)}u(Xf,"property");function am(t){return function(n){return t==null?e:Ar(t,n)}}u(am,"propertyOf");var fm=tf(),cm=tf(!0);function Ps(){return[]}u(Ps,"stubArray");function Ls(){return!1}u(Ls,"stubFalse");function lm(){return{}}u(lm,"stubObject");function hm(){return""}u(hm,"stubString");function pm(){return!0}u(pm,"stubTrue");function dm(t,n){if(t=$(t),t<1||t>rr)return[];var o=Nt,f=Me(t,Nt);n=M(n),t-=Nt;for(var l=Do(f,n);++o<t;)n(o);return l}u(dm,"times");function _m(t){return z(t)?he(t,Pt):rt(t)?[t]:$e(gf(re(t)))}u(_m,"toPath");function ym(t){var n=++Op;return re(t)+n}u(ym,"uniqueId");var vm=Ai(function(t,n){return t+n},0),gm=cs("ceil"),mm=Ai(function(t,n){return t/n},1),wm=cs("floor");function bm(t){return t&&t.length?mi(t,Ye,Ko):e}u(bm,"max");function xm(t,n){return t&&t.length?mi(t,M(n,2),Ko):e}u(xm,"maxBy");function Tm(t){return na(t,Ye)}u(Tm,"mean");function Sm(t,n){return na(t,M(n,2))}u(Sm,"meanBy");function Em(t){return t&&t.length?mi(t,Ye,Qo):e}u(Em,"min");function Am(t,n){return t&&t.length?mi(t,M(n,2),Qo):e}u(Am,"minBy");var Om=Ai(function(t,n){return t*n},1),Cm=cs("round"),Bm=Ai(function(t,n){return t-n},0);function Nm(t){return t&&t.length?Mo(t,Ye):0}u(Nm,"sum");function Rm(t,n){return t&&t.length?Mo(t,M(n,2)):0}return u(Rm,"sumBy"),p.after=Qy,p.ary=Bf,p.assign=Uv,p.assignIn=zf,p.assignInWith=qi,p.assignWith=Hv,p.at=Wv,p.before=Nf,p.bind=xs,p.bindAll=Jg,p.bindKey=Rf,p.castArray=lv,p.chain=Af,p.chunk=w_,p.compact=b_,p.concat=x_,p.cond=Yg,p.conforms=Kg,p.constant=Bs,p.countBy=Ny,p.create=zv,p.curry=If,p.curryRight=Pf,p.debounce=Lf,p.defaults=Vv,p.defaultsDeep=$v,p.defer=ev,p.delay=tv,p.difference=T_,p.differenceBy=S_,p.differenceWith=E_,p.drop=A_,p.dropRight=O_,p.dropRightWhile=C_,p.dropWhile=B_,p.fill=N_,p.filter=Iy,p.flatMap=ky,p.flatMapDeep=Fy,p.flatMapDepth=My,p.flatten=xf,p.flattenDeep=R_,p.flattenDepth=I_,p.flip=rv,p.flow=Zg,p.flowRight=Xg,p.fromPairs=P_,p.functions=Xv,p.functionsIn=Qv,p.groupBy=Dy,p.initial=k_,p.intersection=F_,p.intersectionBy=M_,p.intersectionWith=D_,p.invert=tg,p.invertBy=rg,p.invokeMap=Uy,p.iteratee=Ns,p.keyBy=Hy,p.keys=Ne,p.keysIn=Je,p.map=Pi,p.mapKeys=ig,p.mapValues=og,p.matches=Qg,p.matchesProperty=em,p.memoize=ki,p.merge=sg,p.mergeWith=Vf,p.method=tm,p.methodOf=rm,p.mixin=Rs,p.negate=Fi,p.nthArg=im,p.omit=ug,p.omitBy=ag,p.once=nv,p.orderBy=Wy,p.over=om,p.overArgs=iv,p.overEvery=sm,p.overSome=um,p.partial=Ts,p.partialRight=kf,p.partition=zy,p.pick=fg,p.pickBy=$f,p.property=Xf,p.propertyOf=am,p.pull=W_,p.pullAll=Sf,p.pullAllBy=z_,p.pullAllWith=V_,p.pullAt=$_,p.range=fm,p.rangeRight=cm,p.rearg=ov,p.reject=Gy,p.remove=G_,p.rest=sv,p.reverse=ws,p.sampleSize=Yy,p.set=lg,p.setWith=hg,p.shuffle=Ky,p.slice=J_,p.sortBy=Xy,p.sortedUniq=ey,p.sortedUniqBy=ty,p.split=kg,p.spread=uv,p.tail=ry,p.take=ny,p.takeRight=iy,p.takeRightWhile=oy,p.takeWhile=sy,p.tap=by,p.throttle=av,p.thru=Ii,p.toArray=Uf,p.toPairs=Gf,p.toPairsIn=Jf,p.toPath=_m,p.toPlainObject=Wf,p.transform=pg,p.unary=fv,p.union=uy,p.unionBy=ay,p.unionWith=fy,p.uniq=cy,p.uniqBy=ly,p.uniqWith=hy,p.unset=dg,p.unzip=bs,p.unzipWith=Ef,p.update=_g,p.updateWith=yg,p.values=jr,p.valuesIn=vg,p.without=py,p.words=jf,p.wrap=cv,p.xor=dy,p.xorBy=_y,p.xorWith=yy,p.zip=vy,p.zipObject=gy,p.zipObjectDeep=my,p.zipWith=wy,p.entries=Gf,p.entriesIn=Jf,p.extend=zf,p.extendWith=qi,Rs(p,p),p.add=vm,p.attempt=Zf,p.camelCase=bg,p.capitalize=Yf,p.ceil=gm,p.clamp=gg,p.clone=hv,p.cloneDeep=dv,p.cloneDeepWith=_v,p.cloneWith=pv,p.conformsTo=yv,p.deburr=Kf,p.defaultTo=jg,p.divide=mm,p.endsWith=xg,p.eq=xt,p.escape=Tg,p.escapeRegExp=Sg,p.every=Ry,p.find=Py,p.findIndex=wf,p.findKey=Gv,p.findLast=Ly,p.findLastIndex=bf,p.findLastKey=Jv,p.floor=wm,p.forEach=Of,p.forEachRight=Cf,p.forIn=Yv,p.forInRight=Kv,p.forOwn=jv,p.forOwnRight=Zv,p.get=As,p.gt=vv,p.gte=gv,p.has=eg,p.hasIn=Os,p.head=Tf,p.identity=Ye,p.includes=qy,p.indexOf=L_,p.inRange=mg,p.invoke=ng,p.isArguments=Br,p.isArray=z,p.isArrayBuffer=mv,p.isArrayLike=Ge,p.isArrayLikeObject=be,p.isBoolean=wv,p.isBuffer=hr,p.isDate=bv,p.isElement=xv,p.isEmpty=Tv,p.isEqual=Sv,p.isEqualWith=Ev,p.isError=Ss,p.isFinite=Av,p.isFunction=Kt,p.isInteger=Ff,p.isLength=Mi,p.isMap=Mf,p.isMatch=Ov,p.isMatchWith=Cv,p.isNaN=Bv,p.isNative=Nv,p.isNil=Iv,p.isNull=Rv,p.isNumber=Df,p.isObject=de,p.isObjectLike=ve,p.isPlainObject=Cn,p.isRegExp=Es,p.isSafeInteger=Pv,p.isSet=qf,p.isString=Di,p.isSymbol=rt,p.isTypedArray=Kr,p.isUndefined=Lv,p.isWeakMap=kv,p.isWeakSet=Fv,p.join=q_,p.kebabCase=Eg,p.last=dt,p.lastIndexOf=U_,p.lowerCase=Ag,p.lowerFirst=Og,p.lt=Mv,p.lte=Dv,p.max=bm,p.maxBy=xm,p.mean=Tm,p.meanBy=Sm,p.min=Em,p.minBy=Am,p.stubArray=Ps,p.stubFalse=Ls,p.stubObject=lm,p.stubString=hm,p.stubTrue=pm,p.multiply=Om,p.nth=H_,p.noConflict=nm,p.noop=Is,p.now=Li,p.pad=Cg,p.padEnd=Bg,p.padStart=Ng,p.parseInt=Rg,p.random=wg,p.reduce=Vy,p.reduceRight=$y,p.repeat=Ig,p.replace=Pg,p.result=cg,p.round=Cm,p.runInContext=m,p.sample=Jy,p.size=jy,p.snakeCase=Lg,p.some=Zy,p.sortedIndex=Y_,p.sortedIndexBy=K_,p.sortedIndexOf=j_,p.sortedLastIndex=Z_,p.sortedLastIndexBy=X_,p.sortedLastIndexOf=Q_,p.startCase=Fg,p.startsWith=Mg,p.subtract=Bm,p.sum=Nm,p.sumBy=Rm,p.template=Dg,p.times=dm,p.toFinite=jt,p.toInteger=$,p.toLength=Hf,p.toLower=qg,p.toNumber=_t,p.toSafeInteger=qv,p.toString=re,p.toUpper=Ug,p.trim=Hg,p.trimEnd=Wg,p.trimStart=zg,p.truncate=Vg,p.unescape=$g,p.uniqueId=ym,p.upperCase=Gg,p.upperFirst=Cs,p.each=Of,p.eachRight=Cf,p.first=Tf,Rs(p,function(){var t={};return Rt(p,function(n,o){ne.call(p.prototype,o)||(t[o]=n)}),t}(),{chain:!1}),p.VERSION=r,ft(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){p[t].placeholder=p}),ft(["drop","take"],function(t,n){Z.prototype[t]=function(o){o=o===e?1:Ae($(o),0);var f=this.__filtered__&&!n?new Z(this):this.clone();return f.__filtered__?f.__takeCount__=Me(o,f.__takeCount__):f.__views__.push({size:Me(o,Nt),type:t+(f.__dir__<0?"Right":"")}),f},Z.prototype[t+"Right"]=function(o){return this.reverse()[t](o).reverse()}}),ft(["filter","map","takeWhile"],function(t,n){var o=n+1,f=o==bu||o==Wl;Z.prototype[t]=function(l){var d=this.clone();return d.__iteratees__.push({iteratee:M(l,3),type:o}),d.__filtered__=d.__filtered__||f,d}}),ft(["head","last"],function(t,n){var o="take"+(n?"Right":"");Z.prototype[t]=function(){return this[o](1).value()[0]}}),ft(["initial","tail"],function(t,n){var o="drop"+(n?"":"Right");Z.prototype[t]=function(){return this.__filtered__?new Z(this):this[o](1)}}),Z.prototype.compact=function(){return this.filter(Ye)},Z.prototype.find=function(t){return this.filter(t).head()},Z.prototype.findLast=function(t){return this.reverse().find(t)},Z.prototype.invokeMap=J(function(t,n){return typeof t=="function"?new Z(this):this.map(function(o){return xn(o,t,n)})}),Z.prototype.reject=function(t){return this.filter(Fi(M(t)))},Z.prototype.slice=function(t,n){t=$(t);var o=this;return o.__filtered__&&(t>0||n<0)?new Z(o):(t<0?o=o.takeRight(-t):t&&(o=o.drop(t)),n!==e&&(n=$(n),o=n<0?o.dropRight(-n):o.take(n-t)),o)},Z.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Z.prototype.toArray=function(){return this.take(Nt)},Rt(Z.prototype,function(t,n){var o=/^(?:filter|find|map|reject)|While$/.test(n),f=/^(?:head|last)$/.test(n),l=p[f?"take"+(n=="last"?"Right":""):n],d=f||/^find/.test(n);l&&(p.prototype[n]=function(){var _=this.__wrapped__,g=f?[1]:arguments,w=_ instanceof Z,A=g[0],O=w||z(_),R=u(function(K){var X=l.apply(p,ir([K],g));return f&&P?X[0]:X},"interceptor");O&&o&&typeof A=="function"&&A.length!=1&&(w=O=!1);var P=this.__chain__,F=!!this.__actions__.length,D=d&&!P,G=w&&!F;if(!d&&O){_=G?_:new Z(this);var q=t.apply(_,g);return q.__actions__.push({func:Ii,args:[R],thisArg:e}),new lt(q,P)}return D&&G?t.apply(this,g):(q=this.thru(R),D?f?q.value()[0]:q.value():q)})}),ft(["pop","push","shift","sort","splice","unshift"],function(t){var n=ii[t],o=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",f=/^(?:pop|shift)$/.test(t);p.prototype[t]=function(){var l=arguments;if(f&&!this.__chain__){var d=this.value();return n.apply(z(d)?d:[],l)}return this[o](function(_){return n.apply(z(_)?_:[],l)})}}),Rt(Z.prototype,function(t,n){var o=p[n];if(o){var f=o.name+"";ne.call(Vr,f)||(Vr[f]=[]),Vr[f].push({name:n,func:o})}}),Vr[Ei(e,L).name]=[{name:"wrapper",func:e}],Z.prototype.clone=$p,Z.prototype.reverse=Gp,Z.prototype.value=Jp,p.prototype.at=xy,p.prototype.chain=Ty,p.prototype.commit=Sy,p.prototype.next=Ey,p.prototype.plant=Oy,p.prototype.reverse=Cy,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=By,p.prototype.first=p.prototype.head,_n&&(p.prototype[_n]=Ay),p},"runInContext"),sr=Sp();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Be._=sr,define(function(){return sr})):br?((br.exports=sr)._=sr,No._=sr):Be._=sr}).call(Zr)});var Hi=_e((rb,oc)=>{"use strict";var{dependencies:Lm}=St(),Ui,km=["properties","definitions","patternProperties"],Fm=["items","oneOf","allOf","anyOf","not"],ic=u((e,r=[])=>i=>{if(Ui=Lm.lodash,!Ui.isPlainObject(i))return i;let s=[...r,i.GUID],a=ic(e,s),c=nc(km,{...i},Mm(a)),h=nc(Fm,c,Dm(a));return e(h,s)},"mapJsonSchema"),Mm=u(e=>r=>Object.keys(r).reduce((i,s)=>({...i,[s]:e(r[s])}),{}),"mapProperties"),Dm=u(e=>r=>Ui.isArray(r)?r.map(e):Ui.isPlainObject(r)?e(r):r,"mapItems"),nc=u((e,r,i)=>e.reduce((s,a)=>s[a]?{...s,[a]:i(s[a])}:s,r),"applyTo");oc.exports=ic});var lc=_e((ib,cc)=>{"use strict";var{dependencies:sc}=St(),qm=Hi(),uc=["patternProperties","properties","items","allOf","oneOf","anyOf","not"],le,Um=u(e=>(le=sc.lodash,qm(le.flow([ac,Wm,zm]))(Zm(e))),"adaptJsonSchema"),Hm=u(e=>(le=sc.lodash,Nn(e)),"adaptJsonSchemaName"),ac=u(e=>{let r=e.type;return le.isArray(r)?Jm(e):r==="number"?$m(e):r==="integer"||r==="int"?Gm(e):e},"adaptType"),Wm=u(e=>!le.isArray(e.type)||le.first(e.type)!=="null"?e:{...e,default:null},"populateDefaultNullValuesForMultiple"),zm=u(e=>{let r=le.get(e,"required",[]);if(!le.isPlainObject(e.properties))return e;let i=e.$schema&&e.type==="object",s=Object.keys(e.properties);if(i&&s.length===1&&ks(e.properties[le.first(s)].type))return e;let a=s.reduce((c,h)=>{let y=e.properties[h];if(r.includes(h))return{...c,[h]:y};let v=Ym(y);if(y===v||!le.isArray(v.type))return{...c,[h]:y};if(r=r.filter(E=>E!==h),!v.type.find(ks))return{...c,[h]:v};let T=((v==null?void 0:v.type)||[]).includes("array")?"items":"properties";return{...c,[h]:{...le.omit(v,[...uc,"type"]),name:h,type:"choice",choice:"oneOf",[T]:((v==null?void 0:v.type)||[]).map(Vm(v,h))}}},{});return{...e,properties:a,required:r}},"handleEmptyDefaultInProperties"),Vm=u((e,r)=>i=>{let s=ks(i)?le.omit(e,i==="array"?["patternProperties","properties"]:"items"):le.omit(e,uc);return{type:"subschema",subschema:!0,properties:{[r]:{...s,type:i}}}},"getOneOfSubschema"),$m=u(e=>e.mode||e.logicalType?e:{...e,type:"bytes",subtype:"decimal"},"handleNumber"),Gm=u(e=>({...e,type:"number",mode:"int"}),"handleInt"),Jm=u(e=>{let{fieldData:r,types:i}=e.type.reduce(({fieldData:a,types:c},h,y)=>{let v={...a,type:h},x=ac(v);return c[y]=x.type,{fieldData:x,types:c}},{fieldData:e,types:e.type}),s=le.uniq(i);return s.length===1?r:{...r,type:s}},"adaptMultiple"),Ym=u(e=>{let r=!le.isUndefined(e.default)&&e.default!=="",s=le.isArray(e.type)?e.type:[e.type];return r||le.first(s)==="null"?e:{...e,default:null,type:le.uniq(["null",...s])}},"handleEmptyDefault"),ks=u(e=>["object","record","array","map"].includes(e),"isComplexType"),Km=u(e=>e.title?{...e,title:Nn(e.title)}:e,"adaptTitle"),jm=u(e=>le.isArray(e.required)?{...e,required:e.required.map(Nn)}:e,"adaptRequiredNames"),fc=u(e=>{if(!le.isPlainObject(e))return e;let r=["properties","definitions","patternProperties"],i=jm(e);return r.reduce((s,a)=>{let c=s[a];if(le.isEmpty(c))return s;let h=Object.keys(c).reduce((y,v)=>v==="$ref"?{...y,[v]:Xm(c[v])}:{...y,[Nn(v)]:fc(c[v])},{});return{...s,[a]:h}},i)},"adaptPropertiesNames"),Zm=u(e=>le.flow([Km,fc])(e),"adaptNames"),Xm=u(e=>{if(!le.isString(e))return e;let r=e.split("/"),i=le.last(r),s=Nn(i);return r.slice(0,-1).concat(s).join("/")},"convertReferenceName"),Nn=u(e=>le.isString(e)?e.replace(/[^A-Za-z0-9_]/g,"_"):e,"convertToValidAvroName");cc.exports={adaptJsonSchema:Um,adaptJsonSchemaName:Hm}});var Xr=_e((sb,pc)=>{"use strict";var{dependencies:hc}=St(),Qm=u(e=>e==null?void 0:e.split(".").slice(0,-1).join("."),"getNamespaceFromSchemaTopic"),e0=u(({name:e})=>hc.lodash.last((e||"").split(".")),"getName"),t0=u(({name:e,namespace:r,schemaTopic:i})=>(e||"").split(".").slice(0,-1).join(".")||r||Qm(i),"getNamespace"),r0="#emptyNamespace",n0=u(e=>hc.lodash.pick(e,["title","message","stack"]),"handleErrorObject");pc.exports={getName:e0,getNamespace:t0,EMPTY_NAMESPACE:r0,handleErrorObject:n0}});var yc=_e((cb,_c)=>{"use strict";var ab=rc(),{setDependencies:i0,dependencies:fb}=St(),dc=lc(),{handleErrorObject:o0}=Xr(),s0=u((e,r,i,s)=>{i0(s),r.log("info","Adaptation of JSON Schema started...","Adapt JSON Schema");try{let a=JSON.parse(e.jsonSchema),c=dc.adaptJsonSchema(a);r.log("info","Adaptation of JSON Schema finished.","Adapt JSON Schema"),i(null,{jsonSchema:JSON.stringify(c),jsonSchemaName:dc.adaptJsonSchemaName(e.jsonSchemaName)})}catch(a){i({...o0(a),title:"Adapt JSON Schema"})}},"adaptJsonSchema");_c.exports={adaptJsonSchema:s0}});var Wi=_e((hb,vc)=>{"use strict";var u0={"avro.java.string":"metaValueString","java-element":"metaValueElement","java-element-class":"metaValueElementClass","java-class":"metaValueClass","java-key-class":"metaValueKeyClass"},a0={"Confluent Schema Registry":"CONFLUENT_SCHEMA_REGISTRY","Azure Schema Registry":"AZURE_SCHEMA_REGISTRY","Pulsar Schema Registry":"PULSAR_SCHEMA_REGISTRY"},f0={CONFLUENT_SCHEMA_REGISTRY:"confluentSchemaRegistry",AZURE_SCHEMA_REGISTRY:"azureSchemaRegistry",PULSAR_SCHEMA_REGISTRY:"pulsarSchemaRegistry",SCHEMA_REGISTRY:"schemaRegistry",COMMON:"common"},c0=["type","doc","order","default","nullable"],l0=["string","boolean","bytes","null","array","record","enum","fixed","int","long","float","double","map"];vc.exports={META_VALUES_KEY_MAP:u0,SCRIPT_TYPES:f0,SCHEMA_REGISTRIES_KEYS:a0,GENERAL_ATTRIBUTES:c0,AVRO_TYPES:l0}});var Ds=_e((pb,mc)=>{"use strict";var{AVRO_TYPES:h0}=Wi(),{dependencies:p0}=St(),Vi={},zi={},d0=u((e,r)=>{zi=r,Vi=e||{};let i=_0();Object.keys(i).length&&(zi==null||zi.log("info",`Plugin custom properties:
${JSON.stringify(i,null,4)}`,"Custom Properties detected"))},"initPluginConfiguration"),_0=u(()=>{let e=Fs(gc());return h0.reduce((r,i)=>{let s=Fs(Ms(i));return s.length?{...r,[i]:s}:r},{...e.length&&{entity:e}})},"getCustomPropertiesConfigMap"),Fs=u(e=>e.filter(r=>r.includeInScript),"getCustomPropertiesConfig"),y0=u((e,r)=>e.filter(i=>!i.dependency||!(i.dependency.key&&i.dependency.value)?!0:r[i.dependency.key]===i.dependency.value),"filterConfigByDependency"),v0=u((e,r={})=>y0(Fs(e),r).map(i=>i.fieldKeyword),"getCustomPropertiesKeywords"),g0=u((e,r={})=>p0.lodash.pick(r,v0(e,r)),"getCustomProperties"),Ms=u(e=>{var i,s,a,c;if(Array.isArray(e))return e.flatMap(Ms);let r=((s=(i=Vi.fieldLevelConfig)==null?void 0:i.tabs)==null?void 0:s.filter(h=>h.customTab).flatMap(h=>{var y;return((y=h.structure)==null?void 0:y[e])||[]}))||[];return[...((c=(a=Vi.fieldLevelConfig)==null?void 0:a.structure)==null?void 0:c[e])||[],...r]},"getFieldLevelConfig"),gc=u(()=>{var e;return((e=Vi.entityLevelConfig)==null?void 0:e.flatMap(r=>(r==null?void 0:r.structure)||[]))||[]},"getEntityLevelConfig");mc.exports={initPluginConfiguration:d0,getCustomProperties:g0,getFieldLevelConfig:Ms,getEntityLevelConfig:gc}});var qs=_e((_b,bc)=>{"use strict";var{dependencies:m0}=St(),{GENERAL_ATTRIBUTES:w0}=Wi(),$i,wc=["avro.java.string","java-element","java-element-class","java-class","java-key-class"],b0=["record","fixed","enum"],x0={enum:["name","aliases","namespace","symbols","symbolDefault"],array:["items"],map:["values"],record:["name","aliases","namespace","fields"],fixed:["name","aliases","namespace","size","logicalType"],string:["logicalType"],bytes:["logicalType"],int:["logicalType"],long:["logicalType"]},T0=["precision","scale"],S0={bytes:["decimal"],int:["date","time-millis"],long:["time-micros","timestamp-millis","timestamp-micros","local-timestamp-millis","local-timestamp-micros"],fixed:["decimal","duration"],string:["uuid"]},E0=u(e=>b0.includes(e),"isNamedType"),A0=u((e,r)=>{var i;return $i=m0.lodash,$i.isArray(e)?e:((i=S0[e.type])!=null&&i.includes(e.logicalType)||(e=$i.omit(e,"logicalType")),$i.pick(e,[...x0[r]||[],...w0,...O0(r,e.logicalType),...wc]))},"filterAttributes"),O0=u((e,r)=>["bytes","fixed"].includes(e)&&r==="decimal"?T0:[],"getLogicalTypeAttributes"),C0=u(e=>wc.includes(e),"isMetaProperty");bc.exports={isNamedType:E0,filterAttributes:A0,isMetaProperty:C0}});var Tc=_e((vb,xc)=>{"use strict";var{dependencies:B0}=St(),{META_VALUES_KEY_MAP:N0}=Wi(),{isNamedType:R0,filterAttributes:I0,isMetaProperty:P0}=qs(),{getNamespace:L0,getName:k0}=Xr(),Nr,F0=u(({attributes:e={},type:r=""})=>{Nr=B0.lodash;let i=I0(e,r);return i=M0(i,r),i=D0(i,r),i=q0(i),i=U0(i),i=H0(i),i=W0(i),i},"getFieldAttributes"),M0=u((e,r)=>R0(r)?{...e,name:k0(e),namespace:L0(e)}:e,"setNamespace"),D0=u((e,r)=>!e.logicalType||!["fixed","bytes"].includes(r)?e:{...e,subtype:e.logicalType},"setSubtype"),q0=u(e=>Nr.has(e,"doc")?{...Nr.omit(e,"doc"),description:e.doc}:e,"setDescriptionFromDoc"),U0=u(e=>Nr.isBoolean(e.default)?{...e,default:e.default.toString()}:e,"convertDefaultValue"),H0=u(e=>!Nr.has(e,"size")||e.logicalType!=="duration"?e:{...Nr.omit(e,"size"),durationSize:e.size},"setDurationSize"),W0=u(e=>Object.keys(e).reduce((r,i)=>{if(!P0(i))return{...r,[i]:e[i]};let s=Nr.get(N0,i,"metaValue");return{...r,metaProps:[...r.metaProps||[],{metaKey:i,[s]:e[i]}]}},{}),"addMetaProperties");xc.exports=F0});var Cc=_e((mb,Oc)=>{"use strict";var{dependencies:Us}=St(),Sc=Hi(),{getNamespace:z0,getName:V0,EMPTY_NAMESPACE:Ec}=Xr(),Gi={[Ec]:[]},$0=u(e=>e.$ref?Hs(z0(e)||Ec,V0(e)):e,"resolveRootReference"),G0=u(()=>Object.keys(Gi).reduce((e,r)=>({...e,...Gi[r]}),{}),"getDefinitions"),J0=u((e,r)=>{let i=r.name;return Us.lodash.set(Gi,[e,i],r),{definitionName:i,$ref:i,name:i,namespace:e,...!Us.lodash.isUndefined(r.default)&&{default:r.default}}},"addDefinition"),Y0=u(e=>({...e,definitions:Us.lodash.pick(e.definitions,K0(e,Ac(e)))}),"filterUnusedDefinitions"),Ac=u((e,r=[])=>{let i=[];return Sc(s=>{if(!s.$ref||r.includes(s.definitionName))return s;let a=Hs(s.namespace,s.definitionName);if(!a)return s;let c=Ac(a,[...r,...i,s.definitionName]);return i=[...i,s.definitionName,...c],s})(e),i},"getUsedDefinitions"),K0=u((e,r)=>Object.keys(e.definitions).filter(i=>r.includes(i)),"sortDefinitionsNames"),j0=Sc(e=>e.$ref?Z0(e):e),Z0=u(({name:e,namespace:r,description:i,definitionName:s,$ref:a,nullable:c,subschema:h})=>Hs(r,s)?{name:e,description:i,$ref:`#/definitions/${s}`}:a.startsWith("#collection/")?{name:e,description:i,$ref:a,nullable:c,subschema:h}:{name:e,description:i,$ref:a,hackoladeMeta:{restrictExternalReferenceCreation:!0},type:"reference"},"updateRef"),Hs=u((e,r)=>{var i;return(i=Gi[e])==null?void 0:i[r]},"findDefinition"),X0=u((e,r)=>!e.fields&&!r&&Object.keys(e).some(i=>!isNaN(parseInt(i))),"isBareUnionSchema");Oc.exports={addDefinition:J0,resolveRootReference:$0,getDefinitions:G0,filterUnusedDefinitions:Y0,updateRefs:j0,isBareUnionSchema:X0}});var qc=_e((bb,Dc)=>{"use strict";var{dependencies:Q0}=St(),{isNamedType:ew}=qs(),Qr=Tc(),{getNamespace:tw,getName:Bc,EMPTY_NAMESPACE:Nc}=Xr(),{addDefinition:zs,resolveRootReference:rw,getDefinitions:nw,filterUnusedDefinitions:iw,updateRefs:ow,isBareUnionSchema:sw}=Cc(),{getEntityLevelConfig:uw,getFieldLevelConfig:Rc,getCustomProperties:Vs}=Ds(),Ic="New_field",aw=["string","bytes","boolean","null","enum","fixed","int","long","float","double"],fw=["int","long","float","double"],ie,Pc=[],cw=u(e=>{ie=Q0.lodash,Pc=e.references||[];let r=Rr({schema:e}),i=ie.isArray(r)?r:[r];return(ie.isArray(r.type)?r.type:i).map((a,c)=>{let h=ie.isArray(e)?e[c]:e,y=Vs(uw(),h);return ie.flow([rw,Cw(y),iw,ow,Bw])(a)})},"convertToJsonSchemas"),Rr=u(({schema:e,namespace:r=Nc,avroFieldAttributes:i={}})=>{e=lw(e);let s=Qr({attributes:i});if(ie.isArray(e))return kc(r,e);if(!ie.isObject(e)&&!ie.isString(e))return;let a=ie.isString(e)?e:e.type,c=Ws(ie.isString(e)?{}:e,s==null?void 0:s.default),h=Lc(r,a,Qr({attributes:c,type:a}));if(sw(e,a)){if(yw(e))return hw(r,e);if(vw(e))return pw(r,e)}if(!ew(a))return h;let y={...h,...Vs(Rc(h.type),i)};return zs(c.namespace||r,Ws(y,s==null?void 0:s.default))},"convertSchema"),Ws=u((e,r)=>({...e,...r&&{default:e.default||r}}),"setDefaultValue"),lw=u(e=>(e==null?void 0:e.type)!=="enum"?e:{...ie.omit(e,"default"),symbolDefault:e.default},"setSymbolDefault"),Lc=u((e,r,i)=>{let s=i.namespace||e;if(ie.isArray(r))return kc(s,r);if(Lw(r))return gw(r,i);if(r==="enum")return mw(i);if(Mc(r))return ww(r,i);switch(r){case"fixed":return xw(i);case"map":return bw(s,i);case"record":return Tw(s,i);case"array":return Ew(s,i);default:return Fc(s,r,i)}},"convertType"),hw=u((e,r)=>{let i="record",s=((r==null?void 0:r.schemaTopic)||(r==null?void 0:r.confluentSubjectName)||"").split("."),[a]=s.slice(-1),h=s.slice(0,-1).join(".")||e||Nc,y=Object.fromEntries(Object.entries(r).filter(([N,I])=>isNaN(parseInt(N)))),v=r.references.map(({name:N})=>Fc(h,N,{})),x={...y,name:a,type:i,namespace:h,fields:[{type:v}]},T=Qr({attributes:x,type:i}),E=(T.fields||[]).map(N=>Rw(N)),B={...ie.omit(T,"fields"),type:i,properties:Yi(E),required:Ji(E)};return zs(h,Ws(B,{}))},"convertBareUnionSchemaWithReferences"),pw=u((e,r)=>{let i="record",a=((r==null?void 0:r.schemaTopic)||(r==null?void 0:r.confluentSubjectName)||"").split(".").slice(0,-1).join(".")??e;return Object.keys(r).filter(h=>!isNaN(parseInt(h))).map(h=>{let y=Qr({attributes:r[h],type:i}),v=Lc(e,i,Qr({attributes:y,type:i}));return zs(a,v)})},"convertBareUnionSchemaWithRecordDefinitions"),dw=u(e=>ie.isString(e)&&$s(e),"isReferenceUnionOption"),_w=u(e=>ie.isObject(e)&&e.type==="record","isRecordDefinitionUnionOption"),yw=u(e=>Object.keys(e).filter(i=>!isNaN(parseInt(i))).every(i=>dw(e[i])),"bareUnionSchemaIncludesOnlyReferences"),vw=u(e=>Object.keys(e).filter(i=>!isNaN(parseInt(i))).every(i=>_w(e[i])),"bareUnionSchemaIncludesOnlyDefinitionRecords"),kc=u((e,r)=>{if(r.length===1)return Rr({schema:ie.first(r),namespace:e});if(Aw(r)){let[i,s]=r;return{...Rr({schema:s,namespace:e}),nullable:!0}}return{type:r.map(i=>Rr({schema:i,namespace:e}))}},"convertUnion"),gw=u((e,r)=>({...r,type:"number",mode:e}),"convertNumeric"),mw=u(e=>({...e,type:"enum"}),"convertEnum"),ww=u((e,r)=>({...r,type:e}),"convertPrimitive"),bw=u((e,r)=>{let i=Gs([{...Rr({schema:r.values,namespace:e}),name:"schema"}]);return{...ie.omit(r,"values"),type:"map",subtype:Iw(r.values),properties:Yi(i),required:Ji(i)}},"convertMap"),xw=u(e=>({...e,type:"fixed"}),"convertFixed"),Tw=u((e,r)=>{let i=Gs((r.fields||[]).map(Sw(e)));return{...ie.omit(r,"fields"),type:"record",properties:Yi(i),required:Ji(i)}},"convertRecord"),Sw=u(e=>r=>{let i=Rr({schema:r.type,namespace:e,avroFieldAttributes:r}),s=ie.isArray(i.type)?i.type.map(({type:h})=>h):i.type,a=Vs(Rc(s),r),c=Qr({attributes:r});return c=i.nullable?ie.omit(c,"default"):c,{...ie.omit(c,"type"),...a,...i,name:r.name}},"convertField"),Ew=u((e,r)=>{let i=Rr({schema:r.items,namespace:e})||[],s=Gs(ie.isArray(i)?i:[i]),[a,c]=ie.partition(s,h=>h.type==="choice");return{...r,type:"array",items:c,properties:Yi(a),required:Ji(s)}},"convertArray"),Fc=u((e,r,i)=>{let s=Bc({name:r}),a=(r||"").split(".").length>1,c=$s(s)||a?`#collection/definitions/${s}`:r;return{...i,$ref:c,definitionName:s,name:s,namespace:tw({name:r,namespace:e})}},"convertUserDefinedType"),$s=u(e=>ie.isString(e)&&(!!Pc.find(r=>r.name===e)||(e||"").split(".").length>1),"isCollectionReference"),Aw=u(e=>e[0]==="null"&&$s(e[1]),"isNullableCollectionReference"),Gs=u(e=>e.map(r=>ie.isArray(r.type)?kw(r.type)?Nw(r):Ow(r):r),"handleMultipleFields"),Ow=u(e=>{let r=e.type.reduce((i,s)=>({...i,...s,type:[...i.type||[],s.type]}),{});return{...e,...r,name:e.name}},"mergeMultipleFieldProperties"),Cw=u(e=>r=>({...r,type:"object",$schema:"http://json-schema.org/draft-04/schema#",definitions:nw(),...e}),"setSchemaRootAttributes"),Bw=u(e=>ie.omit({...e,title:Bc(e)},["namespace","name"]),"setSchemaName"),Nw=u(e=>({...e,type:"choice",choice:"oneOf",items:e.type.map(r=>({type:"record",subschema:!0,properties:{[e.name||Ic]:ie.omit(r,"name")}}))}),"getOneOf"),Rw=u(e=>({...e,type:"choice",choice:"oneOf",items:e.type.map(r=>({...r,type:"record",subschema:!0}))}),"getBareUnionSchemaOneOf"),Iw=u(e=>ie.isString(e)?`map<${e}>`:"","getMapSubtype"),Ji=u(e=>e.filter(Pw).map(r=>r.name).filter(Boolean),"getRequired"),Pw=u(e=>ie.isUndefined(e.default),"isRequired"),Mc=u(e=>aw.includes(e),"isPrimitiveType"),Lw=u(e=>fw.includes(e),"isNumericType"),kw=u(e=>e.some(r=>!Mc(r.mode||r.type)),"hasComplexType"),Yi=u(e=>e.reduce((r,i)=>({...r,[i.name||Ic]:i}),{}),"convertArrayToJsonSchemaObject");Dc.exports=cw});var en=_e((Tb,Wc)=>{"use strict";var Fw=require("crypto"),Mw=require("util"),Dw=new Hc(4096);function Uc(e){return e.charAt(0).toUpperCase()+e.slice(1)}u(Uc,"capitalize");function qw(e,r){return e===r?0:e<r?-1:1}u(qw,"compare");function Uw(e,r,i){var s=e[r];return s===void 0?i:s}u(Uw,"getOption");function Hw(e,r){r=r||"md5";var i=Fw.createHash(r);return i.end(e),i.read()}u(Hw,"getHash");function Ww(e,r){var i=-1,s,a;if(!e)return-1;for(s=0,a=e.length;s<a;s++)if(e[s]===r){if(i>=0)return-2;i=s}return i}u(Ww,"singleIndexOf");function zw(e,r){var i={},s,a;for(s=0;s<e.length;s++)a=e[s],i[r(a)]=a;return i}u(zw,"toMap");function Vw(e){return Object.keys(e).map(function(r){return e[r]})}u(Vw,"objectValues");function $w(e,r){var i={},s,a,c;for(s=0,a=e.length;s<a;s++){if(c=e[s],r&&(c=r(c)),i[c])return!0;i[c]=!0}return!1}u($w,"hasDuplicates");function Gw(e,r,i){var s=Object.getOwnPropertyNames(e),a,c,h;for(a=0,c=s.length;a<c;a++)if(h=s[a],!r.hasOwnProperty(h)||i){var y=Object.getOwnPropertyDescriptor(e,h);Object.defineProperty(r,h,y)}return r}u(Gw,"copyOwnProperties");function Jw(e,r){r=r|0;var i=e.charAt(r++);if(/[\d-]/.test(i)){for(;/[eE\d.+-]/.test(e.charAt(r));)r++;return r}else{if(/true|null/.test(e.slice(r-1,r+3)))return r+3;if(/false/.test(e.slice(r-1,r+4)))return r+4}var s=0,a=!1;do switch(i){case"{":case"[":a||s++;break;case"}":case"]":if(!a&&!--s)return r;break;case'"':if(a=!a,!s&&!a)return r;break;case"\\":r++}while(i=e.charAt(r++));return-1}u(Jw,"jsonEnd");function Yw(){throw new Error("abstract")}u(Yw,"abstractFunction");function Kw(e,r){var i=e.prototype,s,a,c,h;for(s=0,a=r.length;s<a;s++)c=r[s],h="get"+Uc(c),i[h]=Mw.deprecate(y(c),"use `."+c+"` instead of `."+h+"()`");function y(v){return function(){var x=this[v];return typeof x=="function"?x.apply(this,arguments):x}}u(y,"createGetter")}u(Kw,"addDeprecatedGetters");function Hc(e){this._len=e|0,this._pos=0,this._slab=new Buffer(this._len)}u(Hc,"BufferPool");Hc.prototype.alloc=function(e){var r=this._len;return e>r?new Buffer(e):(this._pos+e>r&&(this._slab=new Buffer(r),this._pos=0),this._slab.slice(this._pos,this._pos+=e))};function Ir(e){var r=1103515245,i=12345,s=Math.pow(2,31),a=Math.floor(e||Math.random()*(s-1));this._max=s,this._nextInt=function(){return a=(r*a+i)%s}}u(Ir,"Lcg");Ir.prototype.nextBoolean=function(){return!!(this._nextInt()%2)};Ir.prototype.nextInt=function(e,r){return r===void 0&&(r=e,e=0),r=r===void 0?this._max:r,e+Math.floor(this.nextFloat()*(r-e))};Ir.prototype.nextFloat=function(e,r){return r===void 0&&(r=e,e=0),r=r===void 0?1:r,e+(r-e)*this._nextInt()/this._max};Ir.prototype.nextString=function(e,r){e|=0,r=r||"aA";var i="";r.indexOf("a")>-1&&(i+="abcdefghijklmnopqrstuvwxyz"),r.indexOf("A")>-1&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),r.indexOf("#")>-1&&(i+="0123456789"),r.indexOf("!")>-1&&(i+="~`!@#$%^&*()_+-={}[]:\";'<>?,./|\\");for(var s=[],a=0;a<e;a++)s.push(this.choice(i));return s.join("")};Ir.prototype.nextBuffer=function(e){var r=[],i;for(i=0;i<e;i++)r.push(this.nextInt(256));return new Buffer(r)};Ir.prototype.choice=function(e){var r=e.length;if(!r)throw new Error("choosing from empty array");return e[this.nextInt(r)]};function Ys(){this._index=0,this._items=[]}u(Ys,"OrderedQueue");Ys.prototype.push=function(e){var r=this._items,i=r.length|0,s;for(r.push(e);i>0&&r[i].index<r[s=i-1>>1].index;)e=r[i],r[i]=r[s],r[s]=e,i=s};Ys.prototype.pop=function(){var e=this._items,r=e.length-1|0,i=e[0];if(!i||i.index>this._index)return null;if(this._index++,!r)return e.pop(),i;e[0]=e.pop();for(var s=r>>1,a=0,c,h,y,v,x,T,E;a<s&&(v=e[a],c=(a<<1)+1,h=a+1<<1,T=e[c],E=e[h],!E||T.index<=E.index?(x=T,y=c):(x=E,y=h),!(x.index>=v.index));)e[y]=v,e[a]=x,a=y;return i};function V(e,r){if(this.buf=e,this.pos=r|0,this.pos<0)throw new Error("negative offset")}u(V,"Tap");V.prototype.isValid=function(){return this.pos<=this.buf.length};V.prototype.readBoolean=function(){return!!this.buf[this.pos++]};V.prototype.skipBoolean=function(){this.pos++};V.prototype.writeBoolean=function(e){this.buf[this.pos++]=!!e};V.prototype.readInt=V.prototype.readLong=function(){var e=0,r=0,i=this.buf,s,a,c,h;do s=i[this.pos++],a=s&128,e|=(s&127)<<r,r+=7;while(a&&r<28);if(a){c=e,h=268435456;do s=i[this.pos++],c+=(s&127)*h,h*=128;while(s&128);return(c%2?-(c+1):c)/2}return e>>1^-(e&1)};V.prototype.skipInt=V.prototype.skipLong=function(){for(var e=this.buf;e[this.pos++]&128;);};V.prototype.writeInt=V.prototype.writeLong=function(e){var r=this.buf,i,s;if(e>=-1073741824&&e<1073741824){s=e>=0?e<<1:~e<<1|1;do r[this.pos]=s&127,s>>=7;while(s&&(r[this.pos++]|=128))}else{i=e>=0?e*2:-e*2-1;do r[this.pos]=i&127,i/=128;while(i>=1&&(r[this.pos++]|=128))}this.pos++};V.prototype.readFloat=function(){var e=this.buf,r=this.pos;if(this.pos+=4,!(this.pos>e.length))return this.buf.readFloatLE(r)};V.prototype.skipFloat=function(){this.pos+=4};V.prototype.writeFloat=function(e){var r=this.buf,i=this.pos;if(this.pos+=4,!(this.pos>r.length))return this.buf.writeFloatLE(e,i)};V.prototype.readDouble=function(){var e=this.buf,r=this.pos;if(this.pos+=8,!(this.pos>e.length))return this.buf.readDoubleLE(r)};V.prototype.skipDouble=function(){this.pos+=8};V.prototype.writeDouble=function(e){var r=this.buf,i=this.pos;if(this.pos+=8,!(this.pos>r.length))return this.buf.writeDoubleLE(e,i)};V.prototype.readFixed=function(e){var r=this.pos;if(this.pos+=e,!(this.pos>this.buf.length)){var i=Dw.alloc(e);return this.buf.copy(i,0,r,r+e),i}};V.prototype.skipFixed=function(e){this.pos+=e};V.prototype.writeFixed=function(e,r){r=r||e.length;var i=this.pos;this.pos+=r,!(this.pos>this.buf.length)&&e.copy(this.buf,i,0,r)};V.prototype.readBytes=function(){return this.readFixed(this.readLong())};V.prototype.skipBytes=function(){var e=this.readLong();this.pos+=e};V.prototype.writeBytes=function(e){var r=e.length;this.writeLong(r),this.writeFixed(e,r)};typeof Buffer.prototype.utf8Slice=="function"?V.prototype.readString=function(){var e=this.readLong(),r=this.pos,i=this.buf;if(this.pos+=e,!(this.pos>i.length))return this.buf.utf8Slice(r,r+e)}:V.prototype.readString=function(){var e=this.readLong(),r=this.pos,i=this.buf;if(this.pos+=e,!(this.pos>i.length))return this.buf.slice(r,r+e).toString()};V.prototype.skipString=function(){var e=this.readLong();this.pos+=e};V.prototype.writeString=function(e){var r=Buffer.byteLength(e),i=this.buf;this.writeLong(r);var s=this.pos;if(this.pos+=r,!(this.pos>i.length))if(r>64)this._writeUtf8(e,r);else{var a,c,h,y;for(a=0,c=r;a<c;a++)h=e.charCodeAt(a),h<128?i[s++]=h:h<2048?(i[s++]=h>>6|192,i[s++]=h&63|128):(h&64512)===55296&&((y=e.charCodeAt(a+1))&64512)===56320?(h=65536+((h&1023)<<10)+(y&1023),a++,i[s++]=h>>18|240,i[s++]=h>>12&63|128,i[s++]=h>>6&63|128,i[s++]=h&63|128):(i[s++]=h>>12|224,i[s++]=h>>6&63|128,i[s++]=h&63|128)}};typeof Buffer.prototype.utf8Write=="function"?V.prototype._writeUtf8=function(e,r){this.buf.utf8Write(e,this.pos-r,r)}:V.prototype._writeUtf8=function(e,r){this.buf.write(e,this.pos-r,r,"utf8")};typeof Buffer.prototype.latin1Write=="function"?V.prototype.writeBinary=function(e,r){var i=this.pos;this.pos+=r,!(this.pos>this.buf.length)&&this.buf.latin1Write(e,i,r)}:typeof Buffer.prototype.binaryWrite=="function"?V.prototype.writeBinary=function(e,r){var i=this.pos;this.pos+=r,!(this.pos>this.buf.length)&&this.buf.binaryWrite(e,i,r)}:V.prototype.writeBinary=function(e,r){var i=this.pos;this.pos+=r,!(this.pos>this.buf.length)&&this.buf.write(e,i,r,"binary")};V.prototype.matchBoolean=function(e){return this.buf[this.pos++]-e.buf[e.pos++]};V.prototype.matchInt=V.prototype.matchLong=function(e){var r=this.readLong(),i=e.readLong();return r===i?0:r<i?-1:1};V.prototype.matchFloat=function(e){var r=this.readFloat(),i=e.readFloat();return r===i?0:r<i?-1:1};V.prototype.matchDouble=function(e){var r=this.readDouble(),i=e.readDouble();return r===i?0:r<i?-1:1};V.prototype.matchFixed=function(e,r){return this.readFixed(r).compare(e.readFixed(r))};V.prototype.matchBytes=V.prototype.matchString=function(e){var r=this.readLong(),i=this.pos;this.pos+=r;var s=e.readLong(),a=e.pos;e.pos+=s;var c=this.buf.slice(i,this.pos),h=e.buf.slice(a,e.pos);return c.compare(h)};V.prototype.unpackLongBytes=function(){var e=new Buffer(8),r=0,i=0,s=6,a=this.buf,c,h;for(c=a[this.pos++],h=c&1,e.fill(0),r|=(c&127)>>1;c&128;)c=a[this.pos++],r|=(c&127)<<s,s+=7,s>=8&&(s-=8,e[i++]=r,r>>=8);return e[i]=r,h&&Js(e,8),e};V.prototype.packLongBytes=function(e){var r=(e[7]&128)>>7,i=this.buf,s=1,a=0,c=3,h;r?(Js(e,8),h=1):h=0;for(var y=[e.readUIntLE(0,3),e.readUIntLE(3,3),e.readUIntLE(6,2)];c&&!y[--c];);for(;a<c;)for(h|=y[a++]<<s,s+=24;s>7;)i[this.pos++]=h&127|128,h>>=7,s-=7;h|=y[c]<<s;do i[this.pos]=h&127,h>>=7;while(h&&(i[this.pos++]|=128));this.pos++,r&&Js(e,8)};function Js(e,r){for(;r--;)e[r]=~e[r]}u(Js,"invert");Wc.exports={abstractFunction:Yw,addDeprecatedGetters:Kw,capitalize:Uc,copyOwnProperties:Gw,getHash:Hw,compare:qw,getOption:Uw,jsonEnd:Jw,objectValues:Vw,toMap:zw,singleIndexOf:Ww,hasDuplicates:$w,Lcg:Ir,OrderedQueue:Ys,Tap:V}});var Qi=_e((Eb,Yc)=>{"use strict";var Q=en(),zc=require("buffer"),me=require("util"),Lr=Q.Tap,Ks=me.debuglog("avsc:types"),Y=me.format,Ki={array:Xe,boolean:Qt,bytes:st,double:kt,enum:je,error:ge,fixed:Ze,float:Lt,int:er,long:ot,map:ze,null:yt,record:ge,string:Et},jw=/^[A-Za-z_][A-Za-z0-9_]*$/,Le=new Q.Lcg,Pr=new Lr(new zc.SlowBuffer(1024)),pr=null,tn=[];function C(e,r){var i;if(pr?(i=pr,tn.push([pr,this]),pr=null):i=this,this._hash=new Zw,this.name=void 0,this.aliases=void 0,this.doc=e&&e.doc?""+e.doc:void 0,e){var s=e.name,a=e.namespace===void 0?r&&r.namespace:e.namespace;if(s!==void 0){if(s=ji(s,a),rn(s))throw new Error(Y("cannot rename primitive type: %j",s));var c=r&&r.registry;if(c){if(c[s]!==void 0)throw new Error(Y("duplicate type name: %s",s));c[s]=i}}else if(r&&r.noAnonymousTypes)throw new Error(Y("missing name property in schema: %j",e));this.name=s,this.aliases=e.aliases?e.aliases.map(function(h){return ji(h,a)}):[]}}u(C,"Type");C.forSchema=function(e,r){r=r||{},r.registry=r.registry||{};var i=function(v){switch(v===!0?v="always":v===!1?v="never":v===void 0?v="auto":typeof v=="string"&&(v=v.toLowerCase()),v){case"always":return vt;case"never":return Ke;case"auto":return;default:throw new Error(Y("invalid wrap unions option: %j",v))}}(r.wrapUnions);if(e===null)throw new Error('invalid type: null (did you mean "null"?)');if(C.isType(e))return e;var s;if(r.typeHook&&(s=r.typeHook(e,r))){if(!C.isType(s))throw new Error(Y("invalid typehook return value: %j",s));return s}if(typeof e=="string"){if(e=ji(e,r.namespace),s=r.registry[e],s)return s;if(rn(e))return r.registry[e]=C.forSchema({type:e},r);throw new Error(Y("undefined type name: %s",e))}if(e.logicalType&&r.logicalTypes&&!pr){var a=r.logicalTypes[e.logicalType];if(a){var c=r.namespace,h={};Object.keys(r.registry).forEach(function(v){h[v]=r.registry[v]});try{return Ks("instantiating logical type for %s",e.logicalType),new a(e,r)}catch(v){if(Ks("failed to instantiate logical type for %s",e.logicalType),r.assertLogicalTypes)throw v;pr=null,r.namespace=c,r.registry=h}}}if(Array.isArray(e)){var y=e.map(function(v){return C.forSchema(v,r)});i||(i=Xw(y)?vt:Ke),s=new i(y,r)}else s=function(v){var x=Ki[v];if(x===void 0)throw new Error(Y("unknown type: %j",v));return new x(e,r)}(e.type);return s};C.forValue=function(e,r){if(r=r||{},r.emptyArrayType=r.emptyArrayType||C.forSchema({type:"array",items:"null"}),r.valueHook){var i=r.valueHook(e,r);if(i!==void 0){if(!C.isType(i))throw new Error(Y("invalid value hook return value: %j",i));return i}}switch(typeof e){case"string":return C.forSchema("string",r);case"boolean":return C.forSchema("boolean",r);case"number":return(e|0)===e?C.forSchema("int",r):Math.abs(e)<9007199254740991?C.forSchema("float",r):C.forSchema("double",r);case"object":if(e===null)return C.forSchema("null",r);if(Array.isArray(e))return e.length?C.forSchema({type:"array",items:C.forTypes(e.map(function(a){return C.forValue(a,r)}))},r):r.emptyArrayType;if(Buffer.isBuffer(e))return C.forSchema("bytes",r);var s=Object.keys(e);return s.some(function(a){return!Rn(a)})?C.forSchema({type:"map",values:C.forTypes(s.map(function(a){return C.forValue(e[a],r)}),r)},r):C.forSchema({type:"record",fields:s.map(function(a){return{name:a,type:C.forValue(e[a],r)}})},r);default:throw new Error(Y("cannot infer type from: %j",e))}};C.forTypes=function(e,r){if(!e.length)throw new Error("no types to combine");if(e.length===1)return e[0];r=r||{};var i=[],s=0,a=!0;if(e.forEach(function(E){switch(E.typeName){case"union:unwrapped":a=!1,i=i.concat(E.types);break;case"union:wrapped":s++,i=i.concat(E.types);break;case"null":i.push(E);break;default:a=!1,i.push(E)}}),s){if(!a)throw new Error("cannot combine wrapped union");var c={};i.forEach(function(E){var B=E.branchName,N=c[B];if(!N)c[B]=E;else if(!E.equals(N))throw new Error("inconsistent branch type")});var h=r.wrapUnions,y;r.wrapUnions=!0;try{y=C.forSchema(Object.keys(c).map(function(E){return c[E]}),r)}catch(E){throw r.wrapUnions=h,E}return r.wrapUnions=h,y}var v={};i.forEach(function(E){var B=Xi(E),N=v[B];N||(v[B]=N=[]),N.push(E)});var x=Object.keys(v),T=x.map(function(E){var B=v[E];if(B.length===1)return B[0];switch(E){case"null":case"boolean":return B[0];case"number":return Qw(B);case"string":return e1(B,r);case"buffer":return t1(B,r);case"array":return B=B.filter(function(N){return N!==r.emptyArrayType}),B.length?C.forSchema({type:"array",items:C.forTypes(B.map(function(N){return N.itemsType}))},r):r.emptyArrayType;default:return r1(B,r)}});return T.length===1?T[0]:C.forSchema(T,r)};C.isType=function(){var e=arguments.length;if(!e)return!1;var r=arguments[0];if(!r||typeof r._update!="function"||typeof r.fingerprint!="function")return!1;if(e===1)return!0;var i=r.typeName,s;for(s=1;s<e;s++)if(i.indexOf(arguments[s])===0)return!0;return!1};C.__reset=function(e){Ks("resetting type buffer to %d",e),Pr.buf=new zc.SlowBuffer(e)};Object.defineProperty(C.prototype,"branchName",{enumerable:!0,get:function(){if(this.name)return this.name;var e=C.isType(this,"logical")?this.underlyingType:this;return C.isType(e,"abstract")?e._concreteTypeName:C.isType(e,"union")?void 0:e.typeName}});C.prototype.clone=function(e,r){return r?(r={coerce:!!r.coerceBuffers|0,fieldHook:r.fieldHook,qualifyNames:!!r.qualifyNames,skip:!!r.skipMissingFields,wrap:!!r.wrapUnions|0},this._copy(e,r)):this.fromBuffer(this.toBuffer(e))};C.prototype.compare=Q.abstractFunction;C.prototype.compareBuffers=function(e,r){return this._match(new Lr(e),new Lr(r))};C.prototype.createResolver=function(e,r){if(!C.isType(e))throw new Error(Y("not a type: %j",e));if(!C.isType(this,"union","logical")&&C.isType(e,"logical"))return this.createResolver(e.underlyingType,r);r=r||{},r.registry=r.registry||{};var i,s;if(C.isType(this,"record","error")&&C.isType(e,"record","error")&&(s=this.name+":"+e.name,i=r.registry[s],i))return i;if(i=new Zs(this),s&&(r.registry[s]=i),C.isType(e,"union")){var a=e.types.map(function(c){return this.createResolver(c,r)},this);i._read=function(c){var h=c.readLong(),y=a[h];if(y===void 0)throw new Error(Y("invalid union index: %s",h));return a[h]._read(c)}}else this._update(i,e,r);if(!i._read)throw new Error(Y("cannot read %s as %s",e,this));return Object.freeze(i)};C.prototype.decode=function(e,r,i){var s=new Lr(e,r),a=Vc(this,s,i);return s.isValid()?{value:a,offset:s.pos}:{value:void 0,offset:-1}};C.prototype.encode=function(e,r,i){var s=new Lr(r,i);return this._write(s,e),s.isValid()?s.pos:r.length-s.pos};C.prototype.equals=function(e){return C.isType(e)&&this.fingerprint().equals(e.fingerprint())};C.prototype.fingerprint=function(e){if(e)return Q.getHash(JSON.stringify(this.schema()),e);if(!this._hash.str){var r=JSON.stringify(this.schema());this._hash.str=Q.getHash(r).toString("binary")}return new Buffer(this._hash.str,"binary")};C.prototype.fromBuffer=function(e,r,i){var s=new Lr(e),a=Vc(this,s,r,i);if(!s.isValid())throw new Error("truncated buffer");if(!i&&s.pos<e.length)throw new Error("trailing data");return a};C.prototype.fromString=function(e){return this._copy(JSON.parse(e),{coerce:2})};C.prototype.inspect=function(){var e=this.typeName,r=$c(e);if(rn(e))return Y("<%s>",r);var i=this.schema({exportAttrs:!0,noDeref:!0});return typeof i=="object"&&!C.isType(this,"logical")&&(i.type=void 0),Y("<%s %j>",r,i)};C.prototype.isValid=function(e,r){var i=(r&&r.noUndeclaredFields)|0,s=r&&r.errorHook,a,c;return s&&(c=[],a=u(function(h,y){s.call(this,c.slice(),h,y,e)},"hook")),this._check(e,i,a,c)};C.prototype.random=Q.abstractFunction;C.prototype.schema=function(e){return this._attrs({exportAttrs:!!(e&&e.exportAttrs),noDeref:!!(e&&e.noDeref)})};C.prototype.toBuffer=function(e){Pr.pos=0,this._write(Pr,e);var r=new Buffer(Pr.pos);return Pr.isValid()?Pr.buf.copy(r,0,0,Pr.pos):this._write(new Lr(r),e),r};C.prototype.toJSON=function(){return this.schema({exportAttrs:!0})};C.prototype.toString=function(e){return JSON.stringify(e===void 0?this.schema({noDeref:!0}):this._copy(e,{coerce:3}))};C.prototype.wrap=function(e){var r=this._branchConstructor;return r===null?null:new r(e)};C.prototype._attrs=function(e){e.derefed=e.derefed||{};var r=this.name;if(r!==void 0){if(e.noDeref||e.derefed[r])return r;e.derefed[r]=!0}var i={};this.name!==void 0&&(i.name=r),i.type=this.typeName;var s=this._deref(i,e);return s!==void 0&&(i=s),e.exportAttrs&&(this.aliases&&this.aliases.length&&(i.aliases=this.aliases),this.doc!==void 0&&(i.doc=this.doc)),i};C.prototype._createBranchConstructor=function(){var e=this.branchName;if(e==="null")return null;var r=~e.indexOf(".")?"this['"+e+"']":"this."+e,i="return function Branch$(val) { "+r+" = val; };",s=new Function(i)();return s.type=this,s.prototype.unwrap=new Function("return "+r+";"),s.prototype.unwrapped=s.prototype.unwrap,s};C.prototype._peek=function(e){var r=e.pos,i=this._read(e);return e.pos=r,i};C.prototype._check=Q.abstractFunction;C.prototype._copy=Q.abstractFunction;C.prototype._deref=Q.abstractFunction;C.prototype._match=Q.abstractFunction;C.prototype._read=Q.abstractFunction;C.prototype._skip=Q.abstractFunction;C.prototype._update=Q.abstractFunction;C.prototype._write=Q.abstractFunction;C.prototype.getAliases=function(){return this.aliases};C.prototype.getFingerprint=C.prototype.fingerprint;C.prototype.getName=function(e){return this.name||!e?this.name:this.branchName};C.prototype.getSchema=C.prototype.schema;C.prototype.getTypeName=function(){return this.typeName};function ye(e){C.call(this),this._branchConstructor=this._createBranchConstructor(),e||Object.freeze(this)}u(ye,"PrimitiveType");me.inherits(ye,C);ye.prototype._update=function(e,r){r.typeName===this.typeName&&(e._read=this._read)};ye.prototype._copy=function(e){return this._check(e,void 0,ue),e};ye.prototype._deref=function(){return this.typeName};ye.prototype.compare=Q.compare;function yt(){ye.call(this)}u(yt,"NullType");me.inherits(yt,ye);yt.prototype._check=function(e,r,i){var s=e===null;return!s&&i&&i(e,this),s};yt.prototype._read=function(){return null};yt.prototype._skip=function(){};yt.prototype._write=function(e,r){r!==null&&ue(r,this)};yt.prototype._match=function(){return 0};yt.prototype.compare=yt.prototype._match;yt.prototype.typeName="null";yt.prototype.random=yt.prototype._read;function Qt(){ye.call(this)}u(Qt,"BooleanType");me.inherits(Qt,ye);Qt.prototype._check=function(e,r,i){var s=typeof e=="boolean";return!s&&i&&i(e,this),s};Qt.prototype._read=function(e){return e.readBoolean()};Qt.prototype._skip=function(e){e.skipBoolean()};Qt.prototype._write=function(e,r){typeof r!="boolean"&&ue(r,this),e.writeBoolean(r)};Qt.prototype._match=function(e,r){return e.matchBoolean(r)};Qt.prototype.typeName="boolean";Qt.prototype.random=function(){return Le.nextBoolean()};function er(){ye.call(this)}u(er,"IntType");me.inherits(er,ye);er.prototype._check=function(e,r,i){var s=e===(e|0);return!s&&i&&i(e,this),s};er.prototype._read=function(e){return e.readInt()};er.prototype._skip=function(e){e.skipInt()};er.prototype._write=function(e,r){r!==(r|0)&&ue(r,this),e.writeInt(r)};er.prototype._match=function(e,r){return e.matchInt(r)};er.prototype.typeName="int";er.prototype.random=function(){return Le.nextInt(1e3)|0};function ot(){ye.call(this)}u(ot,"LongType");me.inherits(ot,ye);ot.prototype._check=function(e,r,i){var s=typeof e=="number"&&e%1===0&&Qs(e);return!s&&i&&i(e,this),s};ot.prototype._read=function(e){var r=e.readLong();if(!Qs(r))throw new Error("potential precision loss");return r};ot.prototype._skip=function(e){e.skipLong()};ot.prototype._write=function(e,r){(typeof r!="number"||r%1||!Qs(r))&&ue(r,this),e.writeLong(r)};ot.prototype._match=function(e,r){return e.matchLong(r)};ot.prototype._update=function(e,r){switch(r.typeName){case"int":e._read=r._read;break;case"abstract:long":case"long":e._read=this._read}};ot.prototype.typeName="long";ot.prototype.random=function(){return Le.nextInt()};ot.__with=function(e,r){e=e||{};var i={toBuffer:"_toBuffer",fromBuffer:"_fromBuffer",fromJSON:"_fromJSON",toJSON:"_toJSON",isValid:"_isValid",compare:"compare"},s=new qe(r);return Object.keys(i).forEach(function(a){if(e[a]===void 0)throw new Error(Y("missing method implementation: %s",a));s[i[a]]=e[a]}),Object.freeze(s)};function Lt(){ye.call(this)}u(Lt,"FloatType");me.inherits(Lt,ye);Lt.prototype._check=function(e,r,i){var s=typeof e=="number";return!s&&i&&i(e,this),s};Lt.prototype._read=function(e){return e.readFloat()};Lt.prototype._skip=function(e){e.skipFloat()};Lt.prototype._write=function(e,r){typeof r!="number"&&ue(r,this),e.writeFloat(r)};Lt.prototype._match=function(e,r){return e.matchFloat(r)};Lt.prototype._update=function(e,r){switch(r.typeName){case"float":case"int":e._read=r._read;break;case"abstract:long":case"long":e._read=function(i){return i.readLong()}}};Lt.prototype.typeName="float";Lt.prototype.random=function(){return Le.nextFloat(1e3)};function kt(){ye.call(this)}u(kt,"DoubleType");me.inherits(kt,ye);kt.prototype._check=function(e,r,i){var s=typeof e=="number";return!s&&i&&i(e,this),s};kt.prototype._read=function(e){return e.readDouble()};kt.prototype._skip=function(e){e.skipDouble()};kt.prototype._write=function(e,r){typeof r!="number"&&ue(r,this),e.writeDouble(r)};kt.prototype._match=function(e,r){return e.matchDouble(r)};kt.prototype._update=function(e,r){switch(r.typeName){case"double":case"float":case"int":e._read=r._read;break;case"abstract:long":case"long":e._read=function(i){return i.readLong()}}};kt.prototype.typeName="double";kt.prototype.random=function(){return Le.nextFloat()};function Et(){ye.call(this)}u(Et,"StringType");me.inherits(Et,ye);Et.prototype._check=function(e,r,i){var s=typeof e=="string";return!s&&i&&i(e,this),s};Et.prototype._read=function(e){return e.readString()};Et.prototype._skip=function(e){e.skipString()};Et.prototype._write=function(e,r){typeof r!="string"&&ue(r,this),e.writeString(r)};Et.prototype._match=function(e,r){return e.matchString(r)};Et.prototype._update=function(e,r){switch(r.typeName){case"bytes":case"string":e._read=this._read}};Et.prototype.typeName="string";Et.prototype.random=function(){return Le.nextString(Le.nextInt(32))};function st(){ye.call(this)}u(st,"BytesType");me.inherits(st,ye);st.prototype._check=function(e,r,i){var s=Buffer.isBuffer(e);return!s&&i&&i(e,this),s};st.prototype._read=function(e){return e.readBytes()};st.prototype._skip=function(e){e.skipBytes()};st.prototype._write=function(e,r){Buffer.isBuffer(r)||ue(r,this),e.writeBytes(r)};st.prototype._match=function(e,r){return e.matchBytes(r)};st.prototype._update=Et.prototype._update;st.prototype._copy=function(e,r){var i;switch((r&&r.coerce)|0){case 3:return this._check(e,void 0,ue),e.toString("binary");case 2:if(typeof e!="string")throw new Error(Y("cannot coerce to buffer: %j",e));return i=new Buffer(e,"binary"),this._check(i,void 0,ue),i;case 1:if(!Gc(e))throw new Error(Y("cannot coerce to buffer: %j",e));return i=new Buffer(e.data),this._check(i,void 0,ue),i;default:return this._check(e,void 0,ue),new Buffer(e)}};st.prototype.compare=Buffer.compare;st.prototype.typeName="bytes";st.prototype.random=function(){return Le.nextBuffer(Le.nextInt(32))};function Ft(e,r){if(C.call(this),!Array.isArray(e))throw new Error(Y("non-array union schema: %j",e));if(!e.length)throw new Error("empty union");this.types=Object.freeze(e.map(function(i){return C.forSchema(i,r)})),this._branchIndices={},this.types.forEach(function(i,s){if(C.isType(i,"union"))throw new Error("unions cannot be directly nested");var a=i.branchName;if(this._branchIndices[a]!==void 0)throw new Error(Y("duplicate union branch name: %j",a));this._branchIndices[a]=s},this)}u(Ft,"UnionType");me.inherits(Ft,C);Ft.prototype._branchConstructor=function(){throw new Error("unions cannot be directly wrapped")};Ft.prototype._skip=function(e){this.types[e.readLong()]._skip(e)};Ft.prototype._match=function(e,r){var i=e.readLong(),s=r.readLong();return i===s?this.types[i]._match(e,r):i<s?-1:1};Ft.prototype._deref=function(e,r){return this.types.map(function(i){return i._attrs(r)})};Ft.prototype.getTypes=function(){return this.types};function Ke(e,r){Ft.call(this,e,r),this._dynamicBranches=null,this._bucketIndices={},this.types.forEach(function(i,s){if(C.isType(i,"abstract","logical"))this._dynamicBranches||(this._dynamicBranches=[]),this._dynamicBranches.push({index:s,type:i});else{var a=Xi(i);if(this._bucketIndices[a]!==void 0)throw new Error(Y("ambiguous unwrapped union: %j",this));this._bucketIndices[a]=s}},this),Object.freeze(this)}u(Ke,"UnwrappedUnionType");me.inherits(Ke,Ft);Ke.prototype._getIndex=function(e){var r=this._bucketIndices[Jc(e)];return this._dynamicBranches&&(r=this._getBranchIndex(e,r)),r};Ke.prototype._getBranchIndex=function(e,r){var i=this._dynamicBranches,s,a,c;for(s=0,a=i.length;s<a;s++)if(c=i[s],c.type._check(e))if(r===void 0)r=c.index;else throw new Error("ambiguous conversion");return r};Ke.prototype._check=function(e,r,i,s){var a=this._getIndex(e),c=a!==void 0;return c?this.types[a]._check(e,r,i,s):(i&&i(e,this),c)};Ke.prototype._read=function(e){var r=e.readLong(),i=this.types[r];if(i)return i._read(e);throw new Error(Y("invalid union index: %s",r))};Ke.prototype._write=function(e,r){var i=this._getIndex(r);i===void 0&&ue(r,this),e.writeLong(i),r!==null&&this.types[i]._write(e,r)};Ke.prototype._update=function(e,r,i){var s,a,c;for(s=0,a=this.types.length;s<a;s++){try{c=this.types[s].createResolver(r,i)}catch{continue}e._read=function(h){return c._read(h)};return}};Ke.prototype._copy=function(e,r){var i=r&&r.coerce|0,s=r&&r.wrap|0,a;if(s===2)a=0;else{switch(i){case 1:Gc(e)&&this._bucketIndices.buffer!==void 0?a=this._bucketIndices.buffer:a=this._getIndex(e);break;case 2:if(e===null)a=this._bucketIndices.null;else if(typeof e=="object"){var c=Object.keys(e);c.length===1&&(a=this._branchIndices[c[0]],e=e[c[0]])}break;default:a=this._getIndex(e)}a===void 0&&ue(e,this)}var h=this.types[a];if(e===null||s===3)return h._copy(e,r);switch(i){case 3:var y={};return y[h.branchName]=h._copy(e,r),y;default:return h._copy(e,r)}};Ke.prototype.compare=function(e,r){var i=this._getIndex(e),s=this._getIndex(r);if(i===void 0)ue(e,this);else if(s===void 0)ue(r,this);else return i===s?this.types[i].compare(e,r):Q.compare(i,s)};Ke.prototype.typeName="union:unwrapped";Ke.prototype.random=function(){var e=Le.nextInt(this.types.length);return this.types[e].random()};function vt(e,r){Ft.call(this,e,r),Object.freeze(this)}u(vt,"WrappedUnionType");me.inherits(vt,Ft);vt.prototype._check=function(e,r,i,s){var a=!1;if(e===null)a=this._branchIndices.null!==void 0;else if(typeof e=="object"){var c=Object.keys(e);if(c.length===1){var h=c[0],y=this._branchIndices[h];if(y!==void 0)return i?(s.push(h),a=this.types[y]._check(e[h],r,i,s),s.pop(),a):this.types[y]._check(e[h],r)}}return!a&&i&&i(e,this),a};vt.prototype._read=function(e){var r=this.types[e.readLong()];if(!r)throw new Error(Y("invalid union index"));var i=r._branchConstructor;return i===null?null:new i(r._read(e))};vt.prototype._write=function(e,r){var i,s,a;r===null?(i=this._branchIndices.null,i===void 0&&ue(r,this),e.writeLong(i)):(s=Object.keys(r),s.length===1&&(a=s[0],i=this._branchIndices[a]),i===void 0&&ue(r,this),e.writeLong(i),this.types[i]._write(e,r[a]))};vt.prototype._update=function(e,r,i){var s,a,c,h;for(s=0,a=this.types.length;s<a;s++){try{c=this.types[s].createResolver(r,i)}catch{continue}h=this.types[s]._branchConstructor,h?e._read=function(y){return new h(c._read(y))}:e._read=function(){return null};return}};vt.prototype._copy=function(e,r){var i=r&&r.wrap|0;if(i===2){var s=this.types[0];return e===null&&s.typeName==="null"?null:new s._branchConstructor(s._copy(e,r))}if(e===null&&this._branchIndices.null!==void 0)return null;var a,c,h;if(typeof e=="object"){var y=Object.keys(e);if(y.length===1){var v=y[0];if(a=this._branchIndices[v],a===void 0&&r.qualifyNames){var x,T;for(x=0,c=this.types.length;x<c;x++)if(T=this.types[x],T.name&&v===Xs(T.name)){a=x;break}}a!==void 0&&(h=this.types[a]._copy(e[v],r))}}if(i===1&&h===void 0)for(a=0,c=this.types.length;a<c&&h===void 0;)try{h=this.types[a]._copy(e,r)}catch{a++}if(h!==void 0)return i===3?h:new this.types[a]._branchConstructor(h);ue(e,this)};vt.prototype.compare=function(e,r){var i=e===null?"null":Object.keys(e)[0],s=r===null?"null":Object.keys(r)[0],a=this._branchIndices[i];return i===s?i==="null"?0:this.types[a].compare(e[i],r[i]):Q.compare(a,this._branchIndices[s])};vt.prototype.typeName="union:wrapped";vt.prototype.random=function(){var e=Le.nextInt(this.types.length),r=this.types[e],i=r._branchConstructor;return i?new i(r.random()):null};function je(e,r){if(C.call(this,e,r),!Array.isArray(e.symbols)||!e.symbols.length)throw new Error(Y("invalid enum symbols: %j",e.symbols));this.symbols=Object.freeze(e.symbols.slice()),this._indices={},this.symbols.forEach(function(i,s){if(!Rn(i))throw new Error(Y("invalid %s symbol: %j",this,i));if(this._indices[i]!==void 0)throw new Error(Y("duplicate %s symbol: %j",this,i));this._indices[i]=s},this),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}u(je,"EnumType");me.inherits(je,C);je.prototype._check=function(e,r,i){var s=this._indices[e]!==void 0;return!s&&i&&i(e,this),s};je.prototype._read=function(e){var r=e.readLong(),i=this.symbols[r];if(i===void 0)throw new Error(Y("invalid %s enum index: %s",this.name,r));return i};je.prototype._skip=function(e){e.skipLong()};je.prototype._write=function(e,r){var i=this._indices[r];i===void 0&&ue(r,this),e.writeLong(i)};je.prototype._match=function(e,r){return e.matchLong(r)};je.prototype.compare=function(e,r){return Q.compare(this._indices[e],this._indices[r])};je.prototype._update=function(e,r){var i=this.symbols;r.typeName==="enum"&&(!r.name||~Zi(this).indexOf(r.name))&&r.symbols.every(function(s){return~i.indexOf(s)})&&(e.symbols=r.symbols,e._read=r._read)};je.prototype._copy=function(e){return this._check(e,void 0,ue),e};je.prototype._deref=function(e){e.symbols=this.symbols};je.prototype.getSymbols=function(){return this.symbols};je.prototype.typeName="enum";je.prototype.random=function(){return Le.choice(this.symbols)};function Ze(e,r){if(C.call(this,e,r),e.size!==(e.size|0)||e.size<1)throw new Error(Y("invalid %s size",this.branchName));this.size=e.size|0,this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}u(Ze,"FixedType");me.inherits(Ze,C);Ze.prototype._check=function(e,r,i){var s=Buffer.isBuffer(e)&&e.length===this.size;return!s&&i&&i(e,this),s};Ze.prototype._read=function(e){return e.readFixed(this.size)};Ze.prototype._skip=function(e){e.skipFixed(this.size)};Ze.prototype._write=function(e,r){(!Buffer.isBuffer(r)||r.length!==this.size)&&ue(r,this),e.writeFixed(r,this.size)};Ze.prototype._match=function(e,r){return e.matchFixed(r,this.size)};Ze.prototype.compare=Buffer.compare;Ze.prototype._update=function(e,r){r.typeName==="fixed"&&this.size===r.size&&(!r.name||~Zi(this).indexOf(r.name))&&(e.size=this.size,e._read=this._read)};Ze.prototype._copy=st.prototype._copy;Ze.prototype._deref=function(e){e.size=this.size};Ze.prototype.getSize=function(){return this.size};Ze.prototype.typeName="fixed";Ze.prototype.random=function(){return Le.nextBuffer(this.size)};function ze(e,r){if(C.call(this),!e.values)throw new Error(Y("missing map values: %j",e));this.valuesType=C.forSchema(e.values,r),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}u(ze,"MapType");me.inherits(ze,C);ze.prototype._check=function(e,r,i,s){if(!e||typeof e!="object"||Array.isArray(e))return i&&i(e,this),!1;var a=Object.keys(e),c=!0,h,y,v,x;if(i){for(v=s.length,s.push(""),h=0,y=a.length;h<y;h++)x=s[v]=a[h],this.valuesType._check(e[x],r,i,s)||(c=!1);s.pop()}else for(h=0,y=a.length;h<y;h++)if(!this.valuesType._check(e[a[h]],r))return!1;return c};ze.prototype._read=function(e){for(var r=this.valuesType,i={},s;s=js(e);)for(;s--;){var a=e.readString();i[a]=r._read(e)}return i};ze.prototype._skip=function(e){for(var r=this.valuesType,i,s;s=e.readLong();)if(s<0)i=e.readLong(),e.pos+=i;else for(;s--;)e.skipString(),r._skip(e)};ze.prototype._write=function(e,r){(!r||typeof r!="object"||Array.isArray(r))&&ue(r,this);var i=this.valuesType,s=Object.keys(r),a=s.length,c,h;if(a)for(e.writeLong(a),c=0;c<a;c++)h=s[c],e.writeString(h),i._write(e,r[h]);e.writeLong(0)};ze.prototype._match=function(){throw new Error("maps cannot be compared")};ze.prototype._update=function(e,r,i){r.typeName==="map"&&(e.valuesType=this.valuesType.createResolver(r.valuesType,i),e._read=this._read)};ze.prototype._copy=function(e,r){if(e&&typeof e=="object"&&!Array.isArray(e)){var i=this.valuesType,s=Object.keys(e),a,c,h,y={};for(a=0,c=s.length;a<c;a++)h=s[a],y[h]=i._copy(e[h],r);return y}ue(e,this)};ze.prototype.compare=ze.prototype._match;ze.prototype.typeName="map";ze.prototype.getValuesType=function(){return this.valuesType};ze.prototype.random=function(){var e={},r,i;for(r=0,i=Le.nextInt(10);r<i;r++)e[Le.nextString(Le.nextInt(20))]=this.valuesType.random();return e};ze.prototype._deref=function(e,r){e.values=this.valuesType._attrs(r)};function Xe(e,r){if(C.call(this),!e.items)throw new Error(Y("missing array items: %j",e));this.itemsType=C.forSchema(e.items,r),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}u(Xe,"ArrayType");me.inherits(Xe,C);Xe.prototype._check=function(e,r,i,s){if(!Array.isArray(e))return i&&i(e,this),!1;var a=!0,c,h,y;if(i){for(y=s.length,s.push(""),c=0,h=e.length;c<h;c++)s[y]=""+c,this.itemsType._check(e[c],r,i,s)||(a=!1);s.pop()}else for(c=0,h=e.length;c<h;c++)if(!this.itemsType._check(e[c],r))return!1;return a};Xe.prototype._read=function(e){for(var r=this.itemsType,i=[],s;s=e.readLong();)for(s<0&&(s=-s,e.skipLong());s--;)i.push(r._read(e));return i};Xe.prototype._skip=function(e){for(var r,i;i=e.readLong();)if(i<0)r=e.readLong(),e.pos+=r;else for(;i--;)this.itemsType._skip(e)};Xe.prototype._write=function(e,r){Array.isArray(r)||ue(r,this);var i=r.length,s;if(i)for(e.writeLong(i),s=0;s<i;s++)this.itemsType._write(e,r[s]);e.writeLong(0)};Xe.prototype._match=function(e,r){for(var i=e.readLong(),s=r.readLong(),a;i&&s;){if(a=this.itemsType._match(e,r),a)return a;--i||(i=js(e)),--s||(s=js(r))}return Q.compare(i,s)};Xe.prototype._update=function(e,r,i){r.typeName==="array"&&(e.itemsType=this.itemsType.createResolver(r.itemsType,i),e._read=this._read)};Xe.prototype._copy=function(e,r){Array.isArray(e)||ue(e,this);var i=new Array(e.length),s,a;for(s=0,a=e.length;s<a;s++)i[s]=this.itemsType._copy(e[s],r);return i};Xe.prototype._deref=function(e,r){e.items=this.itemsType._attrs(r)};Xe.prototype.compare=function(e,r){var i=e.length,s=r.length,a,c,h;for(a=0,c=Math.min(i,s);a<c;a++)if(h=this.itemsType.compare(e[a],r[a]))return h;return Q.compare(i,s)};Xe.prototype.getItemsType=function(){return this.itemsType};Xe.prototype.typeName="array";Xe.prototype.random=function(){var e=[],r,i;for(r=0,i=Le.nextInt(10);r<i;r++)e.push(this.itemsType.random());return e};function ge(e,r){r=r||{};var i=r.namespace;if(e.namespace!==void 0)r.namespace=e.namespace;else if(e.name){var s=/^(.*)\.[^.]+$/.exec(e.name);s&&(r.namespace=s[1])}if(C.call(this,e,r),!Array.isArray(e.fields))throw new Error(Y("non-array record fields: %j",e.fields));if(Q.hasDuplicates(e.fields,function(a){return a.name}))throw new Error(Y("duplicate field name: %j",e.fields));this._fieldsByName={},this.fields=Object.freeze(e.fields.map(function(a){var c=new Xt(a,r);return this._fieldsByName[c.name]=c,c},this)),this._branchConstructor=this._createBranchConstructor(),this._isError=e.type==="error",this.recordConstructor=this._createConstructor(r.errorStackTraces),this._read=this._createReader(),this._skip=this._createSkipper(),this._write=this._createWriter(),this._check=this._createChecker(),r.namespace=i,Object.freeze(this)}u(ge,"RecordType");me.inherits(ge,C);ge.prototype._getConstructorName=function(){return this.name?Xs(this.name):this._isError?"Error$":"Record$"};ge.prototype._createConstructor=function(e){var r=[],i=[],s=[],a="",c,h,y,v,x,T,E;for(c=0,h=this.fields.length;c<h;c++)y=this.fields[c],x=y.defaultValue,T=x()!==void 0,v=y.name,e&&this._isError&&v==="stack"&&C.isType(y.type,"string")&&!T&&(E=y),i.push("v"+c),a+="  ",T?(a+="if (v"+c+" === undefined) { ",a+="this."+v+" = d"+s.length+"(); ",a+="} else { this."+v+" = v"+c+`; }
`,r.push("d"+s.length),s.push(x)):a+="this."+v+" = v"+c+`;
`;E&&(a+="  if (this.stack === undefined) { ",typeof Error.captureStackTrace=="function"?a+="Error.captureStackTrace(this, this.constructor);":a+="this.stack = Error().stack;",a+=` }
`);var B="return function "+this._getConstructorName()+"(";B+=i.join()+`) {
`+a+"};";var N=new Function(r.join(),B).apply(void 0,s),I=this;return N.getType=function(){return I},N.type=I,this._isError&&(me.inherits(N,Error),N.prototype.name=this._getConstructorName()),N.prototype.clone=function(L){return I.clone(this,L)},N.prototype.compare=function(L){return I.compare(this,L)},N.prototype.isValid=function(L){return I.isValid(this,L)},N.prototype.toBuffer=function(){return I.toBuffer(this)},N.prototype.toString=function(){return I.toString(this)},N.prototype.wrap=function(){return I.wrap(this)},N.prototype.wrapped=N.prototype.wrap,N};ge.prototype._createChecker=function(){var e=[],r=[],i=this._getConstructorName(),s="return function check"+i+`(v, f, h, p) {
`;if(s+=`  if (
`,s+=`    v === null ||
`,s+=`    typeof v != 'object' ||
`,s+=`    (f && !this._checkFields(v))
`,s+=`  ) {
`,s+=`    if (h) { h(v, this); }
`,s+=`    return false;
`,s+=`  }
`,!this.fields.length)s+=`  return true;
`;else{for(a=0,c=this.fields.length;a<c;a++)h=this.fields[a],e.push("t"+a),r.push(h.type),h.defaultValue()!==void 0&&(s+="  var v"+a+" = v."+h.name+`;
`);s+=`  if (h) {
`,s+=`    var b = 1;
`,s+=`    var j = p.length;
`,s+=`    p.push('');
`;var a,c,h;for(a=0,c=this.fields.length;a<c;a++)h=this.fields[a],s+="    p[j] = '"+h.name+`';
`,s+="    b &= ",h.defaultValue()===void 0?s+="t"+a+"._check(v."+h.name+`, f, h, p);
`:(s+="v"+a+" === undefined || ",s+="t"+a+"._check(v"+a+`, f, h, p);
`);s+=`    p.pop();
`,s+=`    return !!b;
`,s+=`  } else {
    return (
      `,s+=this.fields.map(function(y,v){return y.defaultValue()===void 0?"t"+v+"._check(v."+y.name+", f)":"(v"+v+" === undefined || t"+v+"._check(v"+v+", f))"}).join(` &&
      `),s+=`
    );
  }
`}return s+="};",new Function(e.join(),s).apply(void 0,r)};ge.prototype._createReader=function(){var e=[],r=[this.recordConstructor],i,s;for(i=0,s=this.fields.length;i<s;i++)e.push("t"+i),r.push(this.fields[i].type);var a=this._getConstructorName(),c="return function read"+a+`(t) {
`;return c+="  return new "+a+`(
    `,c+=e.map(function(h){return h+"._read(t)"}).join(`,
    `),c+=`
  );
};`,e.unshift(a),new Function(e.join(),c).apply(void 0,r)};ge.prototype._createSkipper=function(){var e=[],r="return function skip"+this._getConstructorName()+`(t) {
`,i=[],s,a;for(s=0,a=this.fields.length;s<a;s++)e.push("t"+s),i.push(this.fields[s].type),r+="  t"+s+`._skip(t);
`;return r+="}",new Function(e.join(),r).apply(void 0,i)};ge.prototype._createWriter=function(){var e=[],r=this._getConstructorName(),i="return function write"+r+`(t, v) {
`,s=[],a,c,h,y;for(a=0,c=this.fields.length;a<c;a++)h=this.fields[a],e.push("t"+a),s.push(h.type),i+="  ",h.defaultValue()===void 0?i+="t"+a+"._write(t, v."+h.name+`);
`:(y=h.type.toBuffer(h.defaultValue()).toString("binary"),e.push("d"+a),s.push(y),i+="var v"+a+" = v."+h.name+`;
`,i+="if (v"+a+` === undefined) {
`,i+="    t.writeBinary(d"+a+", "+y.length+`);
`,i+=`  } else {
    t`+a+"._write(t, v"+a+`);
  }
`);return i+="}",new Function(e.join(),i).apply(void 0,s)};ge.prototype._update=function(e,r,i){if(r.name&&!~Zi(this).indexOf(r.name))throw new Error(Y("no alias found for %s",r.name));var s=this.fields,a=r.fields,c=Q.toMap(a,function(pe){return pe.name}),h=[],y={},v,x,T,E,B,N,I;for(v=0;v<s.length;v++){for(T=s[v],B=Zi(T),N=[],x=0;x<B.length;x++)E=B[x],c[E]&&N.push(E);if(N.length>1)throw new Error(Y("ambiguous aliasing for %s.%s (%s)",r.name,T.name,N));if(N.length)E=N[0],I={resolver:T.type.createResolver(c[E].type,i),name:"_"+T.name},y[E]?y[E].push(I):y[E]=[I],h.push(I.name);else{if(T.defaultValue()===void 0)throw new Error(Y("no matching field for default-less %s.%s",r.name,T.name));h.push("undefined")}}var L=-1;for(v=a.length;v&&y[a[--v].name]===void 0;)L=v;var U=this._getConstructorName(),H=[U],se=[this.recordConstructor],j="  return function read"+U+`(t, b) {
`;for(v=0;v<a.length;v++)if(v===L&&(j+=`  if (!b) {
`),T=r.fields[v],E=T.name,y[E]===void 0)j+=~L&&v>=L?"    ":"  ",H.push("r"+v),se.push(T.type),j+="r"+v+`._skip(t);
`;else for(x=y[E].length;x--;)j+=~L&&v>=L?"    ":"  ",H.push("r"+v+"f"+x),I=y[E][x],se.push(I.resolver),j+="var "+I.name+" = ",j+="r"+v+"f"+x+"._"+(x?"peek":"read")+`(t);
`;~L&&(j+=`  }
`),j+="  return new "+U+"("+h.join()+`);
};`,e._read=new Function(H.join(),j).apply(void 0,se)};ge.prototype._match=function(e,r){var i=this.fields,s,a,c,h,y;for(s=0,a=i.length;s<a;s++)if(c=i[s],h=c._order,y=c.type,h){if(h*=y._match(e,r),h)return h}else y._skip(e),y._skip(r);return 0};ge.prototype._checkFields=function(e){var r=Object.keys(e),i,s;for(i=0,s=r.length;i<s;i++)if(!this._fieldsByName[r[i]])return!1;return!0};ge.prototype._copy=function(e,r){var i=r&&r.fieldHook,s=[void 0],a,c,h,y;for(a=0,c=this.fields.length;a<c;a++)h=this.fields[a],y=e[h.name],y===void 0&&h.hasOwnProperty("defaultValue")?y=h.defaultValue():(r&&!r.skip||y!==void 0)&&(y=h.type._copy(y,r)),i&&(y=i(h,y,this)),s.push(y);var v=this.recordConstructor;return new(v.bind.apply(v,s))};ge.prototype._deref=function(e,r){e.fields=this.fields.map(function(i){var s=i.type,a={name:i.name,type:s._attrs(r)};if(r.exportAttrs){var c=i.defaultValue();c!==void 0&&(a.default=s._copy(c,{coerce:3,wrap:3}));var h=i.order;h!=="ascending"&&(a.order=h);var y=i.aliases;y.length&&(a.aliases=y);var v=i.doc;v!==void 0&&(a.doc=v)}return a})};ge.prototype.compare=function(e,r){var i=this.fields,s,a,c,h,y,v;for(s=0,a=i.length;s<a;s++)if(c=i[s],h=c.name,y=c._order,v=c.type,y&&(y*=v.compare(e[h],r[h]),y))return y;return 0};ge.prototype.random=function(){var e=this.fields.map(function(i){return i.type.random()});e.unshift(void 0);var r=this.recordConstructor;return new(r.bind.apply(r,e))};ge.prototype.field=function(e){return this._fieldsByName[e]};ge.prototype.getField=ge.prototype.field;ge.prototype.getFields=function(){return this.fields};ge.prototype.getRecordConstructor=function(){return this.recordConstructor};Object.defineProperty(ge.prototype,"typeName",{enumerable:!0,get:function(){return this._isError?"error":"record"}});function Re(e,r){this._logicalTypeName=e.logicalType,C.call(this),pr=this;try{this._underlyingType=C.forSchema(e,r)}finally{pr=null;var i=tn.length;i&&tn[i-1][0]===this&&tn.pop()}C.isType(this.underlyingType,"union")?this._branchConstructor=this.underlyingType._branchConstructor:this._branchConstructor=this.underlyingType._createBranchConstructor()}u(Re,"LogicalType");me.inherits(Re,C);Object.defineProperty(Re.prototype,"typeName",{enumerable:!0,get:function(){return"logical:"+this._logicalTypeName}});Object.defineProperty(Re.prototype,"underlyingType",{enumerable:!0,get:function(){if(this._underlyingType)return this._underlyingType;var e,r,i;for(e=0,r=tn.length;e<r;e++)if(i=tn[e],i[0]===this)return i[1]}});Re.prototype.getUnderlyingType=function(){return this.underlyingType};Re.prototype._read=function(e){return this._fromValue(this.underlyingType._read(e))};Re.prototype._write=function(e,r){this.underlyingType._write(e,this._toValue(r))};Re.prototype._check=function(e,r,i,s){try{var a=this._toValue(e)}catch{}return a===void 0?(i&&i(e,this),!1):this.underlyingType._check(a,r,i,s)};Re.prototype._copy=function(e,r){var i=this.underlyingType;switch(r&&r.coerce){case 3:return i._copy(this._toValue(e),r);case 2:return this._fromValue(i._copy(e,r));default:return this._fromValue(i._copy(this._toValue(e),r))}};Re.prototype._update=function(e,r,i){var s=this._resolve(r,i);s&&(e._read=function(a){return s(r._read(a))})};Re.prototype.compare=function(e,r){var i=this._toValue(e),s=this._toValue(r);return this.underlyingType.compare(i,s)};Re.prototype.random=function(){return this._fromValue(this.underlyingType.random())};Re.prototype._deref=function(e,r){var i=this.underlyingType,s=i.name!==void 0&&r.derefed[i.name];return e=i._attrs(r),!s&&r.exportAttrs&&(typeof e=="string"&&(e={type:e}),e.logicalType=this._logicalTypeName,this._export(e)),e};Re.prototype._skip=function(e){this.underlyingType._skip(e)};Re.prototype._export=function(){};Re.prototype._fromValue=Q.abstractFunction;Re.prototype._toValue=Q.abstractFunction;Re.prototype._resolve=Q.abstractFunction;function qe(e){this._concreteTypeName="long",ye.call(this,!0),this._noUnpack=!!e}u(qe,"AbstractLongType");me.inherits(qe,ot);qe.prototype.typeName="abstract:long";qe.prototype._check=function(e,r,i){var s=this._isValid(e);return!s&&i&&i(e,this),s};qe.prototype._read=function(e){var r,i;if(this._noUnpack?(i=e.pos,e.skipLong(),r=e.buf.slice(i,e.pos)):r=e.unpackLongBytes(e),e.isValid())return this._fromBuffer(r)};qe.prototype._write=function(e,r){this._isValid(r)||ue(r,this);var i=this._toBuffer(r);this._noUnpack?e.writeFixed(i):e.packLongBytes(i)};qe.prototype._copy=function(e,r){switch(r&&r.coerce){case 3:return this._toJSON(e);case 2:return this._fromJSON(e);default:return this._fromJSON(this._toJSON(e))}};qe.prototype._deref=function(){return"long"};qe.prototype._update=function(e,r){var i=this;switch(r.typeName){case"int":e._read=function(s){return i._fromJSON(r._read(s))};break;case"long":e._read=function(s){return i._read(s)}}};qe.prototype.random=function(){return this._fromJSON(ot.prototype.random())};qe.prototype._fromBuffer=Q.abstractFunction;qe.prototype._toBuffer=Q.abstractFunction;qe.prototype._fromJSON=Q.abstractFunction;qe.prototype._toJSON=Q.abstractFunction;qe.prototype._isValid=Q.abstractFunction;qe.prototype.compare=Q.abstractFunction;function Xt(e,r){var i=e.name;if(typeof i!="string"||!Rn(i))throw new Error(Y("invalid field name: %s",i));this.name=i,this.type=C.forSchema(e.type,r),this.aliases=e.aliases||[],this.doc=e.doc!==void 0?""+e.doc:void 0,this._order=function(h){switch(h){case"ascending":return 1;case"descending":return-1;case"ignore":return 0;default:throw new Error(Y("invalid order: %j",h))}}(e.order===void 0?"ascending":e.order);var s=e.default;if(s!==void 0){var a=this.type,c=a._copy(s,{coerce:2,wrap:2});rn(a.typeName)&&a.typeName!=="bytes"?this.defaultValue=function(){return c}:this.defaultValue=function(){return a._copy(c)}}Object.freeze(this)}u(Xt,"Field");Xt.prototype.defaultValue=function(){};Object.defineProperty(Xt.prototype,"order",{enumerable:!0,get:function(){return["descending","ignore","ascending"][this._order+1]}});Xt.prototype.getAliases=function(){return this.aliases};Xt.prototype.getDefault=Xt.prototype.defaultValue;Xt.prototype.getName=function(){return this.name};Xt.prototype.getOrder=function(){return this.order};Xt.prototype.getType=function(){return this.type};function Zs(e){this._readerType=e,this._read=null,this.itemsType=null,this.size=0,this.symbols=null,this.valuesType=null}u(Zs,"Resolver");Zs.prototype._peek=C.prototype._peek;Zs.prototype.inspect=function(){return"<Resolver>"};function Zw(){this.str=void 0}u(Zw,"Hash");function Vc(e,r,i,s){if(i){if(i._readerType!==e)throw new Error("invalid resolver");return i._read(r,s)}else return e._read(r)}u(Vc,"readValue");function Xs(e){var r=e.split(".");return r[r.length-1]}u(Xs,"unqualify");function ji(e,r){~e.indexOf(".")?e=e.replace(/^\./,""):r&&(e=r+"."+e),e.split(".").forEach(function(s){if(!Rn(s))throw new Error(Y("invalid name: %j",e))});var i=Xs(e);return rn(i)?i:e}u(ji,"qualify");function Zi(e){var r={};e.name&&(r[e.name]=!0);var i=e.aliases,s,a;for(s=0,a=i.length;s<a;s++)r[i[s]]=!0;return Object.keys(r)}u(Zi,"getAliases");function rn(e){var r=Ki[e];return r&&r.prototype instanceof ye}u(rn,"isPrimitive");function $c(e){if(e==="error")e="record";else{var r=/^([^:]+):(.*)$/.exec(e);r&&(r[1]==="union"?e=r[2]+"Union":e=r[1])}return Q.capitalize(e)+"Type"}u($c,"getClassName");function js(e){var r=e.readLong();return r<0&&(r=-r,e.skipLong()),r}u(js,"readArraySize");function Qs(e){return e>=-9007199254740990&&e<=9007199254740990}u(Qs,"isSafeLong");function Gc(e){return e&&e.type==="Buffer"&&Array.isArray(e.data)}u(Gc,"isJsonBuffer");function Rn(e){return jw.test(e)}u(Rn,"isValidName");function ue(e,r){throw new Error(Y("invalid %s: %j",r,e))}u(ue,"throwInvalidError");function Xi(e){var r=e.typeName;switch(r){case"double":case"float":case"int":case"long":return"number";case"bytes":case"fixed":return"buffer";case"enum":return"string";case"map":case"error":case"record":return"object";default:return r}}u(Xi,"getTypeBucket");function Jc(e){if(e===null)return"null";var r=typeof e;if(r==="object"){if(Array.isArray(e))return"array";if(Buffer.isBuffer(e))return"buffer"}return r}u(Jc,"getValueBucket");function Xw(e){var r={},i,s,a,c;for(i=0,s=e.length;i<s;i++)if(c=e[i],!C.isType(c,"logical")){if(a=Xi(c),r[a])return!0;r[a]=!0}return!1}u(Xw,"isAmbiguous");function Qw(e){var r=["int","long","float","double"],i=-1,s=null,a,c,h,y;for(a=0,c=e.length;a<c;a++)h=e[a],y=r.indexOf(h.typeName),y>i&&(i=y,s=h);return s}u(Qw,"combineNumbers");function e1(e,r){var i={},s,a,c,h;for(s=0,a=e.length;s<a;s++){if(c=e[s],c.typeName==="string")return c;h=c.symbols;var y,v;for(y=0,v=h.length;y<v;y++)i[h[y]]=!0}return C.forSchema({type:"enum",symbols:Object.keys(i)},r)}u(e1,"combineStrings");function t1(e,r){var i=-1,s,a,c;for(s=0,a=e.length;s<a;s++){if(c=e[s],c.typeName==="bytes")return c;i===-1?i=c.size:c.size!==i&&(i=-2)}return i<0?C.forSchema("bytes",r):e[0]}u(t1,"combineBuffers");function r1(e,r){var i=[],s={},a={},c=!0,h,y,v,x;for(h=0,y=e.length;h<y;h++)if(v=e[h],v.typeName==="map")c=!1,i.push(v.valuesType);else{x=v.fields;var T,E,B,N,I,L;for(T=0,E=x.length;T<E;T++)B=x[T],I=B.name,L=B.type,i.push(L),c&&(s[I]||(s[I]=[]),s[I].push(L),N=B.defaultValue(),N!==void 0&&(a[I]=N))}if(c){var U=Object.keys(s);for(h=0,y=U.length;h<y;h++)I=U[h],s[I].length<e.length&&a[I]===void 0&&(r&&r.strictDefaults?c=!1:(s[I].unshift(C.forSchema("null",r)),a[I]=null))}var H;return c?H={type:"record",fields:U.map(function(se){var j=C.forTypes(s[se],r),pe=a[se];if(pe!==void 0&&~j.typeName.indexOf("union")){var Se=j.types.slice(),Fe,Bt;for(Fe=0,Bt=Se.length;Fe<Bt&&!Se[Fe].isValid(pe);Fe++);if(Fe>0){var Ht=Se[0];Se[0]=Se[Fe],Se[Fe]=Ht,j=C.forSchema(Se,r)}}return{name:se,type:j,default:a[se]}})}:H={type:"map",values:C.forTypes(i,r)},C.forSchema(H,r)}u(r1,"combineObjects");Yc.exports={Type:C,getTypeBucket:Xi,getValueBucket:Jc,isPrimitive:rn,isValidName:Rn,qualify:ji,builtins:function(){var e={LogicalType:Re,UnwrappedUnionType:Ke,WrappedUnionType:vt},r=Object.keys(Ki),i,s,a;for(i=0,s=r.length;i<s;i++)a=r[i],e[$c(a)]=Ki[a];return e}()}});var rl=_e((Ob,tl)=>{"use strict";var Mt=Qi(),Pn=en(),dr=require("stream"),kn=require("util"),jc=require("zlib"),eo={namespace:"org.apache.avro.file"},Kc=Mt.Type.forSchema("long",eo),Zc=Mt.Type.forSchema({type:"map",values:"bytes"},eo),eu=Mt.Type.forSchema({name:"Header",type:"record",fields:[{name:"magic",type:{type:"fixed",name:"Magic",size:4}},{name:"meta",type:Zc},{name:"sync",type:{type:"fixed",name:"Sync",size:16}}]},eo),Xc=Mt.Type.forSchema({name:"Block",type:"record",fields:[{name:"count",type:"long"},{name:"data",type:"bytes"},{name:"sync",type:"Sync"}]},eo),In=new Buffer("Obj"),to=kn.format,Ln=Pn.Tap;function ro(e,r){r=r||{};var i=!!r.noDecode;dr.Duplex.call(this,{readableObjectMode:!i,allowHalfOpen:!1}),this._type=Mt.Type.forSchema(e),this._tap=new Ln(new Buffer(0)),this._writeCb=null,this._needPush=!1,this._readValue=el(i,this._type),this._finished=!1,this.on("finish",function(){this._finished=!0,this._read()})}u(ro,"RawDecoder");kn.inherits(ro,dr.Duplex);ro.prototype._write=function(e,r,i){this._writeCb=i;var s=this._tap;s.buf=Buffer.concat([s.buf.slice(s.pos),e]),s.pos=0,this._needPush&&(this._needPush=!1,this._read())};ro.prototype._read=function(){this._needPush=!1;var e=this._tap,r=e.pos,i=this._readValue(e);e.isValid()?this.push(i):this._finished?this.push(null):(e.pos=r,this._needPush=!0,this._writeCb&&this._writeCb())};function At(e){e=e||{};var r=!!e.noDecode;dr.Duplex.call(this,{allowHalfOpen:!0,readableObjectMode:!r}),this._rType=e.readerSchema!==void 0?Mt.Type.forSchema(e.readerSchema):void 0,this._wType=null,this._codecs=e.codecs,this._codec=void 0,this._parseHook=e.parseHook,this._tap=new Ln(new Buffer(0)),this._blockTap=new Ln(new Buffer(0)),this._syncMarker=null,this._readValue=null,this._noDecode=r,this._queue=new Pn.OrderedQueue,this._decompress=null,this._index=0,this._remaining=void 0,this._needPush=!1,this._finished=!1,this.on("finish",function(){this._finished=!0,this._needPush&&this._read()})}u(At,"BlockDecoder");kn.inherits(At,dr.Duplex);At.defaultCodecs=function(){return{null:function(e,r){r(null,e)},deflate:jc.inflateRaw}};At.getDefaultCodecs=At.defaultCodecs;At.prototype._decodeHeader=function(){var e=this._tap;if(e.buf.length<In.length)return!1;if(!In.equals(e.buf.slice(0,In.length)))return this.emit("error",new Error("invalid magic bytes")),!1;var r=eu._read(e);if(!e.isValid())return!1;this._codec=(r.meta["avro.codec"]||"null").toString();var i=this._codecs||At.getDefaultCodecs();if(this._decompress=i[this._codec],!this._decompress){this.emit("error",new Error(to("unknown codec: %s",this._codec)));return}try{var s=JSON.parse(r.meta["avro.schema"].toString());this._parseHook&&(s=this._parseHook(s)),this._wType=Mt.Type.forSchema(s)}catch(a){this.emit("error",a);return}return this._readValue=el(this._noDecode,this._wType,this._rType),this._syncMarker=r.sync,this.emit("metadata",this._wType,this._codec,r),!0};At.prototype._write=function(e,r,i){var s=this._tap;if(s.buf=Buffer.concat([s.buf,e]),s.pos=0,!this._decodeHeader()){process.nextTick(i);return}this._write=this._writeChunk,this._write(new Buffer(0),r,i)};At.prototype._writeChunk=function(e,r,i){var s=this._tap;s.buf=Buffer.concat([s.buf.slice(s.pos),e]),s.pos=0;for(var a=1,c;c=n1(s);){if(!this._syncMarker.equals(c.sync)){this.emit("error",new Error("invalid sync marker"));return}a++,this._decompress(c.data,this._createBlockCallback(c.count,h))}h();function h(){--a||i()}u(h,"chunkCb")};At.prototype._createBlockCallback=function(e,r){var i=this,s=this._index++;return function(a,c){if(a){var h=new Error(to("%s codec decompression error",i._codec));h.cause=a,i.emit("error",h),r()}else i._queue.push(new Qc(s,c,r,e)),i._needPush&&i._read()}};At.prototype._read=function(){this._needPush=!1;var e=this._blockTap;if(!this._remaining){var r=this._queue.pop();if(!r||!r.count){this._finished?this.push(null):this._needPush=!0,r&&r.cb();return}r.cb(),this._remaining=r.count,e.buf=r.buf,e.pos=0}this._remaining--,this.push(this._readValue(e))};function no(e,r){r=r||{},dr.Transform.call(this,{writableObjectMode:!0,allowHalfOpen:!1}),this._type=Mt.Type.forSchema(e),this._writeValue=function(i,s){try{this._type._write(i,s)}catch(a){this.emit("error",a)}},this._tap=new Ln(new Buffer(r.batchSize||65536))}u(no,"RawEncoder");kn.inherits(no,dr.Transform);no.prototype._transform=function(e,r,i){var s=this._tap,a=s.buf,c=s.pos;if(this._writeValue(s,e),!s.isValid()){c&&this.push(i1(s.buf,0,c));var h=s.pos-c;h>a.length&&(s.buf=new Buffer(2*h)),s.pos=0,this._writeValue(s,e)}i()};no.prototype._flush=function(e){var r=this._tap,i=r.pos;i&&this.push(r.buf.slice(0,i)),e()};function Ot(e,r){r=r||{},dr.Duplex.call(this,{allowHalfOpen:!0,writableObjectMode:!0});var i;if(Mt.Type.isType(e)?(i=e,e=void 0):i=Mt.Type.forSchema(e),this._schema=e,this._type=i,this._writeValue=function(a,c){try{this._type._write(a,c)}catch(h){this.emit("error",h)}},this._blockSize=r.blockSize||65536,this._tap=new Ln(new Buffer(this._blockSize)),this._codecs=r.codecs,this._codec=r.codec||"null",this._blockCount=0,this._syncMarker=r.syncMarker||new Pn.Lcg().nextBuffer(16),this._queue=new Pn.OrderedQueue,this._pending=0,this._finished=!1,this._needHeader=!1,this._needPush=!1,this._metadata=r.metadata||{},!Zc.isValid(this._metadata))throw new Error("invalid metadata");var s=this._codec;if(this._compress=(this._codecs||Ot.getDefaultCodecs())[s],!this._compress)throw new Error(to("unsupported codec: %s",s));switch(r.omitHeader!==void 0&&(r.writeHeader=r.omitHeader?"never":"auto"),r.writeHeader){case!1:case"never":break;case void 0:case"auto":this._needHeader=!0;break;default:this._writeHeader()}this.on("finish",function(){this._finished=!0,this._blockCount?this._flushChunk():this._finished&&this._needPush&&this.push(null)})}u(Ot,"BlockEncoder");kn.inherits(Ot,dr.Duplex);Ot.defaultCodecs=function(){return{null:function(e,r){r(null,e)},deflate:jc.deflateRaw}};Ot.getDefaultCodecs=Ot.defaultCodecs;Ot.prototype._writeHeader=function(){var e=JSON.stringify(this._schema?this._schema:this._type.getSchema({exportAttrs:!0})),r=Pn.copyOwnProperties(this._metadata,{"avro.schema":new Buffer(e),"avro.codec":new Buffer(this._codec)},!0),i=eu.getRecordConstructor(),s=new i(In,r,this._syncMarker);this.push(s.toBuffer())};Ot.prototype._write=function(e,r,i){this._needHeader&&(this._writeHeader(),this._needHeader=!1);var s=this._tap,a=s.pos,c=!1;if(this._writeValue(s,e),!s.isValid()){a&&(this._flushChunk(a,i),c=!0);var h=s.pos-a;h>this._blockSize&&(this._blockSize=h*2),s.buf=new Buffer(this._blockSize),s.pos=0,this._writeValue(s,e)}this._blockCount++,c||i()};Ot.prototype._flushChunk=function(e,r){var i=this._tap;e=e||i.pos,this._compress(i.buf.slice(0,e),this._createBlockCallback(r)),this._blockCount=0};Ot.prototype._read=function(){var e=this,r=this._queue.pop();if(!r){this._finished&&!this._pending?process.nextTick(function(){e.push(null)}):this._needPush=!0;return}this.push(Kc.toBuffer(r.count,!0)),this.push(Kc.toBuffer(r.buf.length,!0)),this.push(r.buf),this.push(this._syncMarker),this._finished||r.cb()};Ot.prototype._createBlockCallback=function(e){var r=this,i=this._index++,s=this._blockCount;return this._pending++,function(a,c){if(a){var h=new Error(to("%s codec compression error",r._codec));h.cause=a,r.emit("error",h);return}r._pending--,r._queue.push(new Qc(i,c,e,s)),r._needPush&&(r._needPush=!1,r._read())}};function Qc(e,r,i,s){this.index=e,this.buf=r,this.cb=i,this.count=s|0}u(Qc,"BlockData");function n1(e){var r=e.pos,i=Xc._read(e);return e.isValid()?i:(e.pos=r,null)}u(n1,"tryReadBlock");function el(e,r,i){if(e)return function(a){return function(c){var h=c.pos;return a(c),c.buf.slice(h,c.pos)}}(r._skip);if(i){var s=i.createResolver(r);return function(a){return s._read(a)}}else return function(a){return r._read(a)}}u(el,"createReader");function i1(e,r,i){var s=new Buffer(i);return e.copy(s,0,r,r+i),s}u(i1,"copyBuffer");tl.exports={BLOCK_TYPE:Xc,HEADER_TYPE:eu,MAGIC_BYTES:In,streams:{BlockDecoder:At,BlockEncoder:Ot,RawDecoder:ro,RawEncoder:no}}});var _l=_e((Bb,dl)=>{"use strict";var iu=Qi(),Ce=en(),yr=require("events"),qt=require("stream"),oe=require("util"),ou=Ce.Tap,Oe=iu.Type,Te=oe.debuglog("avsc:services"),Ie=oe.format,Dt={namespace:"org.apache.avro.ipc"},nl=Oe.forSchema("boolean",Dt),Ut=Oe.forSchema({type:"map",values:"bytes"},Dt),su=Oe.forSchema("string",Dt),Fn=Oe.forSchema({name:"HandshakeRequest",type:"record",fields:[{name:"clientHash",type:{name:"MD5",type:"fixed",size:16}},{name:"clientProtocol",type:["null","string"],default:null},{name:"serverHash",type:"MD5"},{name:"meta",type:["null",Ut],default:null}]},Dt),Mn=Oe.forSchema({name:"HandshakeResponse",type:"record",fields:[{name:"match",type:{name:"HandshakeMatch",type:"enum",symbols:["BOTH","CLIENT","NONE"]}},{name:"serverProtocol",type:["null","string"],default:null},{name:"serverHash",type:["null","MD5"],default:null},{name:"meta",type:["null",Ut],default:null}]},Dt),uu=16,au=new tr("",Oe.forSchema({name:"PingRequest",type:"record",fields:[]},Dt),Oe.forSchema(["string"],Dt),Oe.forSchema("null",Dt));function tr(e,r,i,s,a,c){if(this.name=e,!Oe.isType(r,"record"))throw new Error("invalid request type");if(this.requestType=r,!Oe.isType(i,"union")||!Oe.isType(i.getTypes()[0],"string"))throw new Error("invalid error type");if(this.errorType=i,a&&(!Oe.isType(s,"null")||i.getTypes().length>1))throw new Error("inapplicable one-way parameter");this.responseType=s,this.oneWay=!!a,this.doc=c!==void 0?""+c:void 0,Object.freeze(this)}u(tr,"Message");tr.forSchema=function(e,r,i){if(i=i||{},!iu.isValidName(e))throw new Error(Ie("invalid message name: %s",e));if(!Array.isArray(r.request))throw new Error(Ie("invalid message request: %s",e));var s=Ie("%s.%sRequest",Dt.namespace,Ce.capitalize(e)),a=Oe.forSchema({name:s,type:"record",namespace:i.namespace||"",fields:r.request},i);if(delete i.registry[s],!r.response)throw new Error(Ie("invalid message response: %s",e));var c=Oe.forSchema(r.response,i);if(r.errors!==void 0&&!Array.isArray(r.errors))throw new Error(Ie("invalid message errors: %s",e));var h=Oe.forSchema(["string"].concat(r.errors||[]),i),y=!!r["one-way"];return new tr(e,a,h,c,y,r.doc)};tr.prototype.schema=Oe.prototype.getSchema;tr.prototype._attrs=function(e){var r=this.requestType._attrs(e),i={request:r.fields,response:this.responseType._attrs(e)},s=this.doc;s!==void 0&&(i.doc=s);var a=this.errorType._attrs(e);return a.length>1&&(i.errors=a.slice(1)),this.oneWay&&(i["one-way"]=!0),i};Ce.addDeprecatedGetters(tr,["name","errorType","requestType","responseType"]);tr.prototype.isOneWay=oe.deprecate(function(){return this.oneWay},"use `.oneWay` directly instead of `.isOneWay()`");function te(e,r,i,s,a){if(typeof e!="string")return te.forProtocol(e,r);this.name=e,this._messagesByName=r||{},this.messages=Object.freeze(Ce.objectValues(this._messagesByName)),this._typesByName=i||{},this.types=Object.freeze(Ce.objectValues(this._typesByName)),this.protocol=s,this._hashStr=Ce.getHash(JSON.stringify(s)).toString("binary"),this.doc=s.doc?""+s.doc:void 0,this._server=a||this.createServer({silent:!0}),Object.freeze(this)}u(te,"Service");te.Client=ut;te.Server=Ct;te.compatible=function(e,r){try{sl(e,r)}catch{return!1}return!0};te.forProtocol=function(e,r){r=r||{};var i=e.protocol;if(!i)throw new Error("missing protocol name");if(e.namespace!==void 0)r.namespace=e.namespace;else{var s=/^(.*)\.[^.]+$/.exec(i);s&&(r.namespace=s[1])}i=iu.qualify(i,r.namespace),e.types&&e.types.forEach(function(c){Oe.forSchema(c,r)});var a;return e.messages&&(a={},Object.keys(e.messages).forEach(function(c){a[c]=tr.forSchema(c,e.messages[c],r)})),new te(i,a,r.registry,e)};te.isService=function(e){return!!e&&e.hasOwnProperty("_hashStr")};te.prototype.createClient=function(e){var r=new ut(this,e);return process.nextTick(function(){if(e&&e.server){var i={objectMode:!0},s=[new qt.PassThrough(i),new qt.PassThrough(i)];e.server.createChannel({readable:s[0],writable:s[1]},i),r.createChannel({readable:s[1],writable:s[0]},i)}else e&&e.transport&&r.createChannel(e.transport)}),r};te.prototype.createServer=function(e){return new Ct(this,e)};Object.defineProperty(te.prototype,"hash",{enumerable:!0,get:function(){return new Buffer(this._hashStr,"binary")}});te.prototype.message=function(e){return this._messagesByName[e]};te.prototype.type=function(e){return this._typesByName[e]};te.prototype.inspect=function(){return Ie("<Service %j>",this.name)};Ce.addDeprecatedGetters(te,["message","messages","name","type","types"]);te.prototype.createEmitter=oe.deprecate(function(e,r){r=r||{};var i=this.createClient({cache:r.cache,buffering:!1,strictTypes:r.strictErrors,timeout:r.timeout}),s=i.createChannel(e,r);return s1(i,s),s},"use `.createClient()` instead of `.createEmitter()`");te.prototype.createListener=oe.deprecate(function(e,r){if(r&&r.strictErrors)throw new Error("use `.createServer()` to support strict errors");return this._server.createChannel(e,r)},"use `.createServer().createChannel()` instead of `.createListener()`");te.prototype.emit=oe.deprecate(function(e,r,i,s){if(!i||!this.equals(i.client._svc$))throw new Error("invalid emitter");var a=i.client;return ut.prototype.emitMessage.call(a,e,r,s&&s.bind(this)),i.getPending()},"create a client via `.createClient()` to emit messages instead of `.emit()`");te.prototype.equals=oe.deprecate(function(e){return te.isService(e)&&this.getFingerprint().equals(e.getFingerprint())},"equality testing is deprecated, compare the `.protocol`s instead");te.prototype.getFingerprint=oe.deprecate(function(e){return Ce.getHash(JSON.stringify(this.protocol),e)},"use `.hash` instead of `.getFingerprint()`");te.prototype.getSchema=oe.deprecate(Oe.prototype.getSchema,"use `.protocol` instead of `.getSchema()`");te.prototype.on=oe.deprecate(function(e,r){var i=this;return this._server.onMessage(e,function(s,a){return r.call(i,s,this.channel,a)}),this},"use `.createServer().onMessage()` instead of `.on()`");te.prototype.subprotocol=oe.deprecate(function(){var e=this._server,r={strictTypes:e._strict,cache:e._cache},i=new Ct(e.service,r);return i._handlers=Object.create(e._handlers),new te(this.name,this._messagesByName,this._typesByName,this.protocol,i)},"`.subprotocol()` will be removed in 5.1");te.prototype._attrs=function(e){var r={protocol:this.name},i=[];this.types.forEach(function(a){if(a.getName()!==void 0){var c=a._attrs(e);typeof c!="string"&&i.push(c)}}),i.length&&(r.types=i);var s=Object.keys(this._messagesByName);return s.length&&(r.messages={},s.forEach(function(a){r.messages[a]=this._messagesByName[a]._attrs(e)},this)),e&&e.exportAttrs&&this.doc!==void 0&&(r.doc=this.doc),r};function o1(e,r,i){i===void 0&&typeof r=="function"&&(i=r,r=void 0);var s=new te({protocol:"Empty"},Dt),a;s.createClient({timeout:r&&r.timeout}).createChannel(e,{scope:r&&r.scope,endWritable:typeof e=="function"}).once("handshake",function(c,h){a=h.serverProtocol,this.destroy(!0)}).once("eot",function(c,h){h&&!/interrupted/.test(h)?i(h):i(null,JSON.parse(a))})}u(o1,"discoverProtocol");function ut(e,r){r=r||{},yr.EventEmitter.call(this),this._svc$=e,this._channels$=[],this._fns$=[],this._buffering$=!!r.buffering,this._cache$=r.cache||{},this._policy$=r.channelPolicy,this._strict$=!!r.strictTypes,this._timeout$=Ce.getOption(r,"timeout",1e4),r.remoteProtocols&&ul(this._cache$,r.remoteProtocols,e,!0),this._svc$.messages.forEach(function(i){this[i.name]=this._createMessageHandler$(i)},this)}u(ut,"Client");oe.inherits(ut,yr.EventEmitter);ut.prototype.activeChannels=function(){return this._channels$.slice()};ut.prototype.createChannel=function(e,r){var i=r&&r.objectMode,s;if(typeof e=="function"){var a;i?a=e:a=u(function(T){var E=new qn,B=e(function(N,I){if(N){T(N);return}var L=new kr().once("error",function(U){s.destroy(U)});T(null,I.pipe(L))});if(B)return E.pipe(B),E},"writableFactory"),s=new fu(this,a,r)}else{var c,h;if(ll(e)?c=h=e:(c=e.readable,h=e.writable),!i){var y=new nn;c=c.pipe(y);var v=new Un;v.pipe(h),h=v}s=new oo(this,c,h,r),i||(s.once("eot",function(){c.unpipe(y),v.unpipe(h)}),y.once("error",function(T){s.destroy(T)}))}var x=this._channels$;return x.push(s),s.once("_drain",function(){x.splice(x.indexOf(this),1)}),this._buffering$=!1,this.emit("channel",s),s};ut.prototype.destroyChannels=function(e){this._channels$.forEach(function(r){r.destroy(e&&e.noWait)})};ut.prototype.emitMessage=function(e,r,i,s){var a=hl(this._svc$,e),c=new so(a,{},r);this._emitMessage$(c,i,s)};ut.prototype.remoteProtocols=function(){return al(this._cache$,!0)};Object.defineProperty(ut.prototype,"service",{enumerable:!0,get:function(){return this._svc$}});ut.prototype.use=function(){var e,r,i;for(e=0,r=arguments.length;e<r;e++)i=arguments[e],this._fns$.push(i.length<3?i(this):i);return this};ut.prototype._emitMessage$=function(e,r,i){!i&&typeof r=="function"&&(i=r,r=void 0);var s=this,a=this._channels$,c=a.length;if(!c){if(this._buffering$)Te("no active client channels, buffering call"),this.once("channel",function(){this._emitMessage$(e,r,i)});else{var h=new Error("no active channels");process.nextTick(function(){i?i.call(new lu(e._msg),h):s.emit("error",h)})}return}r=r||{},r.timeout===void 0&&(r.timeout=this._timeout$);var y;if(c===1)y=a[0];else if(this._policy$){if(y=this._policy$(this._channels$.slice()),!y){Te("policy returned no channel, skipping call");return}}else y=a[Math.floor(Math.random()*c)];y._emit(e,r,function(v,x){var T=this,E=T.message.errorType;if(v){s._strict$&&(v=E.clone(v.message,{wrapUnions:!0})),B(v);return}if(!x){B();return}v=x.error,s._strict$||(v===void 0?v=null:Oe.isType(E,"union:unwrapped")?typeof v=="string"&&(v=new Error(v)):v&&v.string&&typeof v.string=="string"&&(v=new Error(v.string))),B(v,x.response);function B(N,I){i?i.call(T,N,I):N&&s.emit("error",N)}u(B,"done")})};ut.prototype._createMessageHandler$=function(e){var r=e.requestType.getFields(),i=r.map(function(a){return a.getName()}),s="return function "+e.name+"(";return i.length&&(s+=i.join(", ")+", "),s+=`opts, cb) {
`,s+="  var req = {",s+=i.map(function(a){return a+": "+a}).join(", "),s+=`};
`,s+="  return this.emitMessage('"+e.name+`', req, opts, cb);
`,s+="};",new Function(s)()};function Ct(e,r){r=r||{},yr.EventEmitter.call(this),this.service=e,this._handlers={},this._fns=[],this._channels={},this._nextChannelId=1,this._cache=r.cache||{},this._defaultHandler=r.defaultHandler,this._sysErrFormatter=r.systemErrorFormatter,this._silent=!!r.silent,this._strict=!!r.strictTypes,r.remoteProtocols&&ul(this._cache,r.remoteProtocols,e,!1),e.messages.forEach(function(i){var s=i.name;r.noCapitalize||(s=Ce.capitalize(s)),this["on"+s]=this._createMessageHandler(i)},this)}u(Ct,"Server");oe.inherits(Ct,yr.EventEmitter);Ct.prototype.activeChannels=function(){return Ce.objectValues(this._channels)};Ct.prototype.createChannel=function(e,r){var i=r&&r.objectMode,s;if(typeof e=="function"){var a;i?a=e:a=u(function(E){var B=new kr().once("error",function(N){s.destroy(N)});return e(function(N,I){if(N){E(N);return}var L=new qn;L.pipe(I),E(null,L)}).pipe(B)},"readableFactory"),s=new il(this,a,r)}else{var c,h;if(ll(e)?c=h=e:(c=e.readable,h=e.writable),!i){var y=new nn;c=c.pipe(y);var v=new Un;v.pipe(h),h=v}s=new ol(this,c,h,r),i||(s.once("eot",function(){c.unpipe(y),v.unpipe(h)}),y.once("error",function(E){s.destroy(E)}))}this.listeners("error").length||this.on("error",this._onError);var x=this._nextChannelId++,T=this._channels;return T[x]=s.once("eot",function(){delete T[x]}),this.emit("channel",s),s};Ct.prototype.onMessage=function(e,r){return hl(this.service,e),this._handlers[e]=r,this};Ct.prototype.remoteProtocols=function(){return al(this._cache,!1)};Ct.prototype.use=function(){var e,r,i;for(e=0,r=arguments.length;e<r;e++)i=arguments[e],this._fns.push(i.length<3?i(this):i);return this};Ct.prototype._createMessageHandler=function(e){var r=e.name,i=e.requestType.fields,s=i.length,a=i.length?", "+i.map(function(h){return"req."+h.name}).join(", "):"",c=`return function (handler) {
`;return c+="  if (handler.length > "+s+`) {
`,c+="    return this.onMessage('"+r+`', function (req, cb) {
`,c+="      return handler.call(this"+a+`, cb);
`,c+=`    });
`,c+=`  } else {
`,c+="    return this.onMessage('"+r+`', function (req) {
`,c+="      return handler.call(this"+a+`);
`,c+=`    });
`,c+=`  }
`,c+=`};
`,new Function(c)()};Ct.prototype._onError=function(e){!this._silent&&e.rpcCode!=="UNKNOWN_PROTOCOL"&&(console.error(),e.rpcCode?(console.error(e.rpcCode),console.error(e.cause)):(console.error("INTERNAL_SERVER_ERROR"),console.error(e)))};function ke(e,r){r=r||{},yr.EventEmitter.call(this),this.client=e,this.timeout=Ce.getOption(r,"timeout",e._timeout$),this._endWritable=!!Ce.getOption(r,"endWritable",!0),this._prefix=fl(r.scope);var i=e._cache$,s=e._svc$,a=r.serverHash;a||(a=s.hash);var c=i[a];c||(a=s.hash,c=i[a]=new vr(s,s,a)),this._adapter=c,this._registry=new Dn(this,uu),this.pending=0,this.destroyed=!1,this.draining=!1,this.once("_eot",function(h,y){Te("client channel EOT"),this.destroyed=!0,this.emit("eot",h,y)})}u(ke,"ClientChannel");oe.inherits(ke,yr.EventEmitter);ke.prototype.destroy=function(e){Te("destroying client channel"),this.draining||(this.draining=!0,this.emit("_drain"));var r=this._registry,i=this.pending;e&&r.clear(),e||!i?hu(e)?(Te("fatal client channel error: %s",e),this.emit("_eot",i,e)):this.emit("_eot",i):Te("client channel entering drain mode (%s pending)",i)};ke.prototype.ping=function(e,r){!r&&typeof e=="function"&&(r=e,e=void 0);var i=this,s=new so(au);this._emit(s,{timeout:e},function(a){r?r.call(i,a):a&&i.destroy(a)})};ke.prototype._createHandshakeRequest=function(e,r){var i=this.client._svc$;return{clientHash:i.hash,clientProtocol:r?null:JSON.stringify(i.protocol),serverHash:e._hash}};ke.prototype._emit=function(e,r,i){var s=e._msg,a=s.oneWay?void 0:new cu(s,{}),c=new lu(s,this),h=this;this.pending++,process.nextTick(function(){if(!s.name)y(e,a,v);else{h.emit("outgoingCall",c,r);var T=h.client._fns$;Te("starting client middleware chain (%s middleware)",T.length),pl({fns:T,ctx:c,wreq:e,wres:a,onTransition:y,onCompletion:v,onError:x})}});function y(T,E,B){var N,I;if(h.destroyed)N=new Error("channel destroyed");else try{I=T.toBuffer()}catch{N=nu(Ie("invalid %j request",s.name),T,[{name:"headers",type:Ut},{name:"request",type:s.requestType}])}if(N){B(N);return}var L=r&&r.timeout!==void 0?r.timeout:h.timeout,U=h._registry.add(L,function(H,se,j){if(!H&&!s.oneWay)try{j._decodeResponse(se,E,s)}catch(pe){H=pe}B(H)});U|=h._prefix,Te("sending message %s",U),h._send(U,I,!!s&&s.oneWay)}u(y,"onTransition");function v(T){h.pending--,i.call(c,T,a),h.draining&&!h.destroyed&&!h.pending&&h.destroy()}u(v,"onCompletion");function x(T){h.client.emit("error",T,h)}u(x,"onError")};ke.prototype._getAdapter=function(e){var r=e.serverHash,i=this.client._cache$,s=i[r];if(s)return s;var a=JSON.parse(e.serverProtocol),c=te.forProtocol(a);return s=new vr(this.client._svc$,c,r,!0),i[r]=s};ke.prototype._matchesPrefix=function(e){return cl(e,this._prefix)};ke.prototype._send=Ce.abstractFunction;Ce.addDeprecatedGetters(ke,["pending","timeout"]);ke.prototype.getCache=oe.deprecate(function(){return this.client._cache$},"use `.remoteProtocols()` instead of `.getCache()`");ke.prototype.getProtocol=oe.deprecate(function(){return this.client._svc$},"use `.service` instead or `.getProtocol()`");ke.prototype.isDestroyed=oe.deprecate(function(){return this.destroyed},"use `.destroyed` instead of `.isDestroyed`");function fu(e,r,i){ke.call(this,e,i),this._writableFactory=r,(!i||!i.noPing)&&(Te("emitting ping request"),this.ping())}u(fu,"StatelessClientChannel");oe.inherits(fu,ke);fu.prototype._send=function(e,r){var i=this._registry.get(e),s=this._adapter,a=this;return process.nextTick(c),!0;function c(h){if(!a.destroyed){var y=a._createHandshakeRequest(s,!h),v=a._writableFactory.call(a,function(x,T){if(x){i(x);return}T.on("data",function(E){Te("received response %s",E.id);var B=Buffer.concat(E.payload);try{var N=uo(Mn,B),I=N.head;I.serverHash&&(s=a._getAdapter(I))}catch(U){i(U);return}var L=I.match;Te("handshake match: %s",L),a.emit("handshake",y,I),L==="NONE"?process.nextTick(function(){c(!0)}):(a._adapter=s,i(null,N.tail,s))})});if(!v){i(new Error("invalid writable stream"));return}v.write({id:e,payload:[Fn.toBuffer(y),r]}),a._endWritable&&v.end()}}u(c,"emit")};function oo(e,r,i,s){ke.call(this,e,s),this._readable=r,this._writable=i,this._connected=!!(s&&s.noPing),this._readable.on("end",T),this._writable.on("finish",E);var a=this,c=null;this.once("eot",function(){c&&(clearTimeout(c),c=null),a._connected||a.emit("_ready"),this._writable.removeListener("finish",E),this._endWritable&&(Te("ending transport"),this._writable.end()),this._readable.removeListener("data",v).removeListener("data",x).removeListener("end",T)});var h;this._connected?this._readable.on("data",x):(this._readable.on("data",v),process.nextTick(y),a.timeout&&(c=setTimeout(function(){a.destroy(new Error("timeout"))},a.timeout)));function y(B){if(!a.destroyed){h=a._createHandshakeRequest(a._adapter,!B);var N=[Fn.toBuffer(h),new Buffer([0,0])];a._writable.write({id:a._prefix,payload:N})}}u(y,"ping");function v(B){if(!a._matchesPrefix(B.id)){Te("discarding unscoped response %s (still connecting)",B.id);return}var N=Buffer.concat(B.payload);try{var I=uo(Mn,N).head;I.serverHash&&(a._adapter=a._getAdapter(I))}catch(U){a.destroy(U);return}var L=I.match;Te("handshake match: %s",L),a.emit("handshake",h,I),L==="NONE"?process.nextTick(function(){y(!0)}):(Te("successfully connected"),c&&(clearTimeout(c),c=null),a._readable.removeListener("data",v).on("data",x),a._connected=!0,a.emit("_ready"),h=null)}u(v,"onPing");function x(B){var N=B.id;if(!a._matchesPrefix(N)){Te("discarding unscoped message %s",N);return}var I=a._registry.get(N);I&&process.nextTick(function(){Te("received message %s",N),I(null,Buffer.concat(B.payload),a._adapter)})}u(x,"onMessage");function T(){a.destroy(!0)}u(T,"onEnd");function E(){a.destroy()}u(E,"onFinish")}u(oo,"StatefulClientChannel");oe.inherits(oo,ke);oo.prototype._emit=function(){if(this._connected||this.draining)ke.prototype._emit.apply(this,arguments);else{Te("queuing request");var e=[],r,i;for(r=0,i=arguments.length;r<i;r++)e.push(arguments[r]);this.once("_ready",function(){this._emit.apply(this,e)})}};oo.prototype._send=function(e,r,i){if(i){var s=this;process.nextTick(function(){s._registry.get(e)(null,new Buffer([0,0,0]),s._adapter)})}return this._writable.write({id:e,payload:[r]})};function Ve(e,r){r=r||{},yr.EventEmitter.call(this),this.server=e,this._endWritable=!!Ce.getOption(r,"endWritable",!0),this._prefix=fl(r.scope);var i=e._cache,s=e.service,a=s.hash;i[a]||(i[a]=new vr(s,s,a)),this._adapter=null,this.destroyed=!1,this.draining=!1,this.pending=0,this.once("_eot",function(c,h){Te("server channel EOT"),this.emit("eot",c,h)})}u(Ve,"ServerChannel");oe.inherits(Ve,yr.EventEmitter);Ve.prototype.destroy=function(e){this.draining||(this.draining=!0,this.emit("_drain")),(e||!this.pending)&&(this.destroyed=!0,hu(e)?(Te("fatal server channel error: %s",e),this.emit("_eot",this.pending,e)):this.emit("_eot",this.pending))};Ve.prototype._createHandshakeResponse=function(e,r){var i=this.server.service,s=i.hash,a=r&&r.serverHash.equals(s);return{match:e?"NONE":a?"BOTH":"CLIENT",serverProtocol:a?null:JSON.stringify(i.protocol),serverHash:a?null:s}};Ve.prototype._getAdapter=function(e){var r=e.clientHash,i=this.server._cache[r];if(i)return i;if(!e.clientProtocol)throw _r("UNKNOWN_PROTOCOL");var s=JSON.parse(e.clientProtocol),a=te.forProtocol(s);return i=new vr(a,this.server.service,r,!0),this.server._cache[r]=i};Ve.prototype._matchesPrefix=function(e){return cl(e,this._prefix)};Ve.prototype._receive=function(e,r,i){var s=this,a;try{a=r._decodeRequest(e)}catch(B){i(s._encodeSystemError(_r("INVALID_REQUEST",B)));return}var c=a._msg,h=new cu(c,{});if(!c.name){h.response=null,i(h.toBuffer(),!1);return}var y=new lu(c,this);s.emit("incomingCall",y);var v=this.server._fns;Te("starting server middleware chain (%s middleware)",v.length),s.pending++,pl({fns:v,ctx:y,wreq:a,wres:h,onTransition:x,onCompletion:T,onError:E});function x(B,N,I){var L=s.server._handlers[c.name];if(L){var se=!c.oneWay;try{se?L.call(y,B.request,function(j,pe){se=!1,N.error=j,N.response=pe,I()}):(L.call(y,B.request),I())}catch(j){se?(se=!1,I(j)):E(j)}}else{var U=s.server._defaultHandler;if(U)U.call(y,B,N,I);else{var H=new Error(Ie("no handler for %s",c.name));I(_r("NOT_IMPLEMENTED",H))}}}u(x,"onTransition");function T(B){s.pending--;var N=s.server,I;if(!B){var L=h.error,U=N._strict;U||(hu(L)?h.error=c.errorType.clone(L.message,{wrapUnions:!0}):L===null&&(L=h.error=void 0),L===void 0&&h.response===void 0&&c.responseType.isValid(null)&&(h.response=null));try{I=h.toBuffer()}catch{h.error!==void 0?B=nu(Ie("invalid %j error",c.name),h,[{name:"headers",type:Ut},{name:"error",type:c.errorType}]):B=nu(Ie("invalid %j response",c.name),h,[{name:"headers",type:Ut},{name:"response",type:c.responseType}])}}I?L!==void 0&&N.emit("error",_r("APPLICATION_ERROR",L)):I=s._encodeSystemError(B,h.headers),i(I,c.oneWay),s.draining&&!s.pending&&s.destroy()}u(T,"onCompletion");function E(B){s.server.emit("error",B,s)}u(E,"onError")};Ce.addDeprecatedGetters(Ve,["pending"]);Ve.prototype.getCache=oe.deprecate(function(){return this.server._cache},"use `.remoteProtocols()` instead of `.getCache()`");Ve.prototype.getProtocol=oe.deprecate(function(){return this.server.service},"use `.service` instead of `.getProtocol()`");Ve.prototype.isDestroyed=oe.deprecate(function(){return this.destroyed},"use `.destroyed` instead of `.isDestroyed`");Ve.prototype._encodeSystemError=function(e,r){var i=this.server;i.emit("error",e,this);var s;i._sysErrFormatter?s=i._sysErrFormatter.call(this,e):e.rpcCode&&(s=e.message);var a;if(r)try{a=Ut.toBuffer(r)}catch(c){i.emit("error",c,this)}return Buffer.concat([a||new Buffer([0]),new Buffer([1,0]),su.toBuffer(s||"internal server error")])};function il(e,r,i){Ve.call(this,e,i),this._writable=void 0;var s=this,a;process.nextTick(function(){a=r.call(s,function(v,x){process.nextTick(function(){if(v){y(v);return}s._writable=x.on("finish",y),s.emit("_writable")})}).on("data",c).on("end",h)});function c(v){var x=v.id,T=Buffer.concat(v.payload),E;try{var B=uo(Fn,T),N=B.head,I=s._getAdapter(N)}catch(H){E=_r("INVALID_HANDSHAKE_REQUEST",H)}var L=s._createHandshakeResponse(E,N);s.emit("handshake",N,L),E?U(s._encodeSystemError(E)):s._receive(B.tail,I,U);function U(H){if(!s.destroyed){if(!s._writable){s.once("_writable",function(){U(H)});return}s._writable.write({id:x,payload:[Mn.toBuffer(L),H]})}s._writable&&s._endWritable&&s._writable.end()}u(U,"done")}u(c,"onRequest");function h(){s.destroy()}u(h,"onEnd");function y(v){a.removeListener("data",c).removeListener("end",h),s.destroy(v||!0)}u(y,"onFinish")}u(il,"StatelessServerChannel");oe.inherits(il,Ve);function ol(e,r,i,s){Ve.call(this,e,s),this._adapter=void 0,this._writable=i.on("finish",v),this._readable=r.on("data",c).on("end",y),this.once("_drain",function(){this._readable.removeListener("data",c).removeListener("data",h).removeListener("end",y)}).once("eot",function(){this._writable.removeListener("finish",v),this._endWritable&&this._writable.end()});var a=this;function c(x){var T=x.id;if(!a._matchesPrefix(T))return;var E=Buffer.concat(x.payload),B;try{var N=uo(Fn,E),I=N.head;a._adapter=a._getAdapter(I)}catch(H){B=_r("INVALID_HANDSHAKE_REQUEST",H)}var L=a._createHandshakeResponse(B,I);a.emit("handshake",I,L),B?U(a._encodeSystemError(B)):(a._readable.removeListener("data",c).on("data",h),a._receive(N.tail,a._adapter,U));function U(H){a.destroyed||a._writable.write({id:T,payload:[Mn.toBuffer(L),H]})}u(U,"done")}u(c,"onHandshake");function h(x){var T=x.id;if(a._matchesPrefix(T)){var E=Buffer.concat(x.payload);a._receive(E,a._adapter,function(B,N){a.destroyed||N||a._writable.write({id:T,payload:[B]})})}}u(h,"onRequest");function y(){a.destroy()}u(y,"onEnd");function v(){a.destroy(!0)}u(v,"onFinish")}u(ol,"StatefulServerChannel");oe.inherits(ol,Ve);function so(e,r,i){this._msg=e,this.headers=r||{},this.request=i||{}}u(so,"WrappedRequest");so.prototype.toBuffer=function(){var e=this._msg;return Buffer.concat([Ut.toBuffer(this.headers),su.toBuffer(e.name),e.requestType.toBuffer(this.request)])};function cu(e,r,i,s){this._msg=e,this.headers=r,this.error=i,this.response=s}u(cu,"WrappedResponse");cu.prototype.toBuffer=function(){var e=Ut.toBuffer(this.headers),r=this.error!==void 0;return Buffer.concat([e,nl.toBuffer(r),r?this._msg.errorType.toBuffer(this.error):this._msg.responseType.toBuffer(this.response)])};function lu(e,r){this.channel=r,this.locals={},this.message=e,Object.freeze(this)}u(lu,"CallContext");function Dn(e,r){this._ctx=e,this._mask=-1>>>(r|0),this._id=0,this._n=0,this._cbs={}}u(Dn,"Registry");Dn.prototype.get=function(e){return this._cbs[e&this._mask]};Dn.prototype.add=function(e,r){this._id=this._id+1&this._mask;var i=this,s=this._id,a;return e>0&&(a=setTimeout(function(){c(new Error("timeout"))},e)),this._cbs[s]=c,this._n++,s;function c(){i._cbs[s]&&(delete i._cbs[s],i._n--,a&&clearTimeout(a),r.apply(i._ctx,arguments))}u(c,"cb")};Dn.prototype.clear=function(){Object.keys(this._cbs).forEach(function(e){this._cbs[e](new Error("interrupted"))},this)};function vr(e,r,i,s){this._clientSvc=e,this._serverSvc=r,this._hash=i,this._isRemote=!!s,this._readers=sl(e,r)}u(vr,"Adapter");vr.prototype._decodeRequest=function(e){var r=new ou(e),i=Ut._read(r),s=su._read(r),a,c;if(s?(a=this._serverSvc.message(s),c=this._readers[s+"?"]._read(r)):a=au,!r.isValid())throw new Error(Ie("truncated %s request",s||"ping$"));return new so(a,i,c)};vr.prototype._decodeResponse=function(e,r,i){var s=new ou(e);Ce.copyOwnProperties(Ut._read(s),r.headers,!0);var a=nl._read(s),c=i.name;if(c){var h=this._readers[c+(a?"*":"!")];if(i=this._clientSvc.message(c),a?r.error=h._read(s):r.response=h._read(s),!s.isValid())throw new Error(Ie("truncated %s response",c))}else i=au};function kr(){qt.Transform.call(this,{readableObjectMode:!0}),this._id=void 0,this._buf=new Buffer(0),this._bufs=[],this.on("finish",function(){this.push(null)})}u(kr,"FrameDecoder");oe.inherits(kr,qt.Transform);kr.prototype._transform=function(e,r,i){e=Buffer.concat([this._buf,e]);for(var s;e.length>=4&&e.length>=(s=e.readInt32BE(0))+4;){if(s)this._bufs.push(e.slice(4,s+4));else{var a=this._bufs;this._bufs=[],this.push({id:null,payload:a})}e=e.slice(s+4)}this._buf=e,i()};kr.prototype._flush=function(){if(this._buf.length||this._bufs.length){var e=this._bufs.slice();e.unshift(this._buf);var r=_r("TRAILING_DATA");r.trailingData=Buffer.concat(e).toString(),this.emit("error",r)}};function qn(){qt.Transform.call(this,{writableObjectMode:!0}),this.on("finish",function(){this.push(null)})}u(qn,"FrameEncoder");oe.inherits(qn,qt.Transform);qn.prototype._transform=function(e,r,i){var s=e.payload,a,c,h;for(a=0,c=s.length;a<c;a++)h=s[a],this.push(ru(h.length)),this.push(h);this.push(ru(0)),i()};function nn(){qt.Transform.call(this,{readableObjectMode:!0}),this._id=void 0,this._frameCount=0,this._buf=new Buffer(0),this._bufs=[],this.on("finish",function(){this.push(null)})}u(nn,"NettyDecoder");oe.inherits(nn,qt.Transform);nn.prototype._transform=function(e,r,i){for(e=Buffer.concat([this._buf,e]);;){if(this._id===void 0){if(e.length<8){this._buf=e,i();return}this._id=e.readInt32BE(0),this._frameCount=e.readInt32BE(4),e=e.slice(8)}for(var s;this._frameCount&&e.length>=4&&e.length>=(s=e.readInt32BE(0))+4;)this._frameCount--,this._bufs.push(e.slice(4,s+4)),e=e.slice(s+4);if(this._frameCount){this._buf=e,i();return}else{var a={id:this._id,payload:this._bufs};this._bufs=[],this._id=void 0,this.push(a)}}};nn.prototype._flush=kr.prototype._flush;function Un(){qt.Transform.call(this,{writableObjectMode:!0}),this.on("finish",function(){this.push(null)})}u(Un,"NettyEncoder");oe.inherits(Un,qt.Transform);Un.prototype._transform=function(e,r,i){var s=e.payload,a=s.length,c;c=new Buffer(8),c.writeInt32BE(e.id,0),c.writeInt32BE(a,4),this.push(c);var h;for(h=0;h<a;h++)c=s[h],this.push(ru(c.length)),this.push(c);i()};function ru(e){var r=new Buffer(4);return r.writeInt32BE(e),r}u(ru,"intBuffer");function uo(e,r){var i=new ou(r),s=e._read(i);if(!i.isValid())throw new Error(Ie("truncated %s",e));return{head:s,tail:i.buf.slice(i.pos)}}u(uo,"readHead");function tu(e,r){return e.equals(r)?e:e.createResolver(r)}u(tu,"createReader");function sl(e,r){var i={};return e.messages.forEach(function(s){var a=s.name,c=r.message(a);try{if(!c)throw new Error(Ie("missing server message: %s",a));if(c.oneWay!==s.oneWay)throw new Error(Ie("inconsistent one-way message: %s",a));i[a+"?"]=tu(c.requestType,s.requestType),i[a+"*"]=tu(s.errorType,c.errorType),i[a+"!"]=tu(s.responseType,c.responseType)}catch(h){throw _r("INCOMPATIBLE_PROTOCOL",h)}}),i}u(sl,"createReaders");function ul(e,r,i,s){Object.keys(r).forEach(function(a){var c=r[a],h,y;s?(h=i,y=te.forProtocol(c)):(h=te.forProtocol(c),y=i),e[a]=new vr(h,y,a,!0)})}u(ul,"insertRemoteProtocols");function al(e,r){var i={};return Object.keys(e).forEach(function(s){var a=e[s];if(a._isRemote){var c=r?a._serverSvc:a._clientSvc;i[s]=c.protocol}}),i}u(al,"getRemoteProtocols");function hu(e){return!!e&&Object.prototype.toString.call(e)==="[object Error]"}u(hu,"isError");function s1(e,r){return e.on("error",function(i){r.emit("error",i,e)})}u(s1,"forwardErrors");function io(e,r){var i=new Error(e);return i.cause=r,i}u(io,"toError");function _r(e,r){var i=io(e.toLowerCase().replace(/_/g," "),r);return i.rpcCode=r&&r.rpcCode?r.rpcCode:e,i}u(_r,"toRpcError");function nu(e,r,i){var s=[],a,c,h;for(a=0,c=i.length;a<c;a++)h=i[a],h.type.isValid(r[h.name],{errorHook:x});var y=s.map(function(T){return Ie("%s = %j but expected %s",T.path,T.value,T.type)}).join(", "),v=new Error(Ie("%s (%s)",e,y));return v.details=s,v;function x(T,E,B){var N=[],I,L,U;for(I=0,L=T.length;I<L;I++)U=T[I],isNaN(U)?N.push("."+U):N.push("["+U+"]");s.push({path:h.name+N.join(""),value:E,type:B})}u(x,"errorHook")}u(nu,"serializationError");function fl(e){return e?Ce.getHash(e).readInt16BE(0)<<32-uu:0}u(fl,"normalizedPrefix");function cl(e,r){return(e^r)>>32-uu===0}u(cl,"matchesPrefix");function ll(e){return!!(e&&e.pipe)}u(ll,"isStream");function hl(e,r){var i=e.message(r);if(!i)throw new Error(Ie("unknown message: %s",r));return i}u(hl,"getExistingMessage");function pl(e){var r=[e.wreq,e.wres],i=[],s;a(0);function a(h){var y=!1;h<e.fns.length?e.fns[h].apply(e.ctx,r.concat(function(v,x){if(y){e.onError(io("duplicate forward middleware call",v));return}if(y=!0,v||e.wres&&(e.wres.error!==void 0||e.wres.response!==void 0)){s=v,c();return}x&&i.push(x),a(++h)})):e.onTransition.apply(e.ctx,r.concat(function(v){if(y){e.onError(io("duplicate handler call",v));return}y=!0,s=v,process.nextTick(c)}))}u(a,"forward");function c(){var h=i.pop();if(h){var y=!1;h.call(e.ctx,s,function(v){if(y){e.onError(io("duplicate backward middleware call",v));return}s=v,y=!0,c()})}else e.onCompletion.call(e.ctx,s)}u(c,"backward")}u(pl,"chainMiddleware");dl.exports={Adapter:vr,HANDSHAKE_REQUEST_TYPE:Fn,HANDSHAKE_RESPONSE_TYPE:Mn,Message:tr,Registry:Dn,Service:te,discoverProtocol:o1,streams:{FrameDecoder:kr,FrameEncoder:qn,NettyDecoder:nn,NettyEncoder:Un}}});var gl=_e((Rb,vl)=>{"use strict";var ao=require("fs"),yl=require("path");function u1(){var e={};return function(r,i,s){if(r=yl.resolve(r),e[r]){process.nextTick(s);return}e[r]=!0,ao.readFile(r,{encoding:"utf8"},s)}}u(u1,"createImportHook");function a1(){var e={};return function(r,i,s){r=yl.resolve(r),e[r]?s():(e[r]=!0,s(null,ao.readFileSync(r,{encoding:"utf8"})))}}u(a1,"createSyncImportHook");vl.exports={createImportHook:u1,createSyncImportHook:a1,existsSync:ao.existsSync,readFileSync:ao.readFileSync}});var bl=_e((Pb,wl)=>{"use strict";var fo=gl(),ml=en(),pu=require("path"),f1=require("util"),on=f1.format,c1={date:{type:"int",logicalType:"date"},decimal:{type:"bytes",logicalType:"decimal"},time_ms:{type:"long",logicalType:"time-millis"},timestamp_ms:{type:"long",logicalType:"timestamp-millis"}};function du(e,r,i){!i&&typeof r=="function"&&(i=r,r=void 0),r=r||{},r.importHook||(r.importHook=fo.createImportHook());var s=[],a,c;r.importHook(e,"idl",function(v,x){if(v){i(v);return}if(x===void 0){i(null,{});return}try{var T=new we(x,r),E=T._readProtocol(x,r)}catch(B){B.path=e,i(B);return}a=E.protocol,c=E.imports,h()});function h(){var v=c.shift();if(!v)s.length&&(a.types=a.types?s.concat(a.types):s),i(null,a);else{var x=pu.join(pu.dirname(e),v.name);v.kind==="idl"?du(x,r,y):r.importHook(x,v.kind,function(T,E){if(T){i(T);return}switch(v.kind){case"protocol":case"schema":if(E===void 0){y(null,{});return}try{var B=JSON.parse(E)}catch(I){I.path=x,i(I);return}var N=v.kind==="schema"?{types:[B]}:B;y(null,N);break;default:i(new Error(on("invalid import kind: %s",v.kind)))}})}}u(h,"fetchImports");function y(v,x){if(v){i(v);return}(x.types||[]).forEach(function(T){if(T.namespace===void 0){var E=x.namespace;if(!E){var B=/^(.*)\.[^.]+$/.exec(x.protocol);B&&(E=B[1])}T.namespace=E||""}s.push(T)});try{Object.keys(x.messages||{}).forEach(function(T){if(a.messages||(a.messages={}),a.messages[T])throw new Error(on("duplicate message: %s",T));a.messages[T]=x.messages[T]})}catch(T){i(T);return}h()}u(y,"mergeImportedSchema")}u(du,"assembleProtocol");function l1(e){var r;if(typeof e=="string"&&~e.indexOf(pu.sep)&&fo.existsSync(e)){var i=fo.readFileSync(e,{encoding:"utf8"});try{return JSON.parse(i)}catch{var s={importHook:fo.createSyncImportHook()};du(e,s,function(c,h){r=c?i:h})}}else r=e;if(typeof r!="string"||r==="null")return r;try{return JSON.parse(r)}catch{try{return we.readProtocol(r)}catch{try{return we.readSchema(r)}catch{return r}}}}u(l1,"read");function we(e,r){r=r||{},this._tk=new gr(e),this._ackVoidMessages=!!r.ackVoidMessages,this._implicitTags=!r.delimitedCollections,this._typeRefs=r.typeRefs||c1}u(we,"Reader");we.readProtocol=function(e,r){var i=new we(e,r),s=i._readProtocol();if(s.imports.length)throw new Error("unresolvable import");return s.protocol};we.readSchema=function(e,r){var i=new we(e,r),s=i._readJavadoc(),a=i._readType(s===void 0?{}:{doc:s});return i._tk.next({id:"(eof)"}),a};we.prototype._readProtocol=function(){var e=this._tk,r=[],i=[],s={},a;this._readImports(r);var c={},h=this._readJavadoc();for(h!==void 0&&(c.doc=h),this._readAnnotations(c),e.next({val:"protocol"}),e.next({val:"{",silent:!0})||(c.protocol=e.next({id:"name"}).val,e.next({val:"{"}));!e.next({val:"}",silent:!0});)if(!this._readImports(r)){var y=this._readJavadoc(),v=this._readType(),x=this._readImports(r,!0),T=void 0;if(a=e.pos,!x&&(T=this._readMessage(v))){y!==void 0&&T.schema.doc===void 0&&(T.schema.doc=y);var E=!1;if((T.schema.response==="void"||T.schema.response.type==="void")&&(E=!this._ackVoidMessages&&!T.schema.errors,T.schema.response==="void"?T.schema.response="null":T.schema.response.type="null"),E&&(T.schema["one-way"]=!0),s[T.name])throw new Error(on("duplicate message: %s",T.name));s[T.name]=T.schema}else y&&(typeof v=="string"?v={doc:y,type:v}:v.doc===void 0&&(v.doc=y)),i.push(v),e.pos=a,e.next({val:";",silent:!0});y=void 0}return e.next({id:"(eof)"}),i.length&&(c.types=i),Object.keys(s).length&&(c.messages=s),{protocol:c,imports:r}};we.prototype._readAnnotations=function(e){for(var r=this._tk;r.next({val:"@",silent:!0});){for(var i=[];!r.next({val:"(",silent:!0});)i.push(r.next().val);e[i.join("")]=r.next({id:"json"}).val,r.next({val:")"})}};we.prototype._readMessage=function(e){var r=this._tk,i={request:[],response:e};this._readAnnotations(i);var s=r.next().val;if(r.next().val==="("){if(!r.next({val:")",silent:!0}))do i.request.push(this._readField());while(!r.next({val:")",silent:!0})&&r.next({val:","}));var a=r.next();switch(a.val){case"throws":i.errors=[];do i.errors.push(this._readType());while(!r.next({val:";",silent:!0})&&r.next({val:","}));break;case"oneway":i["one-way"]=!0,r.next({val:";"});break;case";":break;default:throw r.error("invalid message suffix",a)}return{name:s,schema:i}}};we.prototype._readJavadoc=function(){var e=this._tk.next({id:"javadoc",emitJavadoc:!0,silent:!0});if(e)return e.val};we.prototype._readField=function(){var e=this._tk,r=this._readJavadoc(),i={type:this._readType()};return r!==void 0&&i.doc===void 0&&(i.doc=r),this._readAnnotations(i),i.name=e.next({id:"name"}).val,e.next({val:"=",silent:!0})&&(i.default=e.next({id:"json"}).val),i};we.prototype._readType=function(e){switch(e=e||{},this._readAnnotations(e),e.type=this._tk.next({id:"name"}).val,e.type){case"record":case"error":return this._readRecord(e);case"fixed":return this._readFixed(e);case"enum":return this._readEnum(e);case"map":return this._readMap(e);case"array":return this._readArray(e);case"union":if(Object.keys(e).length>1)throw new Error("union annotations are not supported");return this._readUnion();default:var r=this._typeRefs[e.type];return r&&(delete e.type,ml.copyOwnProperties(r,e)),Object.keys(e).length>1?e:e.type}};we.prototype._readFixed=function(e){var r=this._tk;return r.next({val:"(",silent:!0})||(e.name=r.next({id:"name"}).val,r.next({val:"("})),e.size=parseInt(r.next({id:"number"}).val),r.next({val:")"}),e};we.prototype._readMap=function(e){var r=this._tk,i=this._implicitTags,s=r.next({val:"<",silent:i})===void 0;return e.values=this._readType(),r.next({val:">",silent:s}),e};we.prototype._readArray=function(e){var r=this._tk,i=this._implicitTags,s=r.next({val:"<",silent:i})===void 0;return e.items=this._readType(),r.next({val:">",silent:s}),e};we.prototype._readEnum=function(e){var r=this._tk;r.next({val:"{",silent:!0})||(e.name=r.next({id:"name"}).val,r.next({val:"{"})),e.symbols=[];do e.symbols.push(r.next().val);while(!r.next({val:"}",silent:!0})&&r.next({val:","}));return e};we.prototype._readUnion=function(){var e=this._tk,r=[];e.next({val:"{"});do r.push(this._readType());while(!e.next({val:"}",silent:!0})&&e.next({val:","}));return r};we.prototype._readRecord=function(e){var r=this._tk;for(r.next({val:"{",silent:!0})||(e.name=r.next({id:"name"}).val,r.next({val:"{"})),e.fields=[];!r.next({val:"}",silent:!0});)e.fields.push(this._readField()),r.next({val:";"});return e};we.prototype._readImports=function(e,r){for(var i=this._tk,s=0,a=i.pos;i.next({val:"import",silent:!0});){if(!s&&r&&i.next({val:"(",silent:!0})){i.pos=a;return}var c=i.next({id:"name"}).val,h=JSON.parse(i.next({id:"string"}).val);i.next({val:";"}),e.push({kind:c,name:h}),s++}return s};function gr(e){this._str=e,this.pos=0}u(gr,"Tokenizer");gr.prototype.next=function(e){var r={pos:this.pos,id:void 0,val:void 0},i=this._skip(e&&e.emitJavadoc);if(i)r.id="javadoc",r.val=i;else{var s=this.pos,a=this._str,c=a.charAt(s);if(!c)r.id="(eof)";else if(e&&e.id==="json"?(r.id="json",this.pos=this._endOfJson()):c==='"'?(r.id="string",this.pos=this._endOfString()):/[0-9]/.test(c)?(r.id="number",this.pos=this._endOf(/[0-9]/)):/[`A-Za-z_.]/.test(c)?(r.id="name",this.pos=this._endOf(/[`A-Za-z0-9_.]/)):(r.id="operator",this.pos=s+1),r.val=a.slice(s,this.pos),r.id==="json")try{r.val=JSON.parse(r.val)}catch{throw this.error("invalid JSON",r)}else r.id==="name"&&(r.val=r.val.replace(/`/g,""))}var h;if(e&&e.id&&e.id!==r.id?h=this.error(on("expected ID %s",e.id),r):e&&e.val&&e.val!==r.val&&(h=this.error(on("expected value %s",e.val),r)),h)if(e&&e.silent){this.pos=r.pos;return}else throw h;else return r};gr.prototype.error=function(e,r){var i=typeof r!="number",s=i?r.pos:r,a=this._str,c=1,h=0,y;for(y=0;y<s;y++)a.charAt(y)===`
`&&(c++,h=y);var v=i?on("invalid token %j: %s",r,e):e,x=new Error(v);return x.token=i?r:void 0,x.lineNum=c,x.colNum=s-h,x};gr.prototype._skip=function(e){for(var r=this._str,i=!1,s,a;(a=r.charAt(this.pos))&&/\s/.test(a);)this.pos++;if(s=this.pos,a==="/")switch(r.charAt(this.pos+1)){case"/":for(this.pos+=2;(a=r.charAt(this.pos))&&a!==`
`;)this.pos++;return this._skip(e);case"*":for(this.pos+=2,r.charAt(this.pos)==="*"&&(i=!0);a=r.charAt(this.pos++);)if(a==="*"&&r.charAt(this.pos)==="/")return this.pos++,i&&e?h1(r.slice(s+3,this.pos-2)):this._skip(e);throw this.error("unterminated comment",s)}};gr.prototype._endOf=function(e){for(var r=this.pos,i=this._str;e.test(i.charAt(r));)r++;return r};gr.prototype._endOfString=function(){for(var e=this.pos+1,r=this._str,i;i=r.charAt(e);){if(i==='"')return e+1;i==="\\"?e+=2:e++}throw this.error("unterminated string",e-1)};gr.prototype._endOfJson=function(){var e=ml.jsonEnd(this._str,this.pos);if(e<0)throw this.error("invalid JSON",e);return e};function h1(e){for(var r=e.replace(/^[ \t]+|[ \t]+$/g,"").split(`
`).map(function(i,s){return s?i.replace(/^\s*\*\s?/,""):i});!r[0];)r.shift();for(;!r[r.length-1];)r.pop();return r.join(`
`)}u(h1,"extractJavadoc");wl.exports={Tokenizer:gr,assembleProtocol:du,read:l1,readProtocol:we.readProtocol,readSchema:we.readSchema}});var Tl=_e((kb,xl)=>{"use strict";var zn=rl(),co=_l(),Hn=bl(),Wn=Qi(),p1=en(),sn=require("fs"),_u=require("util");function d1(e,r){var i=Hn.read(e);return i.protocol?co.Service.forProtocol(i,r):Wn.Type.forSchema(i,r)}u(d1,"parse");function _1(e,r){r=r||{};for(var i=r.decode===void 0?!0:!!r.decode,s=Math.max(r.size||4096,4),a=sn.openSync(e,"r"),c=new Buffer(s),h=0,y=new p1.Tap(c),v=null;h<4;)h+=sn.readSync(a,c,h,s-h);if(zn.MAGIC_BYTES.equals(c.slice(0,4))){do v=zn.HEADER_TYPE._read(y);while(!T());if(i!==!1){var x=v.meta;x["avro.schema"]=JSON.parse(x["avro.schema"].toString()),x["avro.codec"]!==void 0&&(x["avro.codec"]=x["avro.codec"].toString())}}return sn.closeSync(a),v;function T(){if(y.isValid())return!0;var E=2*y.buf.length,B=new Buffer(E);return E=sn.readSync(a,B,0,E),y.buf=Buffer.concat([y.buf,B]),y.pos=0,!1}u(T,"isValid")}u(_1,"extractFileHeader");function y1(e,r){return sn.createReadStream(e).pipe(new zn.streams.BlockDecoder(r))}u(y1,"createFileDecoder");function v1(e,r,i){var s=new zn.streams.BlockEncoder(r,i);return s.pipe(sn.createWriteStream(e,{defaultEncoding:"binary"})),s}u(v1,"createFileEncoder");xl.exports={Service:co.Service,Type:Wn.Type,assembleProtocol:Hn.assembleProtocol,createFileDecoder:y1,createFileEncoder:v1,discoverProtocol:co.discoverProtocol,extractFileHeader:_1,parse:d1,readProtocol:Hn.readProtocol,readSchema:Hn.readSchema,streams:zn.streams,types:Wn.builtins,Protocol:co.Service,assemble:_u.deprecate(Hn.assembleProtocol,"use `assembleProtocol` instead"),combine:_u.deprecate(Wn.Type.forTypes,"use `Type.forTypes` intead"),infer:_u.deprecate(Wn.Type.forValue,"use `Type.forValue` instead")}});var El=_e(Sl=>{"use strict";var g1=[0,255,65535,16777215,4294967295];function m1(e,r,i,s,a){var c;for(c=0;c<a;c++)i[s+c]=e[r+c]}u(m1,"copyBytes");function w1(e,r,i,s){var a;for(a=0;a<s;a++)e[r+a]=e[r-i+a]}u(w1,"selfCopyBytes");function yu(e){this.array=e,this.pos=0}u(yu,"SnappyDecompressor");yu.prototype.readUncompressedLength=function(){for(var e=0,r=0,i,s;r<32&&this.pos<this.array.length;){if(i=this.array[this.pos],this.pos+=1,s=i&127,s<<r>>>r!==s)return-1;if(e|=s<<r,i<128)return e;r+=7}return-1};yu.prototype.uncompressToBuffer=function(e){for(var r=this.array,i=r.length,s=this.pos,a=0,c,h,y,v;s<r.length;)if(c=r[s],s+=1,c&3){switch(c&3){case 1:h=(c>>>2&7)+4,v=r[s]+(c>>>5<<8),s+=1;break;case 2:if(s+1>=i)return!1;h=(c>>>2)+1,v=r[s]+(r[s+1]<<8),s+=2;break;case 3:if(s+3>=i)return!1;h=(c>>>2)+1,v=r[s]+(r[s+1]<<8)+(r[s+2]<<16)+(r[s+3]<<24),s+=4;break;default:break}if(v===0||v>a)return!1;w1(e,a,v,h),a+=h}else{if(h=(c>>>2)+1,h>60){if(s+3>=i)return!1;y=h-60,h=r[s]+(r[s+1]<<8)+(r[s+2]<<16)+(r[s+3]<<24),h=(h&g1[y])+1,s+=y}if(s+h>i)return!1;m1(r,s,e,a,h),s+=h,a+=h}return!0};Sl.SnappyDecompressor=yu});var Nl=_e(Bl=>{"use strict";var b1=16,x1=1<<b1,Cl=14,vu=new Array(Cl+1);function Vn(e,r){return e*506832829>>>r}u(Vn,"hashFunc");function $n(e,r){return e[r]+(e[r+1]<<8)+(e[r+2]<<16)+(e[r+3]<<24)}u($n,"load32");function Al(e,r,i){return e[r]===e[i]&&e[r+1]===e[i+1]&&e[r+2]===e[i+2]&&e[r+3]===e[i+3]}u(Al,"equals32");function T1(e,r,i,s,a){var c;for(c=0;c<a;c++)i[s+c]=e[r+c]}u(T1,"copyBytes");function Ol(e,r,i,s,a){return i<=60?(s[a]=i-1<<2,a+=1):i<256?(s[a]=240,s[a+1]=i-1,a+=2):(s[a]=244,s[a+1]=i-1&255,s[a+2]=i-1>>>8,a+=3),T1(e,r,s,a,i),a+i}u(Ol,"emitLiteral");function gu(e,r,i,s){return s<12&&i<2048?(e[r]=1+(s-4<<2)+(i>>>8<<5),e[r+1]=i&255,r+2):(e[r]=2+(s-1<<2),e[r+1]=i&255,e[r+2]=i>>>8,r+3)}u(gu,"emitCopyLessThan64");function S1(e,r,i,s){for(;s>=68;)r=gu(e,r,i,64),s-=64;return s>64&&(r=gu(e,r,i,60),s-=60),gu(e,r,i,s)}u(S1,"emitCopy");function E1(e,r,i,s,a){for(var c=1;1<<c<=i&&c<=Cl;)c+=1;c-=1;var h=32-c;typeof vu[c]>"u"&&(vu[c]=new Uint16Array(1<<c));var y=vu[c],v;for(v=0;v<y.length;v++)y[v]=0;var x=r+i,T,E=r,B=r,N,I,L,U,H,se,j,pe,Se,Fe,Bt,Ht=!0,Gn=15;if(i>=Gn)for(T=x-Gn,r+=1,I=Vn($n(e,r),h);Ht;){H=32,L=r;do{if(r=L,N=I,se=H>>>5,H+=1,L=r+se,r>T){Ht=!1;break}I=Vn($n(e,L),h),U=E+y[N],y[N]=r-E}while(!Al(e,r,U));if(!Ht)break;a=Ol(e,B,r-B,s,a);do{for(j=r,pe=4;r+pe<x&&e[r+pe]===e[U+pe];)pe+=1;if(r+=pe,Se=j-U,a=S1(s,a,Se,pe),B=r,r>=T){Ht=!1;break}Fe=Vn($n(e,r-1),h),y[Fe]=r-1-E,Bt=Vn($n(e,r),h),U=E+y[Bt],y[Bt]=r-E}while(Al(e,r,U));if(!Ht)break;r+=1,I=Vn($n(e,r),h)}return B<x&&(a=Ol(e,B,x-B,s,a)),a}u(E1,"compressFragment");function A1(e,r,i){do r[i]=e&127,e=e>>>7,e>0&&(r[i]+=128),i+=1;while(e>0);return i}u(A1,"putVarint");function mu(e){this.array=e}u(mu,"SnappyCompressor");mu.prototype.maxCompressedLength=function(){var e=this.array.length;return 32+e+Math.floor(e/6)};mu.prototype.compressToBuffer=function(e){var r=this.array,i=r.length,s=0,a=0,c;for(a=A1(i,e,a);s<i;)c=Math.min(i-s,x1),a=E1(r,s,c,e,a),s+=c;return a};Bl.SnappyCompressor=mu});var Ll=_e(wu=>{"use strict";function Rl(){return typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node<"u"}u(Rl,"isNode");function lo(e){return e instanceof Uint8Array&&(!Rl()||!Buffer.isBuffer(e))}u(lo,"isUint8Array");function ho(e){return e instanceof ArrayBuffer}u(ho,"isArrayBuffer");function Il(e){return Rl()?Buffer.isBuffer(e):!1}u(Il,"isBuffer");var O1=El().SnappyDecompressor,C1=Nl().SnappyCompressor,Pl="Argument compressed must be type of ArrayBuffer, Buffer, or Uint8Array";function B1(e){if(!lo(e)&&!ho(e)&&!Il(e))throw new TypeError(Pl);var r=!1,i=!1;lo(e)?r=!0:ho(e)&&(i=!0,e=new Uint8Array(e));var s=new O1(e),a=s.readUncompressedLength();if(a===-1)throw new Error("Invalid Snappy bitstream");var c,h;if(r){if(c=new Uint8Array(a),!s.uncompressToBuffer(c))throw new Error("Invalid Snappy bitstream")}else if(i){if(c=new ArrayBuffer(a),h=new Uint8Array(c),!s.uncompressToBuffer(h))throw new Error("Invalid Snappy bitstream")}else if(c=Buffer.alloc(a),!s.uncompressToBuffer(c))throw new Error("Invalid Snappy bitstream");return c}u(B1,"uncompress");function N1(e){if(!lo(e)&&!ho(e)&&!Il(e))throw new TypeError(Pl);var r=!1,i=!1;lo(e)?r=!0:ho(e)&&(i=!0,e=new Uint8Array(e));var s=new C1(e),a=s.maxCompressedLength(),c,h,y;return r?(c=new Uint8Array(a),y=s.compressToBuffer(c)):i?(c=new ArrayBuffer(a),h=new Uint8Array(c),y=s.compressToBuffer(h)):(c=Buffer.alloc(a),y=s.compressToBuffer(c)),c.slice(0,y)}u(N1,"compress");wu.uncompress=B1;wu.compress=N1});var Ml=_e((zb,Fl)=>{"use strict";var R1=require("fs"),I1=require("path"),P1=Tl(),L1=Ll(),k1=[".avro",".avsc",".confluent-avro",".azureSchemaRegistry-avro",".pulsarSchemaRegistry-avro"],F1=4,M1=u(async e=>{let r=await D1(e);return JSON.parse(r)},"openAvroFile"),D1=u(e=>new Promise((r,i)=>{let s=kl(e),a=u((c,h)=>c?i(c):r(h),"respond");if(!k1.includes(s))return a(new Error(`The file ${e} is not recognized as Avro Schema or Data.`));if(s===".avro")return q1(e,a);R1.readFile(e,"utf-8",a)}),"getFileContent"),q1=u((e,r)=>{let i={snappy:(s,a)=>a(L1.uncompress(s.slice(0,-F1))),null:(s,a)=>a(null,s)};P1.createFileDecoder(e,{codecs:i}).on("metadata",s=>{try{let a=JSON.stringify(s);return r(null,a)}catch(a){return r(a)}}).on("error",r)},"readAvroData"),kl=u(e=>I1.extname(e),"getExtension");Fl.exports={openAvroFile:M1,getExtension:kl}});var{setDependencies:U1,dependencies:H1}=St(),{adaptJsonSchema:W1}=yc(),{initPluginConfiguration:z1}=Ds(),V1=Hi(),$1=qc(),{openAvroFile:G1}=Ml(),{getNamespace:J1,handleErrorObject:Y1}=Xr(),mr,K1=u(async(e,r,i,s)=>{U1(s),z1(e.pluginConfiguration,r),mr=H1.lodash;try{let{filePath:a}=e,c=await G1(a),h=$1(c),{schemaRegistryType:y,schemaRegistryUrl:v}=mr.first(Dl(c));return i(null,j1(c,h),{schemaRegistryType:y,schemaRegistryUrl:v},[],"multipleSchema")}catch(a){let c=Y1(a);return r.log("error",c,"Parsing Avro Schema Error"),i(c)}},"reFromFile"),j1=u((e,r)=>{var c;let i=Dl(e),s=i.length===1&&r.length>1,a=(c=i[0])==null?void 0:c.namespace;return r.map((h,y)=>{let{namespace:v,schemaType:x,schemaGroupName:T,confluentSubjectName:E,schemaTopic:B,confluentVersion:N}=i[y]||{},I=s?a:v,L=Z1({name:h.title,namespace:v,confluentSubjectName:E,schemaTopic:B}),U=[];return V1(H=>{if(!H.$ref)return H;let se="#collection/definitions/";return H.$ref.startsWith(se)&&(U=[...U,H.$ref.slice(se.length)]),H})(h),{objectNames:{collectionName:h.title},doc:{dbName:I||"",collectionName:h.title,bucketInfo:{name:I||""}},jsonSchema:JSON.stringify({...h,schemaType:x,schemaTopic:B,schemaGroupName:T,confluentSubjectName:E,confluentVersion:N,...L&&{schemaNameStrategy:L}}),references:U}})},"getPackages"),Z1=u(({name:e,namespace:r,confluentSubjectName:i,schemaTopic:s})=>{var T;let a=(i||"").split("-").filter(Boolean),c=["key","value"].includes(mr.last(a)),h=mr.first(a)===s&&s!==r+"."+e;if(r&&((T=mr.first(a))==null?void 0:T.startsWith(r+"."))&&(a[0]=a[0].slice(r.length+1)),c&&(a=a.slice(0,-1)),h&&(a=a.slice(1)),h&&mr.isEmpty(a))return e===s?"RecordNameStrategy":"TopicNameStrategy";let v=[...(e||"").split("-")].filter(Boolean);if(mr.isEqual(v,a))return h?"TopicRecordNameStrategy":"RecordNameStrategy"},"inferSchemaNameStrategy"),Dl=u(e=>(e=mr.isArray(e)?e:[e],e.map(r=>({namespace:J1(r)||"",schemaGroupName:r.schemaGroupName,schemaRegistryType:r.schemaRegistryType,schemaRegistryUrl:r.schemaRegistryUrl,confluentSubjectName:r.confluentSubjectName,schemaTopic:r.schemaTopic,schemaType:r.schemaType,confluentVersion:r.version}))),"getSchemasData");module.exports={reFromFile:K1,adaptJsonSchema:W1};
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
